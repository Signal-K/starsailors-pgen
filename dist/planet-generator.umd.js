(function(je,_){typeof exports=="object"&&typeof module<"u"?_(exports,require("react"),require("@react-three/fiber"),require("@react-three/drei"),require("three"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","@react-three/fiber","@react-three/drei","three","react-dom"],_):(je=typeof globalThis<"u"?globalThis:je||self,_(je.PlanetGenerator={},je.React,je.fiber,je.drei,je.THREE,je.ReactDOM))})(this,function(je,_,Me,pe,mc,Zn){"use strict";function Dr(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const h=Dr(_),k=Dr(mc),Wt=Dr(Zn);var Kt={exports:{}},Mt={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jn;function hc(){if(Jn)return Mt;Jn=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:e,type:n,key:i,ref:s!==void 0?s:null,props:a}}return Mt.Fragment=t,Mt.jsx=r,Mt.jsxs=r,Mt}var Tt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn;function pc(){return Qn||(Qn=1,process.env.NODE_ENV!=="production"&&function(){function e(E){if(E==null)return null;if(typeof E=="function")return E.$$typeof===P?null:E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case p:return"Fragment";case x:return"Profiler";case g:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList";case F:return"Activity"}if(typeof E=="object")switch(typeof E.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),E.$$typeof){case b:return"Portal";case w:return(E.displayName||"Context")+".Provider";case y:return(E._context.displayName||"Context")+".Consumer";case C:var $=E.render;return E=E.displayName,E||(E=$.displayName||$.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case T:return $=E.displayName||null,$!==null?$:e(E.type)||"Memo";case S:$=E._payload,E=E._init;try{return e(E($))}catch{}}return null}function t(E){return""+E}function r(E){try{t(E);var $=!1}catch{$=!0}if($){$=console;var q=$.error,Y=typeof Symbol=="function"&&Symbol.toStringTag&&E[Symbol.toStringTag]||E.constructor.name||"Object";return q.call($,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",Y),t(E)}}function n(E){if(E===p)return"<>";if(typeof E=="object"&&E!==null&&E.$$typeof===S)return"<...>";try{var $=e(E);return $?"<"+$+">":"<...>"}catch{return"<...>"}}function s(){var E=N.A;return E===null?null:E.getOwner()}function a(){return Error("react-stack-top-frame")}function i(E){if(A.call(E,"key")){var $=Object.getOwnPropertyDescriptor(E,"key").get;if($&&$.isReactWarning)return!1}return E.key!==void 0}function c(E,$){function q(){H||(H=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",$))}q.isReactWarning=!0,Object.defineProperty(E,"key",{get:q,configurable:!0})}function l(){var E=e(this.type);return I[E]||(I[E]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),E=this.props.ref,E!==void 0?E:null}function u(E,$,q,Y,te,ae,le,L){return q=ae.ref,E={$$typeof:v,type:E,key:$,props:ae,_owner:te},(q!==void 0?q:null)!==null?Object.defineProperty(E,"ref",{enumerable:!1,get:l}):Object.defineProperty(E,"ref",{enumerable:!1,value:null}),E._store={},Object.defineProperty(E._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(E,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(E,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:le}),Object.defineProperty(E,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:L}),Object.freeze&&(Object.freeze(E.props),Object.freeze(E)),E}function m(E,$,q,Y,te,ae,le,L){var K=$.children;if(K!==void 0)if(Y)if(O(K)){for(Y=0;Y<K.length;Y++)f(K[Y]);Object.freeze&&Object.freeze(K)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(K);if(A.call($,"key")){K=e(E);var J=Object.keys($).filter(function(re){return re!=="key"});Y=0<J.length?"{key: someKey, "+J.join(": ..., ")+": ...}":"{key: someKey}",D[K+Y]||(J=0<J.length?"{"+J.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Y,K,J,K),D[K+Y]=!0)}if(K=null,q!==void 0&&(r(q),K=""+q),i($)&&(r($.key),K=""+$.key),"key"in $){q={};for(var Q in $)Q!=="key"&&(q[Q]=$[Q])}else q=$;return K&&c(q,typeof E=="function"?E.displayName||E.name||"Unknown":E),u(E,K,ae,te,s(),q,le,L)}function f(E){typeof E=="object"&&E!==null&&E.$$typeof===v&&E._store&&(E._store.validated=1)}var d=_,v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),P=Symbol.for("react.client.reference"),N=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.prototype.hasOwnProperty,O=Array.isArray,z=console.createTask?console.createTask:function(){return null};d={"react-stack-bottom-frame":function(E){return E()}};var H,I={},G=d["react-stack-bottom-frame"].bind(d,a)(),M=z(n(a)),D={};Tt.Fragment=p,Tt.jsx=function(E,$,q,Y,te){var ae=1e4>N.recentlyCreatedOwnerStacks++;return m(E,$,q,!1,Y,te,ae?Error("react-stack-top-frame"):G,ae?z(n(E)):M)},Tt.jsxs=function(E,$,q,Y,te){var ae=1e4>N.recentlyCreatedOwnerStacks++;return m(E,$,q,!0,Y,te,ae?Error("react-stack-top-frame"):G,ae?z(n(E)):M)}}()),Tt}var eo;function to(){return eo||(eo=1,process.env.NODE_ENV==="production"?Kt.exports=hc():Kt.exports=pc()),Kt.exports}var o=to();const qt={"Rocky Highlands":{temperature:[240,320],atmosphereStrength:[.3,.7],cloudCount:[10,60],waterHeight:[0,.2],surfaceRoughness:[.5,1],plateTectonics:[.4,.9],biomassLevel:[.01,.2],waterLevel:[.1,.3],salinity:[.1,.5],volcanicActivity:[.2,.8],surfaceDeposits:["Bedrock","Big Rocks","Surface Cracks"]},"Barren Wasteland":{temperature:[180,260],atmosphereStrength:[.1,.5],cloudCount:[0,10],waterHeight:[0,.05],surfaceRoughness:[.2,.8],plateTectonics:[.1,.5],biomassLevel:[0,.05],waterLevel:[0,.1],salinity:[0,.3],volcanicActivity:[0,.3],surfaceDeposits:["Dust Deposits","Surface Cracks"]},"Arid Dunes":{temperature:[250,330],atmosphereStrength:[.2,.6],cloudCount:[5,40],waterHeight:[0,.2],surfaceRoughness:[.3,.9],plateTectonics:[.1,.4],biomassLevel:[0,.1],waterLevel:[0,.2],salinity:[0,.4],volcanicActivity:[.1,.6],surfaceDeposits:["Sand","Unconsolidated Soil"]},"Frigid Expanse":{temperature:[120,240],atmosphereStrength:[.4,.9],cloudCount:[20,100],waterHeight:[.1,.5],surfaceRoughness:[.2,.6],plateTectonics:[.1,.3],biomassLevel:[0,.3],waterLevel:[.2,.8],salinity:[.2,.8],volcanicActivity:[0,.2],surfaceDeposits:["Ice Sheets","Frozen Lakes"]},"Volcanic Terrain":{temperature:[300,1200],atmosphereStrength:[.5,1.2],cloudCount:[15,70],waterHeight:[0,.1],surfaceRoughness:[.7,1.2],plateTectonics:[.5,1],biomassLevel:[.02,.1],waterLevel:[0,.2],salinity:[0,.2],volcanicActivity:[.5,1.2],surfaceDeposits:["Volcanic Ash","Lava Fields"]},"Basalt Plains":{temperature:[220,350],atmosphereStrength:[.3,.8],cloudCount:[10,50],waterHeight:[0,.3],surfaceRoughness:[.3,.7],plateTectonics:[.3,.7],biomassLevel:[0,.15],waterLevel:[0,.3],salinity:[.1,.4],volcanicActivity:[.2,.6],surfaceDeposits:["Basaltic Rock","Mineral Deposits"]},"Sediment Flats":{temperature:[260,310],atmosphereStrength:[.4,.7],cloudCount:[20,60],waterHeight:[.1,.4],surfaceRoughness:[.1,.4],plateTectonics:[.1,.4],biomassLevel:[.05,.3],waterLevel:[.2,.5],salinity:[.2,.6],volcanicActivity:[0,.3],surfaceDeposits:["Clay","Fine Sand","Sulfate-Rich Soil"]},"Cratered Terrain":{temperature:[200,300],atmosphereStrength:[.1,.6],cloudCount:[5,40],waterHeight:[0,.2],surfaceRoughness:[.4,.9],plateTectonics:[0,.3],biomassLevel:[0,.1],waterLevel:[0,.2],salinity:[0,.3],volcanicActivity:[0,.4],surfaceDeposits:["Regolith","Dust Deposits"]},"Tundra Basin":{temperature:[180,270],atmosphereStrength:[.4,.8],cloudCount:[30,80],waterHeight:[.2,.5],surfaceRoughness:[.2,.5],plateTectonics:[.1,.4],biomassLevel:[.1,.4],waterLevel:[.3,.6],salinity:[.1,.4],volcanicActivity:[0,.2],surfaceDeposits:["Permafrost","Pebbles","Rocky Terrain"]},"Temperate Highlands":{temperature:[270,310],atmosphereStrength:[.5,.9],cloudCount:[40,90],waterHeight:[.3,.6],surfaceRoughness:[.4,.8],plateTectonics:[.3,.7],biomassLevel:[.3,.8],waterLevel:[.3,.7],salinity:[.2,.5],volcanicActivity:[.1,.4],surfaceDeposits:["Mineral-Rich Soil","Loam"]},"Oceanic World":{temperature:[260,320],atmosphereStrength:[.6,1],cloudCount:[60,100],waterHeight:[.9,1],surfaceRoughness:[.1,.3],plateTectonics:[.2,.6],biomassLevel:[.4,.9],waterLevel:[.9,1],salinity:[.5,.9],volcanicActivity:[.1,.5],surfaceDeposits:["Deep Water","Sedimentary Layers"]},"Tropical Jungle":{temperature:[290,330],atmosphereStrength:[.7,1],cloudCount:[70,100],waterHeight:[.4,.7],surfaceRoughness:[.3,.7],plateTectonics:[.2,.5],biomassLevel:[.7,1],waterLevel:[.5,.8],salinity:[.2,.4],volcanicActivity:[.1,.3],surfaceDeposits:["Dense Vegetation","Wet Soil"]},"Flood Basin":{temperature:[270,320],atmosphereStrength:[.5,.9],cloudCount:[50,90],waterHeight:[.5,.8],surfaceRoughness:[.1,.3],plateTectonics:[.1,.3],biomassLevel:[.3,.7],waterLevel:[.6,.9],salinity:[.3,.6],volcanicActivity:[0,.2],surfaceDeposits:["Silt","Muddy Terrain"]},"Coral Reefs":{temperature:[280,310],atmosphereStrength:[.6,.9],cloudCount:[40,80],waterHeight:[.6,.9],surfaceRoughness:[.2,.5],plateTectonics:[.1,.4],biomassLevel:[.6,.9],waterLevel:[.7,.9],salinity:[.6,.9],volcanicActivity:[0,.2],surfaceDeposits:["Limestone","Organic Deposits"]},"Dune Fields":{temperature:[270,350],atmosphereStrength:[.2,.6],cloudCount:[10,50],waterHeight:[0,.1],surfaceRoughness:[.3,.7],plateTectonics:[0,.3],biomassLevel:[0,.1],waterLevel:[0,.1],salinity:[0,.3],volcanicActivity:[0,.3],surfaceDeposits:["Fine Sand","Wind-Driven Erosion"]}};function gc(e,t){return!qt[e]||!qt[e][t]?{temperature:[50,400],atmosphereStrength:[0,1],cloudCount:[0,100],waterHeight:[0,1],surfaceRoughness:[0,2],plateTectonics:[0,1],biomassLevel:[0,1],waterLevel:[0,1],salinity:[0,1],volcanicActivity:[0,1]}[t]||[0,1]:qt[e][t]}function vc(){return Object.keys(qt)}const xc={"Rocky Highlands":{oceanFloor:"#3D2314",beach:"#8D6E63",regular:"#A1887F",mountain:"#E0E0E0"},"Barren Wasteland":{oceanFloor:"#3E2723",beach:"#5D4037",regular:"#795548",mountain:"#A1887F"},"Arid Dunes":{oceanFloor:"#B59677",beach:"#D7CDA5",regular:"#E6D7B3",mountain:"#F5EED5"},"Frigid Expanse":{oceanFloor:"#78909C",beach:"#B0BEC5",regular:"#ECEFF1",mountain:"#FFFFFF"},"Volcanic Terrain":{oceanFloor:"#1A1A1A",beach:"#3E2723",regular:"#5D4037",mountain:"#795548"},"Basalt Plains":{oceanFloor:"#212121",beach:"#424242",regular:"#616161",mountain:"#9E9E9E"},"Sediment Flats":{oceanFloor:"#6D4C41",beach:"#8D6E63",regular:"#BCAAA4",mountain:"#D7CCC8"},"Cratered Terrain":{oceanFloor:"#424242",beach:"#616161",regular:"#9E9E9E",mountain:"#E0E0E0"},"Tundra Basin":{oceanFloor:"#546E7A",beach:"#78909C",regular:"#B0BEC5",mountain:"#ECEFF1"},"Temperate Highlands":{oceanFloor:"#2E7D32",beach:"#43A047",regular:"#66BB6A",mountain:"#A5D6A7"},"Oceanic World":{oceanFloor:"#01579B",beach:"#0288D1",regular:"#29B6F6",mountain:"#81D4FA"},"Tropical Jungle":{oceanFloor:"#1B5E20",beach:"#2E7D32",regular:"#43A047",mountain:"#66BB6A"},"Flood Basin":{oceanFloor:"#00695C",beach:"#00897B",regular:"#26A69A",mountain:"#80CBC4"},"Coral Reefs":{oceanFloor:"#0277BD",beach:"#039BE5",regular:"#29B6F6",mountain:"#81D4FA"},"Dune Fields":{oceanFloor:"#BF360C",beach:"#E64A19",regular:"#FF7043",mountain:"#FFAB91"}},yc={rocky:{r:0,g:-.05,b:-.05},sandy:{r:.1,g:.05,b:-.1},volcanic:{r:-.1,g:-.1,b:-.1},organic:{r:-.1,g:.1,b:-.1},dusty:{r:.05,g:0,b:-.05},frozen:{r:-.05,g:0,b:.1},muddy:{r:-.05,g:-.05,b:-.1}};function Yt(e,t){const r=yc[t]||{r:0,g:0,b:0},n=bc(e);return n.r=Math.max(0,Math.min(1,n.r+r.r)),n.g=Math.max(0,Math.min(1,n.g+r.g)),n.b=Math.max(0,Math.min(1,n.b+r.b)),wc(Math.floor(n.r*255),Math.floor(n.g*255),Math.floor(n.b*255))}function bc(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:Number.parseInt(t[1],16)/255,g:Number.parseInt(t[2],16)/255,b:Number.parseInt(t[3],16)/255}:{r:0,g:0,b:0}}function wc(e,t,r){return"#"+((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1)}function ft(e){return xc[e]||{oceanFloor:"#3D2314",beach:"#8D6E63",regular:"#A1887F",mountain:"#E0E0E0"}}const Cc=`
  varying vec2 vUv;
  varying vec3 vNormal;
  varying vec3 vPosition;
  varying float vElevation;
  
  uniform float time;
  uniform float surfaceRoughness;
  uniform float mountainHeight;
  uniform float isGaseous;
  uniform int soilType;
  uniform int soilTexture;
  uniform float landmarkPositions[30]; // Support up to 10 landmarks (x,y,z for each)
  uniform float landmarkInfluences[40]; // Support up to 10 landmarks (radius,height,roughness,type for each)
  uniform int landmarkCount;
  
  // Simplex 3D Noise
  vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}

  float snoise(vec3 v){ 
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);

    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);

    vec3 x1 = x0 - i1 + 1.0 * C.xxx;
    vec3 x2 = x0 - i2 + 2.0 * C.xxx;
    vec3 x3 = x0 - 1. + 3.0 * C.xxx;

    i = mod(i, 289.0); 
    vec4 p = permute(permute(permute( 
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0)) 
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    float n_ = 1.0/7.0;
    vec3 ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);

    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  // Fractal Brownian Motion with reduced octaves for less fuzziness
  float fbm(vec3 p, int octaves) {
    float value = 0.0;
    float amplitude = 1.0;
    float frequency = 1.0;
    float persistence = 0.5;
    
    for (int i = 0; i < octaves; i++) {
      value += amplitude * snoise(p * frequency);
      amplitude *= persistence;
      frequency *= 2.0;
    }
    
    return value;
  }

  // Soil texture function with reduced intensity
  float getSoilTexture(vec3 pos, int textureType) {
    float detail = 0.0;
    
    // Scale and depth based on texture type
    float scale = 1.0;
    float depth = 0.05;
    
    if (textureType == 0) { // smooth
      scale = 5.0; depth = 0.01;
    } else if (textureType == 1) { // rough
      scale = 15.0; depth = 0.05;
    } else if (textureType == 2) { // cracked
      scale = 20.0; depth = 0.08;
      float crack1 = snoise(pos * scale * 2.0);
      float crack2 = snoise(pos * scale * 5.0);
      return (abs(crack1) < 0.1 ? depth * 1.5 : 0.0) + (abs(crack2) < 0.05 ? depth * 0.8 : 0.0);
    } else if (textureType == 3) { // layered
      scale = 12.0; depth = 0.04;
      float layer = snoise(pos * scale * 0.5);
      return sin(layer * 20.0) * depth * 0.8;
    } else if (textureType == 4) { // porous
      scale = 25.0; depth = 0.06;
      float pore = snoise(pos * scale * 4.0);
      return pore > 0.8 ? depth * 1.5 : 0.0;
    } else if (textureType == 5) { // grainy
      scale = 30.0; depth = 0.03;
      float grain1 = snoise(pos * scale * 8.0);
      float grain2 = snoise(pos * scale * 12.0);
      return grain1 * grain2 * depth;
    } else if (textureType == 6) { // crystalline
      scale = 18.0; depth = 0.07;
      float crystal = snoise(pos * scale * 3.0);
      return (crystal > 0.7 || crystal < -0.7) ? depth * 1.2 : 0.0;
    }
    
    // Default noise pattern
    float defaultNoise = snoise(pos * scale);
    return defaultNoise * depth * 0.5;
  }

  // Calculate landmark terrain influence
  vec2 calculateLandmarkInfluence(vec3 position) {
    float totalHeight = 0.0;
    float totalRoughness = 0.0;
    float totalWeight = 0.0;
    
    for (int i = 0; i < 10; i++) {
      if (i >= landmarkCount) break;
      
      // Get landmark position from flat array (3 floats per landmark)
      int posIndex = i * 3;
      vec3 landmarkPos = vec3(
        landmarkPositions[posIndex],
        landmarkPositions[posIndex + 1],
        landmarkPositions[posIndex + 2]
      );
      
      // Get landmark influence from flat array (4 floats per landmark)
      int infIndex = i * 4;
      float radius = landmarkInfluences[infIndex];
      float height = landmarkInfluences[infIndex + 1];
      float roughness = landmarkInfluences[infIndex + 2];
      float type = landmarkInfluences[infIndex + 3];
      
      // Calculate distance to landmark
      float distance = length(position - landmarkPos);
      
      // If within influence radius
      if (distance <= radius) {
        // Calculate weight based on distance (closer = stronger influence)
        float weight = 1.0 - (distance / radius);
        float heightInfluence = 0.0;
        
        // Different influence types have different height profiles
        if (type < 0.5) {
          // Crater: depression with raised rim
          float rimFactor = distance / radius;
          if (rimFactor > 0.8) {
            heightInfluence = height * 0.5 * (1.0 - (rimFactor - 0.8) * 5.0);
          } else {
            heightInfluence = height * (distance / radius);
          }
        } 
        else if (type < 1.5) {
          // Mountain: raised area that tapers off with distance
          heightInfluence = height * pow(1.0 - distance / radius, 2.0);
        }
        else if (type < 2.5) {
          // Valley: depression that's deeper in the center
          heightInfluence = height * pow(1.0 - distance / radius, 1.5);
        }
        else if (type < 3.5) {
          // Volcano: steep cone with central depression
          float normalizedDist = distance / radius;
          if (normalizedDist < 0.2) {
            // Central depression (caldera)
            heightInfluence = height * -0.3;
          } else {
            // Cone shape
            heightInfluence = height * pow(1.0 - normalizedDist, 1.2);
          }
        }
        else if (type < 4.5) {
          // Ice cap: gentle dome with smooth edges
          heightInfluence = height * pow(cos(3.14159 * distance / radius / 2.0), 2.0);
        }
        else if (type < 5.5) {
          // Ocean: depression with flat bottom
          heightInfluence = height * min(1.0, distance / (radius * 0.2));
        }
        else {
          // Custom or undefined: simple linear falloff
          heightInfluence = height * weight;
        }
        
        // Add weighted contributions
        totalHeight += heightInfluence * weight;
        totalRoughness += roughness * weight;
        totalWeight += weight;
      }
    }
    
    // Normalize by total weight if any landmarks had influence
    if (totalWeight > 0.0) {
      return vec2(totalHeight / totalWeight, totalRoughness / totalWeight);
    }
    
    return vec2(0.0, 0.0);
  }

  void main() {
    vUv = uv;
    vNormal = normal;
    vPosition = position;
    
    vec3 pos = position;
    float elevation = 0.0;
    
    if (isGaseous > 0.5) {
      // Gas giant features
      float bands = sin(pos.y * 10.0 + time * 0.1) * 0.5;
      float storms = snoise(pos * vec3(2.0, 8.0, 2.0) + time * 0.15) * 0.5;
      float cyclones = snoise(pos * vec3(4.0, 1.0, 4.0) + time * 0.05) * 0.25;
      
      elevation = mix(bands, storms, 0.5) + cyclones;
      elevation *= 0.05; // Reduced distortion for gas giants
      
      // Apply landmark influences (storms, etc.)
      vec2 landmarkEffect = calculateLandmarkInfluence(normalize(pos));
      elevation += landmarkEffect.x * 0.5; // Reduced effect for gas giants
    } else {
      // Terrestrial features - use FBM with fewer octaves for less fuzziness
      float baseNoise = fbm(pos * surfaceRoughness + time * 0.01, 5);
    
      // Apply mountain height
      baseNoise *= mountainHeight;
      
      // Apply soil texture with reduced intensity
      float textureDetail = getSoilTexture(pos, soilTexture) * 0.7;
      
      // Adjust texture based on soil type
      if (soilType == 2) { // volcanic
        textureDetail *= 1.5;
      } else if (soilType == 1) { // sandy
        textureDetail *= 0.7;
      }
      
      elevation = baseNoise - textureDetail;
      
      // Apply landmark influences
      vec2 landmarkEffect = calculateLandmarkInfluence(normalize(pos));
      elevation += landmarkEffect.x;
      
      // Add additional roughness from landmarks
      if (landmarkEffect.y > 0.0) {
        float additionalRoughness = snoise(pos * 20.0 * landmarkEffect.y) * landmarkEffect.y * 0.2;
        elevation += additionalRoughness;
      }
      
      elevation *= 0.08; // Scale for terrestrial planets
    }
    
    vElevation = elevation;
    
    // Apply displacement
    pos += normal * elevation;
    
    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
  }
`,Nc=`
  varying vec2 vUv;
  varying vec3 vNormal;
  varying vec3 vPosition;
  varying float vElevation;
  
  uniform vec3 oceanColor;
  uniform vec3 beachColor;
  uniform vec3 landColor;
  uniform vec3 mountainColor;
  uniform float time;
  uniform float waterLevel;
  uniform float isGaseous;
  uniform float liquidEnabled;
  uniform int soilType;
  
  // Simplex 3D Noise
  vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}

  float snoise(vec3 v){ 
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);

    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);

    vec3 x1 = x0 - i1 + 1.0 * C.xxx;
    vec3 x2 = x0 - i2 + 2.0 * C.xxx;
    vec3 x3 = x0 - 1. + 3.0 * C.xxx;

    i = mod(i, 289.0); 
    vec4 p = permute(permute(permute( 
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0)) 
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    float n_ = 1.0/7.0;
    vec3 ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);

    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  void main() {
    vec3 normal = normalize(vNormal);

    // Simple ambient occlusion based on elevation
    float ao = 1.0 - abs(vElevation) * 2.0;
    ao = max(0.4, ao);
    
    // Static light direction for consistent lighting
    vec3 lightDir = normalize(vec3(0.0, 0.3, 1.0));
    
    // Basic lighting calculation - fixed intensity
    float lightFactor = 0.8;
  
    vec3 color;
  
    if (isGaseous > 0.5) {
      // Gas giant coloring
      float bands = sin(vPosition.y * 10.0 + time * 0.1) * 0.5 + 0.5;
      float storms = smoothstep(0.4, 0.6, snoise(vPosition * 2.0 + time * 0.15));
      float cyclones = smoothstep(0.3, 0.7, snoise(vPosition * vec3(4.0, 1.0, 4.0) + time * 0.05));
    
      // Use ocean and land colors for gas giants
      color = mix(oceanColor, landColor, bands);
      color = mix(color, mountainColor, storms * 0.5);
      color = mix(color, vec3(1.0), cyclones * 0.2);
    
      // Add subtle atmospheric glow
      float atmosphere = pow(1.0 - abs(dot(normal, vec3(0.0, 0.0, 1.0))), 2.0);
      color += vec3(0.1, 0.15, 0.25) * atmosphere;
    } else {
      // Terrestrial coloring based on elevation
      float normalizedElevation = (vElevation + 0.08) / 0.16; // Normalize to 0-1 range
    
      if (liquidEnabled > 0.5 && normalizedElevation < waterLevel) {
        // Water areas
        float depth = (waterLevel - normalizedElevation) / waterLevel;
        color = mix(beachColor, oceanColor, depth * 2.0);
      
        // Add water effects
        float waterNoise = snoise(vPosition * 20.0 + time * 0.1) * 0.02;
        color += vec3(waterNoise);
      
        // Add water shine
        float fresnel = pow(1.0 - abs(dot(normal, vec3(0.0, 0.0, 1.0))), 2.0);
        float shine = pow(fresnel, 4.0) * 0.3;
        color += vec3(shine);
      } else {
        // Land areas
        if (normalizedElevation < waterLevel + 0.05) {
          // Beach/shore
          color = beachColor;
        } else if (normalizedElevation < waterLevel + 0.3) {
          // Regular terrain
          float t = (normalizedElevation - (waterLevel + 0.05)) / 0.25;
          color = mix(beachColor, landColor, t);
        } else {
          // Mountains
          float t = (normalizedElevation - (waterLevel + 0.3)) / 0.7;
          color = mix(landColor, mountainColor, t);
        }
      
        // Add soil type variations with reduced intensity
        float soilNoise = snoise(vPosition * 10.0) * 0.05;
      
        // Different soil type effects
        if (soilType == 0) { // rocky
          color *= 0.95 + soilNoise;
        } else if (soilType == 1) { // sandy
          color = mix(color, beachColor, 0.15);
          color += vec3(soilNoise * 0.15);
        } else if (soilType == 2) { // volcanic
          color *= 0.85;
          if (soilNoise > 0.03) color += vec3(0.08, 0.0, 0.0);
        } else if (soilType == 3) { // organic
          color = mix(color, vec3(0.2, 0.5, 0.2), 0.25);
        } else if (soilType == 4) { // dusty
          color = mix(color, vec3(0.6, 0.5, 0.4), 0.25);
        } else if (soilType == 5) { // frozen
          color = mix(color, vec3(0.8, 0.9, 1.0), 0.3);
          color += vec3(soilNoise * 0.2);
        } else if (soilType == 6) { // muddy
          color = mix(color, vec3(0.3, 0.2, 0.1), 0.3);
        }
      }
    }
    
    // Apply ambient occlusion
    color *= ao;
    
    // Apply fixed light intensity
    color *= lightFactor;
    
    gl_FragColor = vec4(color, 1.0);
  }
`,ro=`
  varying vec3 vNormal;
  varying vec2 vUv;
  
  void main() {
    vNormal = normalize(normalMatrix * normal);
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,no=`
  uniform float time;
  uniform vec3 color;
  uniform float strength;
  
  varying vec3 vNormal;
  varying vec2 vUv;
  
  void main() {
    float intensity = pow(0.7 - abs(dot(vNormal, vec3(0, 0, 1))), 1.5);
    vec3 atmosphereColor = color * intensity * strength;
    gl_FragColor = vec4(atmosphereColor, intensity * strength * 0.7);
  }
`,jc=`
  uniform float time;
  varying vec2 vUv;
  varying vec3 vNormal;

  void main() {
    vUv = uv;
    vNormal = normal;
    
    // Add some movement to the clouds
    vec3 pos = position;
    pos += normal * sin(pos.x * 10.0 + time * 0.5) * 0.005;
    
    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
  }
`,kc=`
  uniform float time;
  uniform float cloudCount;
  varying vec2 vUv;
  varying vec3 vNormal;

  float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }

  void main() {
    vec2 uv = vUv;
    
    // Create cloud-like patterns
    float noise = rand(uv + time * 0.1) * 0.5 + 0.5;
    noise += rand(uv * 2.0 - time * 0.05) * 0.25;
    noise += rand(uv * 4.0 + time * 0.1) * 0.125;
    noise /= 1.875;
    
    // Adjust cloud coverage based on cloudCount
    float coverage = cloudCount / 100.0;
    noise = smoothstep(0.5 - coverage * 0.4, 0.6, noise);
    
    // Create holes in the clouds
    float holes = rand(uv * 8.0 - time * 0.02);
    noise *= smoothstep(0.4, 0.6, holes);
    
    // Fade out at the edges for a more natural look
    float fadeEdges = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
    noise *= fadeEdges;
    
    gl_FragColor = vec4(1.0, 1.0, 1.0, noise * 0.5);
  }
`;function oo({pointInfo:e,planetStats:t}){const r=n=>n.toFixed(3);return o.jsx(pe.Html,{position:[0,0,0],style:{position:"absolute",right:"20px",bottom:"20px",pointerEvents:"none"},children:o.jsxs("div",{className:"w-64 bg-black/90 text-green-400 p-4 font-mono text-xs border border-green-500/30 rounded-md",children:[o.jsx("h3",{className:"text-sm font-bold mb-2 border-b border-green-500/30 pb-1",children:"SURFACE SCAN"}),o.jsxs("div",{className:"grid grid-cols-2 gap-y-1 gap-x-2",children:[o.jsx("span",{className:"text-green-500/70",children:"COORDINATES:"}),o.jsxs("span",{children:["X: ",r(e.normalizedPosition.x),o.jsx("br",{}),"Y: ",r(e.normalizedPosition.y),o.jsx("br",{}),"Z: ",r(e.normalizedPosition.z)]}),o.jsx("span",{className:"text-green-500/70",children:"ELEVATION:"}),o.jsxs("span",{children:[(e.height*100).toFixed(1)," units"]}),o.jsx("span",{className:"text-green-500/70",children:"TERRAIN:"}),o.jsx("span",{children:e.terrainType}),o.jsx("span",{className:"text-green-500/70",children:"TEMPERATURE:"}),o.jsxs("span",{children:[e.temperature.toFixed(1)," K",o.jsx("br",{}),"(",(e.temperature-273.15).toFixed(1),"Â°C)"]}),o.jsx("span",{className:"text-green-500/70",children:"REL TO FREEZE:"}),o.jsxs("span",{className:e.relativeToWaterTemp<0?"text-blue-400":"text-red-400",children:[e.relativeToWaterTemp>0?"+":"",e.relativeToWaterTemp.toFixed(1)," K"]})]}),o.jsx("div",{className:"mt-2 pt-1 border-t border-green-500/30 text-center text-green-500/50",children:"Click elsewhere to scan another location"})]})})}function Ec({planetStats:e}){const t=_.useRef(null),r=_.useRef(null),n=_.useRef(null),[s,a]=_.useState(null),{raycaster:i,camera:c,gl:l}=Me.useThree(),{planetMaterial:u,atmosphereMaterial:m,cloudsMaterial:f}=_.useMemo(()=>{const x=e.customColors||ft(e.biome||"Rocky Highlands"),y=new k.ShaderMaterial({uniforms:{time:{value:0},oceanColor:{value:new k.Color(x.oceanFloor||"#1E4D6B")},beachColor:{value:new k.Color(x.beach||"#8D6E63")},landColor:{value:new k.Color(x.regular||"#A1887F")},mountainColor:{value:new k.Color(x.mountain||"#D7CCC8")},waterLevel:{value:e.waterLevel||.65},surfaceRoughness:{value:e.surfaceRoughness||.5},mountainHeight:{value:e.mountainHeight||.6},isGaseous:{value:e.mass>7||e.radius>2.5?1:0},soilType:{value:["rocky","sandy","volcanic","organic","dusty","frozen","muddy"].indexOf(e.soilType||"rocky")},soilTexture:{value:["smooth","rough","cracked","layered","porous","grainy","crystalline"].indexOf(e.soilTexture||"rough")},liquidEnabled:{value:e.liquidEnabled!==!1?1:0},landmarkPositions:{value:new Float32Array(30)},landmarkInfluences:{value:new Float32Array(40)},landmarkCount:{value:0}},vertexShader:Cc,fragmentShader:Nc}),w=new k.ShaderMaterial({uniforms:{time:{value:0},color:{value:new k.Color(8900331)},strength:{value:e.atmosphereStrength||.8}},vertexShader:ro,fragmentShader:no,transparent:!0,side:k.DoubleSide,depthWrite:!1}),C=new k.ShaderMaterial({uniforms:{time:{value:0},cloudCount:{value:e.cloudCount||30}},vertexShader:jc,fragmentShader:kc,transparent:!0,depthWrite:!1});return{planetMaterial:y,atmosphereMaterial:w,cloudsMaterial:C}},[e]);_.useEffect(()=>{try{if(!u||!u.uniforms){console.warn("Planet material or uniforms not available");return}if(!e.landmarks||!Array.isArray(e.landmarks)||e.landmarks.length===0){u.uniforms.landmarkCount.value=0,u.uniforms.landmarkPositions.value=new Float32Array(30),u.uniforms.landmarkInfluences.value=new Float32Array(40);return}const x=e.landmarks.slice(0,10),y=[],w=[];for(let C=0;C<x.length;C++){const j=x[C];if(!j||!j.coordinates){console.warn("Invalid landmark found:",j);continue}const R=typeof j.coordinates.x=="number"?j.coordinates.x:0,T=typeof j.coordinates.y=="number"?j.coordinates.y:0,S=typeof j.coordinates.z=="number"?j.coordinates.z:0,F=new k.Vector3(R,T,S).normalize();y.push(F.x,F.y,F.z);let P=1;switch(j.influence_type){case"crater":P=0;break;case"mountain":P=1;break;case"valley":P=2;break;case"volcano":P=3;break;case"glacier":P=4;break;case"basin":P=5;break;default:P=6}w.push(typeof j.influence_radius=="number"?j.influence_radius:.5,typeof j.influence_strength=="number"?j.influence_strength:.7,typeof j.influence_roughness=="number"?j.influence_roughness:.5,P)}u.uniforms.landmarkPositions.value=new Float32Array(y),u.uniforms.landmarkInfluences.value=new Float32Array(w),u.uniforms.landmarkCount.value=y.length/3}catch(x){console.error("Error processing landmarks:",x),u&&u.uniforms&&(u.uniforms.landmarkCount.value=0,u.uniforms.landmarkPositions.value=new Float32Array(30),u.uniforms.landmarkInfluences.value=new Float32Array(40))}},[e.landmarks,u]);const d=x=>{if(x.stopPropagation(),!t.current)return;const y=new k.Vector2(x.clientX/l.domElement.clientWidth*2-1,-(x.clientY/l.domElement.clientHeight)*2+1);i.setFromCamera(y,c);const w=i.intersectObject(t.current);if(w.length>0){const C=w[0].point,j=C.clone().normalize(),R=u.uniforms.surfaceRoughness.value*u.uniforms.mountainHeight.value*.08*Math.sin(C.x*10+C.y*10+C.z*10),T=u.uniforms.waterLevel.value;let S="Mountain";R<-.05?S="Ocean Floor":R<T?S="Beach":R<T+.1&&(S="Lowland");const F=e.temperature,P=R*10,N=F-P,O=N-273;a({position:C,normalizedPosition:j,height:R,terrainType:S,temperature:N,relativeToWaterTemp:O})}};Me.useFrame(x=>{t.current&&(t.current.rotation.y+=.001,u.uniforms.time.value=x.clock.elapsedTime),r.current&&(r.current.rotation.y+=5e-4,m.uniforms.time.value=x.clock.elapsedTime),n.current&&(n.current.rotation.y+=.0012,f.uniforms.time.value=x.clock.elapsedTime)});const b=!(e.mass>7||e.radius>2.5)&&e.cloudCount&&e.cloudCount>0,p=(x,y)=>x>7||y>2.5?"gaseous":"terrestrial",g=_.useMemo(()=>{try{if(!e.landmarks||!Array.isArray(e.landmarks)||e.landmarks.length===0)return null;const y=p(e.mass,e.radius)==="gaseous";return e.landmarks.filter(C=>{if(!C)return!1;if(!C.category){const j=["storm","vortex","band","spot","turbulent","cyclone","anticyclone","zonal_flow"];return y?j.includes(C.influence_type||""):!j.includes(C.influence_type||"")}return y?C.category==="gaseous":C.category==="terrestrial"}).map((C,j)=>{if(!C||!C.coordinates)return null;const R=typeof C.coordinates.x=="number"?C.coordinates.x:0,T=typeof C.coordinates.y=="number"?C.coordinates.y:0,S=typeof C.coordinates.z=="number"?C.coordinates.z:0,F=new k.Vector3(R,T,S).normalize().multiplyScalar(e.radius*1.02);let P="#22c55e";C.type&&typeof C.type=="string"&&(C.type.includes("Volcano")||C.type.includes("Storm")?P="#ef4444":C.type.includes("Ocean")||C.type.includes("Water")?P="#3b82f6":C.type.includes("Ice")||C.type.includes("Frozen")?P="#a5f3fc":(C.type.includes("Sand")||C.type.includes("Desert"))&&(P="#fcd34d"));const N=C.visual_effect&&C.visual_effect!=="None";return o.jsxs("group",{position:[F.x,F.y,F.z],children:[o.jsxs("mesh",{children:[o.jsx("sphereGeometry",{args:[.03,16,16]}),o.jsx("meshBasicMaterial",{color:P})]}),N&&o.jsxs("mesh",{children:[o.jsx("sphereGeometry",{args:[.05,16,16]}),o.jsx("meshBasicMaterial",{color:P,transparent:!0,opacity:.3,depthWrite:!1})]}),o.jsx(pe.Html,{position:[0,.1,0],center:!0,distanceFactor:10,occlude:!0,children:o.jsx("div",{className:"bg-black/80 text-green-400 px-2 py-1 text-xs font-mono rounded border border-green-500/50 whitespace-nowrap",children:C.classification_id||"LM-???"})})]},j)}).filter(Boolean)}catch(x){return console.error("Error rendering landmark markers:",x),null}},[e.landmarks,e.radius,e.mass]);return o.jsxs(o.Fragment,{children:[o.jsxs("group",{onClick:d,children:[o.jsx(pe.Sphere,{ref:t,args:[1,256,256],scale:e.radius,children:o.jsx("primitive",{object:u,attach:"material"})}),o.jsx(pe.Sphere,{ref:r,args:[1.1,128,128],scale:e.radius,children:o.jsx("primitive",{object:m,attach:"material"})}),b&&o.jsx(pe.Sphere,{ref:n,args:[1.02,128,128],scale:e.radius,children:o.jsx("primitive",{object:f,attach:"material"})}),g]}),s&&o.jsx(oo,{pointInfo:s,planetStats:e})]})}const Or={mass:1,radius:1,density:5.51,temperature:288,surfaceRoughness:.5,terrainErosion:.3,waterLevel:.65,biomassLevel:.2,plateTectonics:.8,soilType:"rocky",soilTexture:"rough",atmosphereStrength:.8,liquidType:"water",salinity:.35,precipitationCompound:"water",biome:"Rocky Highlands",mountainHeight:.6,hasRings:!1,cloudCount:30,volcanicActivity:.3,waterHeight:.65,liquidEnabled:!0,landmarks:[],type:""};function Sc(e,t){return e/Math.pow(t,3)*5.51}function et(e,t){return e>7||t>2.5?"gaseous":"terrestrial"}function so(e){return e>=273&&e<=373?{type:"water",color:"#1E4D6B"}:e>=91&&e<=112?{type:"methane",color:"#7FB3D5"}:e>=63&&e<=77?{type:"nitrogen",color:"#90EE90"}:e>=195&&e<=240?{type:"ammonia",color:"#D8BFD8"}:e>=90&&e<=184?{type:"ethane",color:"#FFD700"}:{type:"none",color:"#8B4513"}}function ao(e,t){const n={water:[273,373],methane:[91,112],nitrogen:[63,77],ammonia:[195,240],ethane:[90,184]}[t];return n?e>=n[0]&&e<=n[1]:!1}var Te=(e=>(e[e.OceanFloor=0]="OceanFloor",e[e.Beach=1]="Beach",e[e.Regular=2]="Regular",e[e.Mountain=3]="Mountain",e))(Te||{});function Mc(e){const t={smooth:{scale:5,depth:.01,irregularity:.1,pattern:"noise"},rough:{scale:15,depth:.05,irregularity:.7,pattern:"noise"},cracked:{scale:20,depth:.08,irregularity:.6,pattern:"cracks"},layered:{scale:12,depth:.04,irregularity:.3,pattern:"layers"},porous:{scale:25,depth:.06,irregularity:.5,pattern:"pores"},grainy:{scale:30,depth:.03,irregularity:.8,pattern:"grains"},crystalline:{scale:18,depth:.07,irregularity:.4,pattern:"crystals"}};return t[e]||t.rough}function Tc(e,t){const r=(e+.15)/.3;return r<t-.2?0:r<t?1:r<t+.4?2:3}function Fr(e){return{...Or,...e}}function io(e){return[]}function Ac(e,t,r){return 0}function co(e,t,r){let n=0,s=0;if(t&&Array.isArray(t))for(let a=0;a<t.length;a++){const i=t[a];if(!i||!i.influence_radius||!i.influence_strength||!i.coordinates)continue;const c=typeof i.coordinates.x=="number"?i.coordinates.x:0,l=typeof i.coordinates.y=="number"?i.coordinates.y:0,u=typeof i.coordinates.z=="number"?i.coordinates.z:0,m=new k.Vector3(c,l,u).normalize().multiplyScalar(r),f=e.distanceTo(m),d=i.influence_radius*r;if(f<d){const v=f/d,b=i.influence_strength*(1-v);let p=0;switch(i.influence_type){case"crater":p=-b*.05;break;case"mountain":p=b*.08;break;case"valley":p=-b*.03;break;case"volcano":p=b*.1;break;case"basin":p=-b*.04;break;case"dune":p=b*.02*Math.sin(f*5);break;case"glacier":p=b*.06;break;case"storm":case"vortex":case"band":case"spot":p=b*.03;break;default:p=b*.05}let g=0;i.influence_type==="volcano"?g=b*.2:i.influence_type==="glacier"&&(g=-b*.1),n+=p,s+=g}}return{height:n,roughness:s}}function Rc({planetStats:e}){const t=_.useRef(null),r=_.useRef(null),n=et(e.mass,e.radius),s=_.useMemo(()=>{const a=e.customColors||ft(e.biome||"Rocky Highlands"),i=new k.Color(a.regular||"#A1887F"),c=new k.MeshStandardMaterial({color:i,roughness:.7,metalness:.1}),l=n==="terrestrial"?new k.Color(8900331):new k.Color(16777215),u=n==="terrestrial"?e.atmosphereStrength?e.atmosphereStrength*.4:.25:.15,m=new k.MeshPhongMaterial({color:l,transparent:!0,opacity:u,side:k.DoubleSide,depthWrite:!1});return{planetMaterial:c,atmosphereMaterial:m}},[e,n]);return Me.useFrame(()=>{t.current&&(t.current.rotation.y+=.001),r.current&&(r.current.rotation.y+=5e-4)}),o.jsxs("group",{children:[o.jsx(pe.Sphere,{ref:t,args:[1,64,64],scale:e.radius,children:o.jsx("primitive",{object:s.planetMaterial,attach:"material"})}),o.jsx(pe.Sphere,{ref:r,args:[1.1,32,32],scale:e.radius,children:o.jsx("primitive",{object:s.atmosphereMaterial,attach:"material"})})]})}const _c=`
  varying vec3 vNormal;
  varying vec3 vPosition;
  
  void main() {
    vNormal = normalize(normalMatrix * normal);
    vPosition = position;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,Pc=`
  uniform float time;
  uniform vec3 oceanColor;
  uniform vec3 beachColor;
  uniform vec3 landColor;
  uniform vec3 mountainColor;
  uniform float waterLevel;
  uniform float surfaceRoughness;
  uniform float mountainHeight;
  uniform float isGaseous;
  uniform int soilType;
  uniform int soilTexture;
  uniform float liquidEnabled;
  uniform vec3 landmarkPositions[10];
  uniform vec4 landmarkInfluences[10];
  uniform int landmarkCount;
  
  varying vec3 vNormal;
  varying vec3 vPosition;
  
  // Simplex noise functions
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
  
  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    
    // First corner
    vec3 i  = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    
    // Other corners
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    
    // Permutations
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
            
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    float n_ = 0.142857142857; // 1.0/7.0
    vec3 ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;
    
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    
    // Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }
  
  // FBM (Fractal Brownian Motion) for more complex noise
  float fbm(vec3 p, int octaves) {
    float value = 0.0;
    float amplitude = 0.5;
    float frequency = 1.0;
    
    for (int i = 0; i < 8; i++) {
      if (i >= octaves) break;
      value += amplitude * snoise(p * frequency);
      amplitude *= 0.5;
      frequency *= 2.0;
    }
    
    return value;
  }
  
  // Update the calculateTerrainHeight function to be more conservative with landmark influences
  // Calculate terrain height with landmarks influence
  float calculateTerrainHeight(vec3 position) {
    // Base terrain noise
    float noise1 = fbm(position * 2.0 + vec3(time * 0.01, 0.0, 0.0), 4) * surfaceRoughness;
    float noise2 = fbm(position * 5.0 + vec3(0.0, time * 0.01, 0.0), 2) * surfaceRoughness * 0.5;
    float baseHeight = noise1 + noise2;
    
    // Apply landmarks influence
    for (int i = 0; i < 10; i++) {
      if (i >= landmarkCount) break;
      
      vec3 landmarkPos = landmarkPositions[i];
      float radius = landmarkInfluences[i].x;
      float strength = landmarkInfluences[i].y;
      float roughness = landmarkInfluences[i].z;
      float type = landmarkInfluences[i].w;
      
      // Calculate distance to landmark
      float dotProduct = dot(normalize(position), landmarkPos);
      float angularDistance = acos(clamp(dotProduct, -1.0, 1.0));
      
      // Apply influence based on distance - use a smoother falloff
      if (angularDistance < radius) {
        // Use a smoother falloff curve to prevent sharp edges
        float falloff = smoothstep(radius, 0.0, angularDistance);
        float influence = strength * falloff * 0.5; // Reduce overall influence by half
        
        // Different effects based on landmark type - with more conservative values
        if (type < 0.5) {
          // Crater
          baseHeight -= influence * 0.3;
        } else if (type < 1.5) {
          // Mountain
          baseHeight += influence * 0.4;
        } else if (type < 2.5) {
          // Valley
          baseHeight -= influence * 0.3;
        } else if (type < 3.5) {
          // Volcano
          baseHeight += influence * 0.5;
        } else if (type < 4.5) {
          // Glacier
          baseHeight += influence * 0.2;
        } else if (type < 5.5) {
          // Basin
          baseHeight -= influence * 0.2;
        } else {
          // Custom
          baseHeight += influence * 0.3;
        }
        
        // Add some extra noise for roughness - with reduced intensity
        if (roughness > 0.0) {
          float detailNoise = fbm(position * 10.0 * roughness, 3) * roughness * influence * 0.5;
          baseHeight += detailNoise;
        }
      }
    }
    
    return baseHeight;
  }
  
  // Get color based on height and terrain type
  vec3 getTerrainColor(float height) {
    // For gas giants, use a different coloring approach
    if (isGaseous > 0.5) {
      float bands = snoise(vec3(vPosition.x * 0.5, vPosition.y * 5.0, vPosition.z * 0.5) + time * 0.01);
      float spots = snoise(vec3(vPosition.x * 2.0, vPosition.y * 2.0, vPosition.z * 2.0));
      
      // Mix colors based on bands and spots
      vec3 bandColor1 = mix(landColor, mountainColor, smoothstep(-0.2, 0.2, bands));
      vec3 bandColor2 = mix(oceanColor, beachColor, smoothstep(-0.3, 0.3, spots));
      
      return mix(bandColor1, bandColor2, smoothstep(0.1, 0.4, abs(bands)));
    }
    
    // For rocky/terrestrial planets
    if (height < waterLevel && liquidEnabled > 0.5) {
      // Water depth effect
      float depth = (waterLevel - height) * 5.0;
      return mix(beachColor, oceanColor, clamp(depth, 0.0, 1.0));
    } else if (height < waterLevel + 0.05) {
      // Beach/shore
      return beachColor;
    } else if (height < waterLevel + 0.3) {
      // Regular land
      return landColor;
    } else {
      // Mountains
      float mountainFactor = smoothstep(waterLevel + 0.3, waterLevel + 0.3 + mountainHeight, height);
      return mix(landColor, mountainColor, mountainFactor);
    }
  }
  
  // Apply soil texture effects
  vec3 applySoilTexture(vec3 baseColor, vec3 position, float height) {
    // Different texture patterns based on soil type
    float textureNoise = 0.0;
    
    // Soil texture variations
    if (soilTexture == 0) {
      // Smooth
      textureNoise = snoise(position * 20.0) * 0.05;
    } else if (soilTexture == 1) {
      // Rough
      textureNoise = fbm(position * 30.0, 4) * 0.15;
    } else if (soilTexture == 2) {
      // Cracked
      float crack = smoothstep(0.4, 0.5, fbm(position * 15.0, 3));
      textureNoise = crack * 0.2;
    } else if (soilTexture == 3) {
      // Layered
      textureNoise = smoothstep(0.2, 0.3, sin(height * 30.0)) * 0.1;
    } else if (soilTexture == 4) {
      // Porous
      float pores = smoothstep(0.6, 0.8, snoise(position * 40.0));
      textureNoise = pores * 0.15;
    } else if (soilTexture == 5) {
      // Grainy
      textureNoise = snoise(position * 50.0) * 0.1;
    } else if (soilTexture == 6) {
      // Crystalline
      float crystal = smoothstep(0.7, 0.9, fbm(position * 25.0, 2));
      textureNoise = crystal * 0.25;
    }
    
    // Apply texture effect to color
    return baseColor * (1.0 - textureNoise);
  }
  
  // Main shader function
  void main() {
    // Calculate terrain height
    float height = calculateTerrainHeight(vPosition);
    
    // Get base color based on height
    vec3 color = getTerrainColor(height);
    
    // Apply soil texture effects
    color = applySoilTexture(color, vPosition, height);
    
    // Apply lighting
    vec3 lightDir = normalize(vec3(1.0, 1.0, 1.0));
    float diffuse = max(dot(vNormal, lightDir), 0.0);
    
    // Add ambient light
    float ambient = 0.3;
    float lighting = ambient + diffuse * 0.7;
    
    // Apply atmospheric scattering for terrestrial planets
    if (isGaseous < 0.5) {
      float atmosphericEffect = 1.0 - pow(max(0.0, dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
      vec3 atmosphereColor = vec3(0.6, 0.8, 1.0);
      color = mix(color, atmosphereColor, atmosphericEffect * 0.2);
    }
    
    // Final color with lighting
    gl_FragColor = vec4(color * lighting, 1.0);
  }
`;function Ic({planetStats:e}){const t=_.useRef(null),r=_.useRef(null),n=_.useMemo(()=>{console.log("Creating new shader material with planet stats:",e);const s=e.customColors||ft(e.biome||"Rocky Highlands"),a=new k.ShaderMaterial({uniforms:{time:{value:0},oceanColor:{value:new k.Color(s.oceanFloor||"#1E4D6B")},beachColor:{value:new k.Color(s.beach||"#8D6E63")},landColor:{value:new k.Color(s.regular||"#A1887F")},mountainColor:{value:new k.Color(s.mountain||"#D7CCC8")},waterLevel:{value:e.waterLevel||.65},surfaceRoughness:{value:e.surfaceRoughness||.5},mountainHeight:{value:e.mountainHeight||.6},isGaseous:{value:e.mass>7||e.radius>2.5?1:0},soilType:{value:["rocky","sandy","volcanic","organic","dusty","frozen","muddy"].indexOf(e.soilType||"rocky")},soilTexture:{value:["smooth","rough","cracked","layered","porous","grainy","crystalline"].indexOf(e.soilTexture||"rough")},liquidEnabled:{value:e.liquidEnabled!==!1?1:0},landmarkPositions:{value:new Float32Array(30)},landmarkInfluences:{value:new Float32Array(40)},landmarkCount:{value:0}},vertexShader:_c,fragmentShader:Pc});return r.current=a,a},[]);return _.useEffect(()=>{if(!r.current)return;console.log("Updating shader uniforms with planet stats:",e);const s=e.customColors||ft(e.biome||"Rocky Highlands");r.current.uniforms.oceanColor.value=new k.Color(s.oceanFloor||"#1E4D6B"),r.current.uniforms.beachColor.value=new k.Color(s.beach||"#8D6E63"),r.current.uniforms.landColor.value=new k.Color(s.regular||"#A1887F"),r.current.uniforms.mountainColor.value=new k.Color(s.mountain||"#D7CCC8"),r.current.uniforms.waterLevel.value=e.waterLevel||.65,r.current.uniforms.surfaceRoughness.value=e.surfaceRoughness||.5,r.current.uniforms.mountainHeight.value=e.mountainHeight||.6,r.current.uniforms.isGaseous.value=e.mass>7||e.radius>2.5?1:0,r.current.uniforms.soilType.value=["rocky","sandy","volcanic","organic","dusty","frozen","muddy"].indexOf(e.soilType||"rocky"),r.current.uniforms.soilTexture.value=["smooth","rough","cracked","layered","porous","grainy","crystalline"].indexOf(e.soilTexture||"rough"),r.current.uniforms.liquidEnabled.value=e.liquidEnabled!==!1?1:0},[e]),_.useEffect(()=>{if(r.current)try{if(console.log("Processing landmarks:",e.landmarks),!e.landmarks||!Array.isArray(e.landmarks)||e.landmarks.length===0){r.current.uniforms.landmarkCount.value=0;return}const s=e.landmarks.slice(0,10),a=[],i=[];for(let c=0;c<s.length;c++){const l=s[c];if(!l||!l.coordinates){console.warn("Invalid landmark found:",l);continue}const u=typeof l.coordinates.x=="number"?l.coordinates.x:0,m=typeof l.coordinates.y=="number"?l.coordinates.y:0,f=typeof l.coordinates.z=="number"?l.coordinates.z:0,d=new k.Vector3(u,m,f).normalize();a.push(d.x,d.y,d.z);let v=1;switch(l.influence_type){case"crater":v=0;break;case"mountain":v=1;break;case"valley":v=2;break;case"volcano":v=3;break;case"glacier":v=4;break;case"basin":v=5;break;default:v=6}i.push(typeof l.influence_radius=="number"?Math.min(l.influence_radius,.5):.3,typeof l.influence_strength=="number"?Math.min(l.influence_strength,.7):.4,typeof l.influence_roughness=="number"?Math.min(l.influence_roughness,.5):.3,v)}console.log("Landmark positions:",a),console.log("Landmark influences:",i),r.current.uniforms.landmarkPositions.value=new Float32Array(a),r.current.uniforms.landmarkInfluences.value=new Float32Array(i),r.current.uniforms.landmarkCount.value=a.length/3}catch(s){console.error("Error processing landmarks:",s),r.current&&(r.current.uniforms.landmarkCount.value=0)}},[e.landmarks]),Me.useFrame(s=>{t.current&&r.current&&(t.current.rotation.y+=.001,r.current.uniforms.time.value=s.clock.elapsedTime)}),o.jsx(pe.Sphere,{ref:t,args:[1,128,128],scale:e.radius,children:o.jsx("primitive",{object:n,attach:"material"})})}function Dc({planetStats:e}){const t=_.useRef(null),r=_.useMemo(()=>e.mass<=7&&e.radius<=2.5&&!!e.cloudCount,[e]),n=_.useMemo(()=>Math.min(e.cloudCount||0,50),[e.cloudCount]);Me.useFrame(()=>{t.current&&(t.current.rotation.y+=5e-4)});const s=_.useMemo(()=>ft(e.biome||"Rocky Highlands").cloud||"#FFFFFF",[e.biome]);return r?o.jsx("group",{ref:t,children:Array.from({length:n}).map((a,i)=>{const c=Oc(e.radius*1.03),l=.05+Math.random()*.2,u=.6+Math.random()*.4;return o.jsxs("mesh",{position:[c.x,c.y,c.z],children:[o.jsx("sphereGeometry",{args:[l,8,8]}),o.jsx("meshBasicMaterial",{color:s,transparent:!0,opacity:u,depthWrite:!1})]},i)})}):null}function Oc(e){const t=Math.random(),r=Math.random(),n=2*Math.PI*t,s=Math.acos(2*r-1),a=e*Math.sin(s)*Math.cos(n),i=e*Math.sin(s)*Math.sin(n),c=e*Math.cos(s);return new k.Vector3(a,i,c)}const fe=new Uint8Array(512),lo=new Uint8Array(256);function Fc(){for(let e=0;e<256;e++)lo[e]=Math.floor(Math.random()*256);for(let e=0;e<512;e++)fe[e]=lo[e&255]}Fc();function Lr(e){return e*e*e*(e*(e*6-15)+10)}function tt(e,t,r){return(1-r)*e+r*t}function $e(e,t,r,n){const s=e&15,a=s<8?t:r,i=s<4?r:s===12||s===14?t:n;return((s&1)===0?a:-a)+((s&2)===0?i:-i)}function ne(e,t,r){const n=Math.floor(e)&255,s=Math.floor(t)&255,a=Math.floor(r)&255;e-=Math.floor(e),t-=Math.floor(t),r-=Math.floor(r);const i=Lr(e),c=Lr(t),l=Lr(r),u=fe[n]+s,m=fe[u]+a,f=fe[u+1]+a,d=fe[n+1]+s,v=fe[d]+a,b=fe[d+1]+a;return tt(tt(tt($e(fe[m],e,t,r),$e(fe[v],e-1,t,r),i),tt($e(fe[f],e,t-1,r),$e(fe[b],e-1,t-1,r),i),c),tt(tt($e(fe[m+1],e,t,r-1),$e(fe[v+1],e-1,t,r-1),i),tt($e(fe[f+1],e,t-1,r-1),$e(fe[b+1],e-1,t-1,r-1),i),c),l)}function Lc(e,t){const r=new Map,n=12,a=new k.IcosahedronGeometry(1,n).getAttribute("position");for(let i=0;i<a.count;i++){const c=a.getX(i),l=a.getY(i),u=a.getZ(i),m=new k.Vector3(c,l,u).normalize();let f=0;if(t==="terrestrial"){const v=(e.surfaceRoughness||.5)*1.2;let b=1,p=1,g=.5;for(let w=0;w<7;w++){const C=ne(m.x*b*v,m.y*b*v,m.z*b*v);f+=C*p,p*=g,b*=2}f*=e.mountainHeight||.5,e.terrainErosion&&(f*=1-e.terrainErosion*.3);const x=m.clone().multiplyScalar(e.radius),y=co(x,e.landmarks,e.radius);if(f+=y.height,y.roughness>0){const w=ne(m.x*20*y.roughness,m.y*20*y.roughness,m.z*20*y.roughness)*y.roughness*.2;f+=w}}else{const v=e.surfaceRoughness||.5;if(f=ne(m.x*2*v,m.y*2*v,m.z*2*v)*.1,e.landmarks&&e.landmarks.length>0){const b=m.clone().multiplyScalar(e.radius),p=co(b,e.landmarks,e.radius);f+=p.height*.5}}const d=`${m.x.toFixed(5)},${m.y.toFixed(5)},${m.z.toFixed(5)}`;r.set(d,f)}return{getHeight:i=>{const c=`${i.x.toFixed(5)},${i.y.toFixed(5)},${i.z.toFixed(5)}`,l=r.get(c);if(l!==void 0)return l;let u=Number.POSITIVE_INFINITY,m=0;return r.forEach((f,d)=>{const[v,b,p]=d.split(",").map(Number.parseFloat),g=new k.Vector3(v,b,p),x=i.distanceTo(g);x<u&&(u=x,m=f)}),m}}}const zc=_.forwardRef(function({planetStats:t},r){const n=et(t.mass,t.radius),s=_.useMemo(()=>{const l=t.customColors||ft(t.biome||"Rocky Highlands");return t.soilType&&n==="terrestrial"?{oceanFloor:Yt(l.oceanFloor||"#5D4037",t.soilType),beach:Yt(l.beach||"#8D6E63",t.soilType),regular:Yt(l.regular||"#A1887F",t.soilType),mountain:Yt(l.mountain||"#D7CCC8",t.soilType)}:l},[t.biome,t.customColors,t.soilType,n]),a=_.useMemo(()=>Lc(t,n),[t,n]),{surfaceGeometry:i,surfaceMaterial:c}=_.useMemo(()=>{const l=new k.IcosahedronGeometry(t.radius,11),u=l.getAttribute("position"),m=[],f=[],d=[],v=Mc(t.soilTexture||"rough");for(let g=0;g<u.count;g++){const x=u.getX(g),y=u.getY(g),w=u.getZ(g),C=new k.Vector3(x,y,w),j=C.clone().normalize();let R=a.getHeight(j);const T=.5+Math.atan2(j.z,j.x)/(2*Math.PI),S=.5-Math.asin(j.y)/Math.PI;d.push(T,S),t.landmarks&&t.landmarks.length>0&&t.landmarks.forEach(I=>{Ac(j,I,t.radius)});const F=n==="terrestrial"?.08:.05,P=t.surfaceRoughness||.5,N=R*F*P*1.5;let A=0;if(n==="terrestrial"&&N>.05){const{scale:I,depth:G,pattern:M}=v;switch(M){case"cracks":A=Bc(j,I,G);break;case"layers":A=Vc(j,I,G);break;case"crystals":A=$c(j,I,G);break;case"pores":A=Hc(j,I,G);break;case"grains":A=Uc(j,I,G);break;default:A=Gc(j,I,G,v.irregularity)}t.soilType==="volcanic"?A*=1.5:t.soilType==="sandy"&&(A*=.7)}C.add(j.clone().multiplyScalar(N-A)),m.push(C);const O=t.waterLevel||0,z=Tc(N,O),H=Wc(z,s,t,j,v);f.push(H)}for(let g=0;g<u.count;g++){const x=m[g];u.setXYZ(g,x.x,x.y,x.z)}u.needsUpdate=!0,l.computeVertexNormals();const b=new k.Float32BufferAttribute(new Float32Array(u.count*3),3);for(let g=0;g<f.length;g++)b.setXYZ(g,f[g].r,f[g].g,f[g].b);l.setAttribute("color",b),l.setAttribute("uv",new k.Float32BufferAttribute(new Float32Array(d),2));let p;return n==="terrestrial"?p=new k.MeshStandardMaterial({vertexColors:!0,roughness:.7,metalness:.1,flatShading:!1}):p=Kc(t),{surfaceGeometry:l,surfaceMaterial:p}},[t,n,s,a]);return o.jsx("mesh",{ref:r,geometry:i,material:c})});function Bc(e,t,r){const n=ne(e.x*t*2,e.y*t*2,e.z*t*2),s=ne(e.x*t*5,e.y*t*5,e.z*t*5);return(Math.abs(n)<.1?r*1.5:0)+(Math.abs(s)<.05?r*.8:0)}function Vc(e,t,r){const n=ne(e.x*t*.5,e.y*t*.5,e.z*t*.5);return Math.sin(n*20)*r*.8}function $c(e,t,r){const n=ne(e.x*t*3,e.y*t*3,e.z*t*3);return n>.7||n<-.7?r*1.2:0}function Hc(e,t,r){return ne(e.x*t*4,e.y*t*4,e.z*t*4)>.8?r*1.5:0}function Uc(e,t,r){const n=ne(e.x*t*8,e.y*t*8,e.z*t*8),s=ne(e.x*t*12,e.y*t*12,e.z*t*12);return n*s*r}function Gc(e,t,r,n){return ne(e.x*t,e.y*t,e.z*t)*r*n}function Wc(e,t,r,n,s){const a={[Te.OceanFloor]:t.oceanFloor,[Te.Beach]:t.beach,[Te.Regular]:t.regular,[Te.Mountain]:t.mountain},i=new k.Color(a[e]||t.regular);let c=i;if(r.soilType){const u={rocky:new k.Color(11770240),sandy:new k.Color(13808780),volcanic:new k.Color(3815994),organic:new k.Color(5082199),dusty:new k.Color(10506797),frozen:new k.Color(14745599),muddy:new k.Color(6373670)},m=u[r.soilType]||u.rocky,f={[Te.OceanFloor]:.3,[Te.Beach]:.6,[Te.Regular]:.7,[Te.Mountain]:.8};if(c=i.clone().lerp(m,f[e]||.5),e===Te.Mountain&&(ne(n.x*50,n.y*50,n.z*50)*.1<0?c.multiplyScalar(.9):c.multiplyScalar(1.1),r.soilTexture)){const v=ne(n.x*s.scale*2,n.y*s.scale*2,n.z*s.scale*2);r.soilTexture==="crystalline"&&v>.7?c.offsetHSL(0,0,.1):r.soilTexture==="cracked"&&Math.abs(v)<.05?c.multiplyScalar(.8):r.soilTexture==="layered"&&Math.sin(v*20)>.8&&c.offsetHSL(0,0,.05)}}const l=(Math.random()-.5)*.1;return c.r=Math.max(0,Math.min(1,c.r+l)),c.g=Math.max(0,Math.min(1,c.g+l)),c.b=Math.max(0,Math.min(1,c.b+l)),c}function Kc(e){const t=`
    varying vec2 vUv;
    varying vec3 vNormal;
    void main() {
      vUv = uv;
      vNormal = normalize(normalMatrix * normal);
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,r=`
    uniform vec3 color1;
    uniform vec3 color2;
    uniform vec3 color3;
    uniform float roughness;
    varying vec2 vUv;
    varying vec3 vNormal;
    float noise(vec2 st) {
      return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
    }
    void main() {
      float bands = sin(vUv.y * 20.0) * 0.5 + 0.5;
      vec3 color = mix(color1, color2, bands);
      color = mix(color, color3, smoothstep(0.4, 0.6, abs(vNormal.y)));
      float noiseValue = noise(vUv * roughness * 10.0);
      color = mix(color, vec3(noiseValue), roughness * 0.2);
      gl_FragColor = vec4(color, 1.0);
    }
  `;let n,s,a;return e.temperature<100?(n=new k.Color(4620980),s=new k.Color(2003199),a=new k.Color(49151)):e.temperature>300?(n=new k.Color(13458524),s=new k.Color(15761536),a=new k.Color(16416882)):(n=new k.Color(10145074),s=new k.Color(7048739),a=new k.Color(5597999)),new k.ShaderMaterial({uniforms:{color1:{value:n},color2:{value:s},color3:{value:a},roughness:{value:e.surfaceRoughness||.5}},vertexShader:t,fragmentShader:r})}const qc=_.forwardRef(function({planetStats:t},r){const n=so(t.temperature),s=ao(t.temperature,t.liquidType||n.type),{liquidGeometry:a,liquidMaterial:i}=_.useMemo(()=>{const c=t.liquidEnabled!==!1&&(t.waterLevel||0)>0&&s,l={water:new k.Color(1996980),methane:new k.Color(8369109),nitrogen:new k.Color(9498256),ammonia:new k.Color(14204888),ethane:new k.Color(16766720)},u=l[t.liquidType]||l.water;t.liquidType==="water"&&(t.temperature<283?u.lerp(new k.Color(18347),.3):t.temperature>350&&u.lerp(new k.Color(25600),.2),t.salinity&&u.lerp(new k.Color(18347),t.salinity*.5));const m=new k.MeshPhysicalMaterial({color:u,transparent:!0,opacity:c?.8:0,roughness:.1,metalness:.2,envMapIntensity:.5,clearcoat:.5,clearcoatRoughness:.1,ior:1.4,transmission:.95}),f=c?Math.max(t.waterLevel||0,.5):t.waterLevel||0,d=t.radius*(1+f*.02),v=new k.IcosahedronGeometry(d,9),b=v.getAttribute("position");for(let p=0;p<b.count;p++){const g=b.getX(p),x=b.getY(p),y=b.getZ(p),w=new k.Vector3(g,x,y),C=w.clone().normalize(),j=ne(C.x*10,C.y*10,C.z*10)*.005;w.add(C.clone().multiplyScalar(j)),b.setXYZ(p,w.x,w.y,w.z)}return b.needsUpdate=!0,v.computeVertexNormals(),{liquidGeometry:v,liquidMaterial:m}},[t,s]);return!a||!i?null:o.jsx("mesh",{ref:r,geometry:a,material:i})}),Yc=_.forwardRef(function({planetStats:t},r){const n=et(t.mass,t.radius),{atmosphereGeometry:s,atmosphereMaterial:a}=_.useMemo(()=>{const i=new k.IcosahedronGeometry(t.radius*1.1,9);let c;if(n==="terrestrial"){const l={water:new k.Color(8900331),co2:new k.Color(13882323),methane:new k.Color(10145074),snow:new k.Color(15792383),none:new k.Color(11393254)},u=l[t.precipitationCompound]||l.none;t.temperature<200?u.lerp(new k.Color(4620980),.3):t.temperature>350&&u.lerp(new k.Color(16752762),.3);const m=t.atmosphereStrength?t.atmosphereStrength*.4:.25;c=new k.MeshPhongMaterial({color:u,transparent:!0,opacity:m,side:k.DoubleSide,shininess:30,depthWrite:!1})}else c=new k.MeshPhongMaterial({color:16777215,transparent:!0,opacity:.15,side:k.DoubleSide,depthWrite:!1});return{atmosphereGeometry:i,atmosphereMaterial:c}},[t,n]);return o.jsx("mesh",{ref:r,geometry:s,material:a})}),Xc=_.forwardRef(function({planetStats:t},r){const n=_.useMemo(()=>{if(!t.cloudCount||t.cloudCount<=0)return[];const s=[],a=Math.min(t.cloudCount,100);for(let i=0;i<a;i++){const c=Math.random()*Math.PI*2,l=Math.random()*Math.PI,u=Math.sin(l)*Math.cos(c),m=Math.sin(l)*Math.sin(c),f=Math.cos(l),d=new k.Vector3(u,m,f).normalize(),v=.05+Math.random()*.15,b=`cloud-${i}`;s.push({key:b,position:d.multiplyScalar(t.radius*1.02),size:v})}return s},[t.cloudCount,t.radius]);return o.jsx("group",{ref:r,children:n.map(s=>o.jsxs("mesh",{position:[s.position.x,s.position.y,s.position.z],children:[o.jsx("planeGeometry",{args:[s.size,s.size]}),o.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.6,side:k.DoubleSide}),o.jsx("group",{rotation:[0,Math.PI,0]})]},s.key))})}),Zc=["building","tower","dome","pyramid","antenna","platform","bridge","monument","sphere","cylinder","cube","ring","dish","custom"];function zr(e){return{building:"Building",tower:"Tower",dome:"Dome",pyramid:"Pyramid",antenna:"Antenna",platform:"Platform",bridge:"Bridge",monument:"Monument",sphere:"Sphere",cylinder:"Cylinder",cube:"Cube",ring:"Ring",dish:"Satellite Dish",custom:"Custom Shape"}[e]||e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}function Jc(){return`STR-${Math.floor(Math.random()*900+100)}`}function Xt(e){const t={id:Jc(),type:e,name:zr(e),scale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},color:"#ffffff",roughness:.5,metalness:.2};switch(e){case"building":return{...t,scale:{x:.05,y:.1,z:.05},color:"#a0a0a0"};case"tower":return{...t,scale:{x:.03,y:.15,z:.03},color:"#707070"};case"dome":return{...t,scale:{x:.08,y:.04,z:.08},color:"#a0c0e0",metalness:.3,roughness:.2};case"pyramid":return{...t,scale:{x:.08,y:.06,z:.08},color:"#d0c090"};case"antenna":return{...t,scale:{x:.01,y:.2,z:.01},color:"#c0c0c0",metalness:.7,roughness:.3};case"platform":return{...t,scale:{x:.1,y:.01,z:.1},color:"#808080"};case"bridge":return{...t,scale:{x:.1,y:.02,z:.03},color:"#909090"};case"monument":return{...t,scale:{x:.04,y:.12,z:.04},color:"#e0e0e0"};case"sphere":return{...t,scale:{x:.05,y:.05,z:.05},color:"#e0e0e0",metalness:.5,roughness:.2};case"cylinder":return{...t,scale:{x:.04,y:.08,z:.04},color:"#b0b0b0"};case"cube":return{...t,scale:{x:.05,y:.05,z:.05},color:"#c0c0c0"};case"ring":return{...t,scale:{x:.08,y:.01,z:.08},color:"#d0d0d0",metalness:.6};case"dish":return{...t,scale:{x:.06,y:.02,z:.06},color:"#e0e0e0",metalness:.7,roughness:.2};default:return t}}function uo(e){switch(e){case"building":return new k.BoxGeometry(1,1,1);case"tower":return new k.CylinderGeometry(.5,.7,1,8);case"dome":return new k.SphereGeometry(.5,16,16,0,Math.PI*2,0,Math.PI/2);case"pyramid":return new k.ConeGeometry(.7,1,4);case"antenna":return new k.CylinderGeometry(.1,.2,1,8);case"platform":return new k.BoxGeometry(1,.1,1);case"bridge":return new k.BoxGeometry(1,.2,.3);case"monument":return new k.CylinderGeometry(.3,.5,1,8);case"sphere":return new k.SphereGeometry(.5,16,16);case"cylinder":return new k.CylinderGeometry(.5,.5,1,16);case"cube":return new k.BoxGeometry(1,1,1);case"ring":return new k.TorusGeometry(.5,.1,8,24);case"dish":return new k.SphereGeometry(.5,16,16,0,Math.PI*2,0,Math.PI/2);default:return new k.BoxGeometry(1,1,1)}}function fo(e){const t=new k.MeshStandardMaterial({color:new k.Color(e.color||"#ffffff"),roughness:e.roughness!==void 0?e.roughness:.5,metalness:e.metalness!==void 0?e.metalness:.2,transparent:e.opacity!==void 0&&e.opacity<1,opacity:e.opacity!==void 0?e.opacity:1,wireframe:e.wireframe||!1});return e.emissive&&e.emissiveIntensity&&(t.emissive=new k.Color(e.emissive),t.emissiveIntensity=e.emissiveIntensity),t}function Qc({structure:e,landmarkPosition:t,planetRadius:r}){const n=_.useRef(null),{geometry:s,material:a,position:i,quaternion:c,scale:l}=_.useMemo(()=>{const u=uo(e.type),m=fo(e),f=t.clone().normalize(),d=new k.Vector3(0,1,0),v=new k.Quaternion().setFromUnitVectors(d,f),b=new k.Matrix4().makeRotationFromQuaternion(v),p=new k.Vector3(e.position.x,e.position.y+e.scale.y*.5,e.position.z);p.applyMatrix4(b);const g=p.clone().multiplyScalar(.05*r),x=t.clone().add(g),y=new k.Euler(e.rotation.x*Math.PI,e.rotation.y*Math.PI,e.rotation.z*Math.PI),w=new k.Quaternion().setFromEuler(new k.Euler().copy(y));v.multiply(w);const C=new k.Vector3(e.scale.x*r*.05,e.scale.y*r*.05,e.scale.z*r*.05);return{geometry:u,material:m,position:x,quaternion:v,scale:C}},[e,t,r]);return o.jsx("mesh",{ref:n,geometry:s,material:a,position:[i.x,i.y,i.z],scale:[l.x,l.y,l.z],quaternion:c})}function el({landmarks:e,planetStats:t,planetRadius:r,rotation:n}){const s=_.useMemo(()=>e.map(a=>{const i=(90-a.latitude)*(Math.PI/180),c=(a.longitude+180)*(Math.PI/180),l=-r*Math.sin(i)*Math.cos(c),u=r*Math.sin(i)*Math.sin(c),m=r*Math.cos(i);return new k.Vector3(l,m,u)}),[e,r]);return o.jsx("group",{rotation:[0,n,0],children:e.map((a,i)=>{if(!a.structures||a.structures.length===0)return null;const c=s[i];return o.jsx("group",{position:[0,0,0],children:a.structures.map(l=>o.jsx(Qc,{structure:l,landmarkPosition:c,planetRadius:r},l.id))},a.id)})})}function tl({planetStats:e}){const t=et(e.mass,e.radius),[r,n]=_.useState(null),{raycaster:s,camera:a,gl:i}=Me.useThree(),c={surface:_.useRef(null),atmosphere:_.useRef(null),liquid:_.useRef(null),clouds:_.useRef(null),group:_.useRef(null)},l=u=>{if(u.stopPropagation(),!c.surface.current)return;const m=new k.Vector2(u.clientX/i.domElement.clientWidth*2-1,-(u.clientY/i.domElement.clientHeight)*2+1);s.setFromCamera(m,a);const f=s.intersectObject(c.surface.current);if(f.length>0){const d=f[0].point,v=d.clone().normalize(),b=d.length()-e.radius;let p="Mountain";b<-.05?p="Ocean Floor":b<0?p="Beach":b<.05&&(p="Lowland");const g=e.temperature,x=b*10,y=g-x,C=y-273;n({position:d,normalizedPosition:v,height:b,terrainType:p,temperature:y,relativeToWaterTemp:C})}};return Me.useFrame(()=>{c.surface.current&&(c.surface.current.rotation.y+=.001),c.atmosphere.current&&(c.atmosphere.current.rotation.y+=5e-4),c.liquid.current&&(c.liquid.current.rotation.y+=8e-4),c.clouds.current&&(c.clouds.current.rotation.y+=.0012)}),o.jsxs(o.Fragment,{children:[o.jsxs("group",{ref:c.group,onClick:l,children:[o.jsx(zc,{planetStats:e,ref:c.surface}),t==="terrestrial"&&o.jsx(qc,{planetStats:e,ref:c.liquid}),o.jsx(Yc,{planetStats:e,ref:c.atmosphere}),t==="terrestrial"&&e.cloudCount&&e.cloudCount>0&&o.jsx(Xc,{planetStats:e,ref:c.clouds}),e.landmarks&&e.landmarks.length>0&&o.jsx(el,{planetStats:e,landmarks:[],planetRadius:0,rotation:0})]}),r&&o.jsx(oo,{pointInfo:r,planetStats:e})]})}function U(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Fe(e,t=[]){let r=[];function n(a,i){const c=h.createContext(i),l=r.length;r=[...r,i];const u=f=>{var x;const{scope:d,children:v,...b}=f,p=((x=d==null?void 0:d[e])==null?void 0:x[l])||c,g=h.useMemo(()=>b,Object.values(b));return o.jsx(p.Provider,{value:g,children:v})};u.displayName=a+"Provider";function m(f,d){var p;const v=((p=d==null?void 0:d[e])==null?void 0:p[l])||c,b=h.useContext(v);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,m]}const s=()=>{const a=r.map(i=>h.createContext(i));return function(c){const l=(c==null?void 0:c[e])||a;return h.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,rl(s,...t)]}function rl(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((c,{useScope:l,scopeName:u})=>{const f=l(a)[`__scope${u}`];return{...c,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function mo(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Br(...e){return t=>{let r=!1;const n=e.map(s=>{const a=mo(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():mo(e[s],null)}}}}function oe(...e){return h.useCallback(Br(...e),e)}function mt(e){const t=ol(e),r=h.forwardRef((n,s)=>{const{children:a,...i}=n,c=h.Children.toArray(a),l=c.find(al);if(l){const u=l.props.children,m=c.map(f=>f===l?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var nl=mt("Slot");function ol(e){const t=h.forwardRef((r,n)=>{const{children:s,...a}=r,i=h.isValidElement(s)?cl(s):void 0,c=oe(i,n);if(h.isValidElement(s)){const l=il(a,s.props);return s.type!==h.Fragment&&(l.ref=c),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sl=Symbol("radix.slottable");function al(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sl}function il(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...c)=>{const l=a(...c);return s(...c),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function cl(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Zt(e){const t=e+"CollectionProvider",[r,n]=Fe(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:g,children:x}=p,y=_.useRef(null),w=_.useRef(new Map).current;return o.jsx(s,{scope:g,itemMap:w,collectionRef:y,children:x})};i.displayName=t;const c=e+"CollectionSlot",l=mt(c),u=_.forwardRef((p,g)=>{const{scope:x,children:y}=p,w=a(c,x),C=oe(g,w.collectionRef);return o.jsx(l,{ref:C,children:y})});u.displayName=c;const m=e+"CollectionItemSlot",f="data-radix-collection-item",d=mt(m),v=_.forwardRef((p,g)=>{const{scope:x,children:y,...w}=p,C=_.useRef(null),j=oe(g,C),R=a(m,x);return _.useEffect(()=>(R.itemMap.set(C,{ref:C,...w}),()=>void R.itemMap.delete(C))),o.jsx(d,{[f]:"",ref:j,children:y})});v.displayName=m;function b(p){const g=a(e+"CollectionConsumer",p);return _.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((R,T)=>w.indexOf(R.ref.current)-w.indexOf(T.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:u,ItemSlot:v},b,n]}var de=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},ll=h[" useId ".trim().toString()]||(()=>{}),ul=0;function rt(e){const[t,r]=h.useState(ll());return de(()=>{r(n=>n??String(ul++))},[e]),t?`radix-${t}`:""}var dl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],X=dl.reduce((e,t)=>{const r=mt(`Primitive.${t}`),n=h.forwardRef((s,a)=>{const{asChild:i,...c}=s,l=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ho(e,t){e&&Wt.flushSync(()=>e.dispatchEvent(t))}function Ae(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var fl=h[" useInsertionEffect ".trim().toString()]||de;function nt({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,i]=ml({defaultProp:t,onChange:r}),c=e!==void 0,l=c?e:s;{const m=h.useRef(e!==void 0);h.useEffect(()=>{const f=m.current;f!==c&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,n])}const u=h.useCallback(m=>{var f;if(c){const d=hl(m)?m(e):m;d!==e&&((f=i.current)==null||f.call(i,d))}else a(m)},[c,e,a,i]);return[l,u]}function ml({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),s=h.useRef(r),a=h.useRef(t);return fl(()=>{a.current=t},[t]),h.useEffect(()=>{var i;s.current!==r&&((i=a.current)==null||i.call(a,r),s.current=r)},[r,s]),[r,n,a]}function hl(e){return typeof e=="function"}var pl=h.createContext(void 0);function At(e){const t=h.useContext(pl);return e||t||"ltr"}var Vr="rovingFocusGroup.onEntryFocus",gl={bubbles:!1,cancelable:!0},Rt="RovingFocusGroup",[$r,po,vl]=Zt(Rt),[xl,Jt]=Fe(Rt,[vl]),[yl,bl]=xl(Rt),go=h.forwardRef((e,t)=>o.jsx($r.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx($r.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(wl,{...e,ref:t})})}));go.displayName=Rt;var wl=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...f}=e,d=h.useRef(null),v=oe(t,d),b=At(a),[p,g]=nt({prop:i,defaultProp:c??null,onChange:l,caller:Rt}),[x,y]=h.useState(!1),w=Ae(u),C=po(r),j=h.useRef(!1),[R,T]=h.useState(0);return h.useEffect(()=>{const S=d.current;if(S)return S.addEventListener(Vr,w),()=>S.removeEventListener(Vr,w)},[w]),o.jsx(yl,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:p,onItemFocus:h.useCallback(S=>g(S),[g]),onItemShiftTab:h.useCallback(()=>y(!0),[]),onFocusableItemAdd:h.useCallback(()=>T(S=>S+1),[]),onFocusableItemRemove:h.useCallback(()=>T(S=>S-1),[]),children:o.jsx(X.div,{tabIndex:x||R===0?-1:0,"data-orientation":n,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:U(e.onMouseDown,()=>{j.current=!0}),onFocus:U(e.onFocus,S=>{const F=!j.current;if(S.target===S.currentTarget&&F&&!x){const P=new CustomEvent(Vr,gl);if(S.currentTarget.dispatchEvent(P),!P.defaultPrevented){const N=C().filter(I=>I.focusable),A=N.find(I=>I.active),O=N.find(I=>I.id===p),H=[A,O,...N].filter(Boolean).map(I=>I.ref.current);yo(H,m)}}j.current=!1}),onBlur:U(e.onBlur,()=>y(!1))})})}),vo="RovingFocusGroupItem",xo=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:i,...c}=e,l=rt(),u=a||l,m=bl(vo,r),f=m.currentTabStopId===u,d=po(r),{onFocusableItemAdd:v,onFocusableItemRemove:b,currentTabStopId:p}=m;return h.useEffect(()=>{if(n)return v(),()=>b()},[n,v,b]),o.jsx($r.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:o.jsx(X.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:U(e.onMouseDown,g=>{n?m.onItemFocus(u):g.preventDefault()}),onFocus:U(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:U(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){m.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=jl(g,m.orientation,m.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=d().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const C=w.indexOf(g.currentTarget);w=m.loop?kl(w,C+1):w.slice(C+1)}setTimeout(()=>yo(w))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:p!=null}):i})})});xo.displayName=vo;var Cl={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nl(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function jl(e,t,r){const n=Nl(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Cl[n]}function yo(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function kl(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var bo=go,wo=xo;function El(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var ht=e=>{const{present:t,children:r}=e,n=Sl(t),s=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),a=oe(n.ref,Ml(s));return typeof r=="function"||n.isPresent?h.cloneElement(s,{ref:a}):null};ht.displayName="Presence";function Sl(e){const[t,r]=h.useState(),n=h.useRef(null),s=h.useRef(e),a=h.useRef("none"),i=e?"mounted":"unmounted",[c,l]=El(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=Qt(n.current);a.current=c==="mounted"?u:"none"},[c]),de(()=>{const u=n.current,m=s.current;if(m!==e){const d=a.current,v=Qt(u);e?l("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(m&&d!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),de(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,f=v=>{const p=Qt(n.current).includes(v.animationName);if(v.target===t&&p&&(l("ANIMATION_END"),!s.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},d=v=>{v.target===t&&(a.current=Qt(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:h.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Qt(e){return(e==null?void 0:e.animationName)||"none"}function Ml(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var er="Tabs",[Tl,Kp]=Fe(er,[Jt]),Co=Jt(),[Al,Hr]=Tl(er),No=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:l="automatic",...u}=e,m=At(c),[f,d]=nt({prop:n,onChange:s,defaultProp:a??"",caller:er});return o.jsx(Al,{scope:r,baseId:rt(),value:f,onValueChange:d,orientation:i,dir:m,activationMode:l,children:o.jsx(X.div,{dir:m,"data-orientation":i,...u,ref:t})})});No.displayName=er;var jo="TabsList",ko=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=Hr(jo,r),i=Co(r);return o.jsx(bo,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:o.jsx(X.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});ko.displayName=jo;var Eo="TabsTrigger",So=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,i=Hr(Eo,r),c=Co(r),l=Ao(i.baseId,n),u=Ro(i.baseId,n),m=n===i.value;return o.jsx(wo,{asChild:!0,...c,focusable:!s,active:m,children:o.jsx(X.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:U(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(n):f.preventDefault()}),onKeyDown:U(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(n)}),onFocus:U(e.onFocus,()=>{const f=i.activationMode!=="manual";!m&&!s&&f&&i.onValueChange(n)})})})});So.displayName=Eo;var Mo="TabsContent",To=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...i}=e,c=Hr(Mo,r),l=Ao(c.baseId,n),u=Ro(c.baseId,n),m=n===c.value,f=h.useRef(m);return h.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),o.jsx(ht,{present:s||m,children:({present:d})=>o.jsx(X.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:d&&a})})});To.displayName=Mo;function Ao(e,t){return`${e}-trigger-${t}`}function Ro(e,t){return`${e}-content-${t}`}var Rl=No,_o=ko,Po=So,Io=To;function Do(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Do(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Oo(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Do(e))&&(n&&(n+=" "),n+=t);return n}const Ur="-",_l=e=>{const t=Il(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const c=i.split(Ur);return c[0]===""&&c.length!==1&&c.shift(),Fo(c,t)||Pl(i)},getConflictingClassGroupIds:(i,c)=>{const l=r[i]||[];return c&&n[i]?[...l,...n[i]]:l}}},Fo=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Fo(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Ur);return(i=t.validators.find(({validator:c})=>c(a)))==null?void 0:i.classGroupId},Lo=/^\[(.+)\]$/,Pl=e=>{if(Lo.test(e)){const t=Lo.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Il=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const s in r)Gr(r[s],n,s,t);return n},Gr=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:zo(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(Dl(s)){Gr(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{Gr(i,zo(t,a),r,n)})})},zo=(e,t)=>{let r=e;return t.split(Ur).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Dl=e=>e.isThemeGetter,Ol=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},Wr="!",Kr=":",Fl=Kr.length,Ll=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const a=[];let i=0,c=0,l=0,u;for(let b=0;b<s.length;b++){let p=s[b];if(i===0&&c===0){if(p===Kr){a.push(s.slice(l,b)),l=b+Fl;continue}if(p==="/"){u=b;continue}}p==="["?i++:p==="]"?i--:p==="("?c++:p===")"&&c--}const m=a.length===0?s:s.substring(l),f=zl(m),d=f!==m,v=u&&u>l?u-l:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:v}};if(t){const s=t+Kr,a=n;n=i=>i.startsWith(s)?a(i.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(r){const s=n;n=a=>r({className:a,parseClassName:s})}return n},zl=e=>e.endsWith(Wr)?e.substring(0,e.length-1):e.startsWith(Wr)?e.substring(1):e,Bl=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let a=[];return n.forEach(i=>{i[0]==="["||t[i]?(s.push(...a.sort(),i),a=[]):a.push(i)}),s.push(...a.sort()),s}},Vl=e=>({cache:Ol(e.cacheSize),parseClassName:Ll(e),sortModifiers:Bl(e),..._l(e)}),$l=/\s+/,Hl=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:a}=t,i=[],c=e.trim().split($l);let l="";for(let u=c.length-1;u>=0;u-=1){const m=c[u],{isExternal:f,modifiers:d,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:p}=r(m);if(f){l=m+(l.length>0?" "+l:l);continue}let g=!!p,x=n(g?b.substring(0,p):b);if(!x){if(!g){l=m+(l.length>0?" "+l:l);continue}if(x=n(b),!x){l=m+(l.length>0?" "+l:l);continue}g=!1}const y=a(d).join(":"),w=v?y+Wr:y,C=w+x;if(i.includes(C))continue;i.push(C);const j=s(x,g);for(let R=0;R<j.length;++R){const T=j[R];i.push(w+T)}l=m+(l.length>0?" "+l:l)}return l};function Ul(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Bo(t))&&(n&&(n+=" "),n+=r);return n}const Bo=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Bo(e[n]))&&(r&&(r+=" "),r+=t);return r};function Gl(e,...t){let r,n,s,a=i;function i(l){const u=t.reduce((m,f)=>f(m),e());return r=Vl(u),n=r.cache.get,s=r.cache.set,a=c,c(l)}function c(l){const u=n(l);if(u)return u;const m=Hl(l,r);return s(l,m),m}return function(){return a(Ul.apply(null,arguments))}}const ue=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Vo=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$o=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Wl=/^\d+\/\d+$/,Kl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ql=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pt=e=>Wl.test(e),Z=e=>!!e&&!Number.isNaN(Number(e)),He=e=>!!e&&Number.isInteger(Number(e)),qr=e=>e.endsWith("%")&&Z(e.slice(0,-1)),Le=e=>Kl.test(e),Jl=()=>!0,Ql=e=>ql.test(e)&&!Yl.test(e),Ho=()=>!1,eu=e=>Xl.test(e),tu=e=>Zl.test(e),ru=e=>!B(e)&&!V(e),nu=e=>gt(e,qo,Ho),B=e=>Vo.test(e),ot=e=>gt(e,Yo,Ql),Yr=e=>gt(e,cu,Z),Uo=e=>gt(e,Wo,Ho),ou=e=>gt(e,Ko,tu),tr=e=>gt(e,Xo,eu),V=e=>$o.test(e),_t=e=>vt(e,Yo),su=e=>vt(e,lu),Go=e=>vt(e,Wo),au=e=>vt(e,qo),iu=e=>vt(e,Ko),rr=e=>vt(e,Xo,!0),gt=(e,t,r)=>{const n=Vo.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},vt=(e,t,r=!1)=>{const n=$o.exec(e);return n?n[1]?t(n[1]):r:!1},Wo=e=>e==="position"||e==="percentage",Ko=e=>e==="image"||e==="url",qo=e=>e==="length"||e==="size"||e==="bg-size",Yo=e=>e==="length",cu=e=>e==="number",lu=e=>e==="family-name",Xo=e=>e==="shadow",uu=Gl(()=>{const e=ue("color"),t=ue("font"),r=ue("text"),n=ue("font-weight"),s=ue("tracking"),a=ue("leading"),i=ue("breakpoint"),c=ue("container"),l=ue("spacing"),u=ue("radius"),m=ue("shadow"),f=ue("inset-shadow"),d=ue("text-shadow"),v=ue("drop-shadow"),b=ue("blur"),p=ue("perspective"),g=ue("aspect"),x=ue("ease"),y=ue("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...C(),V,B],R=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],S=()=>[V,B,l],F=()=>[pt,"full","auto",...S()],P=()=>[He,"none","subgrid",V,B],N=()=>["auto",{span:["full",He,V,B]},He,V,B],A=()=>[He,"auto",V,B],O=()=>["auto","min","max","fr",V,B],z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...S()],G=()=>[pt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],M=()=>[e,V,B],D=()=>[...C(),Go,Uo,{position:[V,B]}],E=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",au,nu,{size:[V,B]}],q=()=>[qr,_t,ot],Y=()=>["","none","full",u,V,B],te=()=>["",Z,_t,ot],ae=()=>["solid","dashed","dotted","double"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>[Z,qr,Go,Uo],K=()=>["","none",b,V,B],J=()=>["none",Z,V,B],Q=()=>["none",Z,V,B],re=()=>[Z,V,B],se=()=>[pt,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Le],breakpoint:[Le],color:[Jl],container:[Le],"drop-shadow":[Le],ease:["in","out","in-out"],font:[ru],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Le],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Le],shadow:[Le],spacing:["px",Z],text:[Le],"text-shadow":[Le],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pt,B,V,g]}],container:["container"],columns:[{columns:[Z,B,V,c]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[He,"auto",V,B]}],basis:[{basis:[pt,"full","auto",c,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Z,pt,"auto","initial","none",B]}],grow:[{grow:["",Z,V,B]}],shrink:[{shrink:["",Z,V,B]}],order:[{order:[He,"first","last","none",V,B]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[c,"screen",...G()]}],"min-w":[{"min-w":[c,"screen","none",...G()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",r,_t,ot]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,V,Yr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qr,B]}],"font-family":[{font:[su,B,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,V,B]}],"line-clamp":[{"line-clamp":[Z,"none",V,Yr]}],leading:[{leading:[a,...S()]}],"list-image":[{"list-image":["none",V,B]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",V,B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Z,"from-font","auto",V,ot]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Z,"auto",V,B]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V,B]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V,B]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:D()}],"bg-repeat":[{bg:E()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},He,V,B],radial:["",V,B],conic:[He,V,B]},iu,ou]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Z,V,B]}],"outline-w":[{outline:["",Z,_t,ot]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",m,rr,tr]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",f,rr,tr]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Z,ot]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",d,rr,tr]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Z,V,B]}],"mix-blend":[{"mix-blend":[...le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Z]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[V,B]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Z]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:D()}],"mask-repeat":[{mask:E()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",V,B]}],filter:[{filter:["","none",V,B]}],blur:[{blur:K()}],brightness:[{brightness:[Z,V,B]}],contrast:[{contrast:[Z,V,B]}],"drop-shadow":[{"drop-shadow":["","none",v,rr,tr]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Z,V,B]}],"hue-rotate":[{"hue-rotate":[Z,V,B]}],invert:[{invert:["",Z,V,B]}],saturate:[{saturate:[Z,V,B]}],sepia:[{sepia:["",Z,V,B]}],"backdrop-filter":[{"backdrop-filter":["","none",V,B]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[Z,V,B]}],"backdrop-contrast":[{"backdrop-contrast":[Z,V,B]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Z,V,B]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Z,V,B]}],"backdrop-invert":[{"backdrop-invert":["",Z,V,B]}],"backdrop-opacity":[{"backdrop-opacity":[Z,V,B]}],"backdrop-saturate":[{"backdrop-saturate":[Z,V,B]}],"backdrop-sepia":[{"backdrop-sepia":["",Z,V,B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",V,B]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Z,"initial",V,B]}],ease:[{ease:["linear","initial",x,V,B]}],delay:[{delay:[Z,V,B]}],animate:[{animate:["none",y,V,B]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,V,B]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:J()}],"rotate-x":[{"rotate-x":J()}],"rotate-y":[{"rotate-y":J()}],"rotate-z":[{"rotate-z":J()}],scale:[{scale:Q()}],"scale-x":[{"scale-x":Q()}],"scale-y":[{"scale-y":Q()}],"scale-z":[{"scale-z":Q()}],"scale-3d":["scale-3d"],skew:[{skew:re()}],"skew-x":[{"skew-x":re()}],"skew-y":[{"skew-y":re()}],transform:[{transform:[V,B,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V,B]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V,B]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Z,_t,ot,Yr]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ee(...e){return uu(Oo(e))}const Zo=Rl,Xr=h.forwardRef(({className:e,...t},r)=>o.jsx(_o,{ref:r,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Xr.displayName=_o.displayName;const Ue=h.forwardRef(({className:e,...t},r)=>o.jsx(Po,{ref:r,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ue.displayName=Po.displayName;const Ge=h.forwardRef(({className:e,...t},r)=>o.jsx(Io,{ref:r,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ge.displayName=Io.displayName;const ge=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ge.displayName="Card";const ve=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("flex flex-col space-y-1.5 p-6",e),...t}));ve.displayName="CardHeader";const xe=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));xe.displayName="CardTitle";const du=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("text-sm text-muted-foreground",e),...t}));du.displayName="CardDescription";const ye=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("p-6 pt-0",e),...t}));ye.displayName="CardContent";const fu=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("flex items-center p-6 pt-0",e),...t}));fu.displayName="CardFooter";var mu="Label",Jo=h.forwardRef((e,t)=>o.jsx(X.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Jo.displayName=mu;var Qo=Jo;const es=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ts=Oo,Zr=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return ts(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const m=r==null?void 0:r[u],f=a==null?void 0:a[u];if(m===null)return null;const d=es(m)||es(f);return s[u][d]}),c=r&&Object.entries(r).reduce((u,m)=>{let[f,d]=m;return d===void 0||(u[f]=d),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:f,className:d,...v}=m;return Object.entries(v).every(b=>{let[p,g]=b;return Array.isArray(g)?g.includes({...a,...c}[p]):{...a,...c}[p]===g})?[...u,f,d]:u},[]);return ts(e,i,l,r==null?void 0:r.class,r==null?void 0:r.className)},hu=Zr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),W=h.forwardRef(({className:e,...t},r)=>o.jsx(Qo,{ref:r,className:ee(hu(),e),...t}));W.displayName=Qo.displayName;function nr(e,[t,r]){return Math.min(r,Math.max(t,e))}function Jr(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Qr(e){const[t,r]=h.useState(void 0);return de(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,c;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,c=u.blockSize}else i=e.offsetWidth,c=e.offsetHeight;r({width:i,height:c})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var rs=["PageUp","PageDown"],ns=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],os={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},xt="Slider",[en,pu,gu]=Zt(xt),[ss,Yp]=Fe(xt,[gu]),[vu,or]=ss(xt),as=h.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:a=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:m,onValueChange:f=()=>{},onValueCommit:d=()=>{},inverted:v=!1,form:b,...p}=e,g=h.useRef(new Set),x=h.useRef(0),w=i==="horizontal"?xu:yu,[C=[],j]=nt({prop:m,defaultProp:u,onChange:N=>{var O;(O=[...g.current][x.current])==null||O.focus(),f(N)}}),R=h.useRef(C);function T(N){const A=ju(C,N);P(N,A)}function S(N){P(N,x.current)}function F(){const N=R.current[x.current];C[x.current]!==N&&d(C)}function P(N,A,{commit:O}={commit:!1}){const z=Mu(a),H=Tu(Math.round((N-n)/a)*a+n,z),I=nr(H,[n,s]);j((G=[])=>{const M=Cu(G,I,A);if(Su(M,l*a)){x.current=M.indexOf(I);const D=String(M)!==String(G);return D&&O&&d(M),D?M:G}else return G})}return o.jsx(vu,{scope:e.__scopeSlider,name:r,disabled:c,min:n,max:s,valueIndexToChangeRef:x,thumbs:g.current,values:C,orientation:i,form:b,children:o.jsx(en.Provider,{scope:e.__scopeSlider,children:o.jsx(en.Slot,{scope:e.__scopeSlider,children:o.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...p,ref:t,onPointerDown:U(p.onPointerDown,()=>{c||(R.current=C)}),min:n,max:s,inverted:v,onSlideStart:c?void 0:T,onSlideMove:c?void 0:S,onSlideEnd:c?void 0:F,onHomeKeyDown:()=>!c&&P(n,0,{commit:!0}),onEndKeyDown:()=>!c&&P(s,C.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:A})=>{if(!c){const H=rs.includes(N.key)||N.shiftKey&&ns.includes(N.key)?10:1,I=x.current,G=C[I],M=a*H*A;P(G+M,I,{commit:!0})}}})})})})});as.displayName=xt;var[is,cs]=ss(xt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xu=h.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:a,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...m}=e,[f,d]=h.useState(null),v=oe(t,w=>d(w)),b=h.useRef(void 0),p=At(s),g=p==="ltr",x=g&&!a||!g&&a;function y(w){const C=b.current||f.getBoundingClientRect(),j=[0,C.width],T=nn(j,x?[r,n]:[n,r]);return b.current=C,T(w-C.left)}return o.jsx(is,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(ls,{dir:p,"data-orientation":"horizontal",...m,ref:v,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const C=y(w.clientX);i==null||i(C)},onSlideMove:w=>{const C=y(w.clientX);c==null||c(C)},onSlideEnd:()=>{b.current=void 0,l==null||l()},onStepKeyDown:w=>{const j=os[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:j?-1:1})}})})}),yu=h.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:a,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...u}=e,m=h.useRef(null),f=oe(t,m),d=h.useRef(void 0),v=!s;function b(p){const g=d.current||m.current.getBoundingClientRect(),x=[0,g.height],w=nn(x,v?[n,r]:[r,n]);return d.current=g,w(p-g.top)}return o.jsx(is,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:o.jsx(ls,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const g=b(p.clientY);a==null||a(g)},onSlideMove:p=>{const g=b(p.clientY);i==null||i(g)},onSlideEnd:()=>{d.current=void 0,c==null||c()},onStepKeyDown:p=>{const x=os[v?"from-bottom":"from-top"].includes(p.key);l==null||l({event:p,direction:x?-1:1})}})})}),ls=h.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...u}=e,m=or(xt,r);return o.jsx(X.span,{...u,ref:t,onKeyDown:U(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(c(f),f.preventDefault()):rs.concat(ns).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:U(e.onPointerDown,f=>{const d=f.target;d.setPointerCapture(f.pointerId),f.preventDefault(),m.thumbs.has(d)?d.focus():n(f)}),onPointerMove:U(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:U(e.onPointerUp,f=>{const d=f.target;d.hasPointerCapture(f.pointerId)&&(d.releasePointerCapture(f.pointerId),a(f))})})}),us="SliderTrack",ds=h.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=or(us,r);return o.jsx(X.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});ds.displayName=us;var tn="SliderRange",fs=h.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=or(tn,r),a=cs(tn,r),i=h.useRef(null),c=oe(t,i),l=s.values.length,u=s.values.map(d=>ps(d,s.min,s.max)),m=l>1?Math.min(...u):0,f=100-Math.max(...u);return o.jsx(X.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:c,style:{...e.style,[a.startEdge]:m+"%",[a.endEdge]:f+"%"}})});fs.displayName=tn;var rn="SliderThumb",ms=h.forwardRef((e,t)=>{const r=pu(e.__scopeSlider),[n,s]=h.useState(null),a=oe(t,c=>s(c)),i=h.useMemo(()=>n?r().findIndex(c=>c.ref.current===n):-1,[r,n]);return o.jsx(bu,{...e,ref:a,index:i})}),bu=h.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...a}=e,i=or(rn,r),c=cs(rn,r),[l,u]=h.useState(null),m=oe(t,y=>u(y)),f=l?i.form||!!l.closest("form"):!0,d=Qr(l),v=i.values[n],b=v===void 0?0:ps(v,i.min,i.max),p=Nu(n,i.values.length),g=d==null?void 0:d[c.size],x=g?ku(g,b,c.direction):0;return h.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${x}px)`},children:[o.jsx(en.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(X.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":i.min,"aria-valuenow":v,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:m,style:v===void 0?{display:"none"}:e.style,onFocus:U(e.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),f&&o.jsx(hs,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:v},n)]})});ms.displayName=rn;var wu="RadioBubbleInput",hs=h.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const s=h.useRef(null),a=oe(s,n),i=Jr(t);return h.useEffect(()=>{const c=s.current;if(!c)return;const l=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&m){const f=new Event("input",{bubbles:!0});m.call(c,t),c.dispatchEvent(f)}},[i,t]),o.jsx(X.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});hs.displayName=wu;function Cu(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,a)=>s-a)}function ps(e,t,r){const a=100/(r-t)*(e-t);return nr(a,[0,100])}function Nu(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function ju(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function ku(e,t,r){const n=e/2,a=nn([0,50],[0,n]);return(n-a(t)*r)*r}function Eu(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Su(e,t){if(t>0){const r=Eu(e);return Math.min(...r)>=t}return!0}function nn(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Mu(e){return(String(e).split(".")[1]||"").length}function Tu(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var gs=as,Au=ds,Ru=fs,_u=ms;const Re=h.forwardRef(({className:e,...t},r)=>o.jsxs(gs,{ref:r,className:ee("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(Au,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(Ru,{className:"absolute h-full bg-primary"})}),o.jsx(_u,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Re.displayName=gs.displayName;function Pu({planetStats:e,setPlanetStats:t}){const r=et(e.mass,e.radius),n=(c,l)=>{t({...e,[c]:l})},s=typeof e.mass=="number"?e.mass:Number(e.mass)||0,a=typeof e.radius=="number"?e.radius:Number(e.radius)||0,i=typeof e.density=="number"?e.density:Number(e.density)||0;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"MASS PROPERTIES"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Mass (Earth masses)"}),o.jsx("span",{className:"font-bold",children:s.toFixed(2)})]}),o.jsx(Re,{value:[s],min:.1,max:15,step:.1,onValueChange:c=>n("mass",c[0]),className:"[&_[role=slider]]:bg-cyan-400"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Radius (Earth radii)"}),o.jsx("span",{className:"font-bold",children:a.toFixed(2)})]}),o.jsx(Re,{value:[a],min:.1,max:10,step:.1,onValueChange:c=>n("radius",c[0]),className:"[&_[role=slider]]:bg-cyan-400"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Density (g/cmÂ³)"}),o.jsx("span",{className:"font-bold",children:i?i.toFixed(2):"N/A"})]}),o.jsx("p",{className:"text-xs text-slate-400",children:"Calculated from mass and radius"})]})]})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"THERMAL PROPERTIES"})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Temperature (K)"}),o.jsxs("span",{className:"font-bold",children:[Number(e.temperature)," K (",(Number(e.temperature)-273.15).toFixed(1),"Â°C)"]})]}),o.jsx(Re,{value:[Number(e.temperature)],min:50,max:700,step:1,onValueChange:c=>n("temperature",c[0]),className:"[&_[role=slider]]:bg-cyan-400"})]})})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"CLASSIFICATION"})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(W,{className:"text-cyan-200",children:"Planet Type"}),o.jsx("span",{className:"text-sm capitalize font-bold",children:r})]}),o.jsx("p",{className:"text-xs text-slate-400",children:r==="gaseous"?"Gas giants have mass > 7 Earth masses or radius > 2.5 Earth radii":"Terrestrial planets have smaller mass and radius"})]})})]})]})}var sr="Switch",[Iu,Xp]=Fe(sr),[Du,Ou]=Iu(sr),vs=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:i,disabled:c,value:l="on",onCheckedChange:u,form:m,...f}=e,[d,v]=h.useState(null),b=oe(t,w=>v(w)),p=h.useRef(!1),g=d?m||!!d.closest("form"):!0,[x,y]=nt({prop:s,defaultProp:a??!1,onChange:u,caller:sr});return o.jsxs(Du,{scope:r,checked:x,disabled:c,children:[o.jsx(X.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":ws(x),"data-disabled":c?"":void 0,disabled:c,value:l,...f,ref:b,onClick:U(e.onClick,w=>{y(C=>!C),g&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),g&&o.jsx(bs,{control:d,bubbles:!p.current,name:n,value:l,checked:x,required:i,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});vs.displayName=sr;var xs="SwitchThumb",ys=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Ou(xs,r);return o.jsx(X.span,{"data-state":ws(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});ys.displayName=xs;var Fu="SwitchBubbleInput",bs=h.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},a)=>{const i=h.useRef(null),c=oe(i,a),l=Jr(r),u=Qr(t);return h.useEffect(()=>{const m=i.current;if(!m)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&v){const b=new Event("click",{bubbles:n});v.call(m,r),m.dispatchEvent(b)}},[l,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:c,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bs.displayName=Fu;function ws(e){return e?"checked":"unchecked"}var Cs=vs,Lu=ys;const Ns=h.forwardRef(({className:e,...t},r)=>o.jsx(Cs,{className:ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:o.jsx(Lu,{className:ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ns.displayName=Cs.displayName;function zu(e,t=globalThis==null?void 0:globalThis.document){const r=Ae(e);h.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Bu="DismissableLayer",on="dismissableLayer.update",Vu="dismissableLayer.pointerDownOutside",$u="dismissableLayer.focusOutside",js,ks=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sn=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:c,...l}=e,u=h.useContext(ks),[m,f]=h.useState(null),d=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=h.useState({}),b=oe(t,T=>f(T)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),y=m?p.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,C=y>=x,j=Gu(T=>{const S=T.target,F=[...u.branches].some(P=>P.contains(S));!C||F||(s==null||s(T),i==null||i(T),T.defaultPrevented||c==null||c())},d),R=Wu(T=>{const S=T.target;[...u.branches].some(P=>P.contains(S))||(a==null||a(T),i==null||i(T),T.defaultPrevented||c==null||c())},d);return zu(T=>{y===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},d),h.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(js=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),Es(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=js)}},[m,d,r,u]),h.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),Es())},[m,u]),h.useEffect(()=>{const T=()=>v({});return document.addEventListener(on,T),()=>document.removeEventListener(on,T)},[]),o.jsx(X.div,{...l,ref:b,style:{pointerEvents:w?C?"auto":"none":void 0,...e.style},onFocusCapture:U(e.onFocusCapture,R.onFocusCapture),onBlurCapture:U(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:U(e.onPointerDownCapture,j.onPointerDownCapture)})});sn.displayName=Bu;var Hu="DismissableLayerBranch",Uu=h.forwardRef((e,t)=>{const r=h.useContext(ks),n=h.useRef(null),s=oe(t,n);return h.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),o.jsx(X.div,{...e,ref:s})});Uu.displayName=Hu;function Gu(e,t=globalThis==null?void 0:globalThis.document){const r=Ae(e),n=h.useRef(!1),s=h.useRef(()=>{});return h.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let l=function(){Ss(Vu,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Wu(e,t=globalThis==null?void 0:globalThis.document){const r=Ae(e),n=h.useRef(!1);return h.useEffect(()=>{const s=a=>{a.target&&!n.current&&Ss($u,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Es(){const e=new CustomEvent(on);document.dispatchEvent(e)}function Ss(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?ho(s,a):s.dispatchEvent(a)}var an=0;function Ms(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ts()),document.body.insertAdjacentElement("beforeend",e[1]??Ts()),an++,()=>{an===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),an--}},[])}function Ts(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cn="focusScope.autoFocusOnMount",ln="focusScope.autoFocusOnUnmount",As={bubbles:!1,cancelable:!0},Ku="FocusScope",un=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[c,l]=h.useState(null),u=Ae(s),m=Ae(a),f=h.useRef(null),d=oe(t,p=>l(p)),v=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let p=function(w){if(v.paused||!c)return;const C=w.target;c.contains(C)?f.current=C:We(f.current,{select:!0})},g=function(w){if(v.paused||!c)return;const C=w.relatedTarget;C!==null&&(c.contains(C)||We(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&We(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(x);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[n,c,v.paused]),h.useEffect(()=>{if(c){Ps.add(v);const p=document.activeElement;if(!c.contains(p)){const x=new CustomEvent(cn,As);c.addEventListener(cn,u),c.dispatchEvent(x),x.defaultPrevented||(qu(Qu(Rs(c)),{select:!0}),document.activeElement===p&&We(c))}return()=>{c.removeEventListener(cn,u),setTimeout(()=>{const x=new CustomEvent(ln,As);c.addEventListener(ln,m),c.dispatchEvent(x),x.defaultPrevented||We(p??document.body,{select:!0}),c.removeEventListener(ln,m),Ps.remove(v)},0)}}},[c,u,m,v]);const b=h.useCallback(p=>{if(!r&&!n||v.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const y=p.currentTarget,[w,C]=Yu(y);w&&C?!p.shiftKey&&x===C?(p.preventDefault(),r&&We(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),r&&We(C,{select:!0})):x===y&&p.preventDefault()}},[r,n,v.paused]);return o.jsx(X.div,{tabIndex:-1,...i,ref:d,onKeyDown:b})});un.displayName=Ku;function qu(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(We(n,{select:t}),document.activeElement!==r)return}function Yu(e){const t=Rs(e),r=_s(t,e),n=_s(t.reverse(),e);return[r,n]}function Rs(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _s(e,t){for(const r of e)if(!Xu(r,{upTo:t}))return r}function Xu(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Zu(e){return e instanceof HTMLInputElement&&"select"in e}function We(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Zu(e)&&t&&e.select()}}var Ps=Ju();function Ju(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Is(e,t),e.unshift(t)},remove(t){var r;e=Is(e,t),(r=e[0])==null||r.resume()}}}function Is(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Qu(e){return e.filter(t=>t.tagName!=="A")}const ed=["top","right","bottom","left"],Ke=Math.min,be=Math.max,ar=Math.round,ir=Math.floor,_e=e=>({x:e,y:e}),td={left:"right",right:"left",bottom:"top",top:"bottom"},rd={start:"end",end:"start"};function dn(e,t,r){return be(e,Ke(t,r))}function ze(e,t){return typeof e=="function"?e(t):e}function Be(e){return e.split("-")[0]}function yt(e){return e.split("-")[1]}function fn(e){return e==="x"?"y":"x"}function mn(e){return e==="y"?"height":"width"}function Ve(e){return["top","bottom"].includes(Be(e))?"y":"x"}function hn(e){return fn(Ve(e))}function nd(e,t,r){r===void 0&&(r=!1);const n=yt(e),s=hn(e),a=mn(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=cr(i)),[i,cr(i)]}function od(e){const t=cr(e);return[pn(e),t,pn(t)]}function pn(e){return e.replace(/start|end/g,t=>rd[t])}function sd(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:i;default:return[]}}function ad(e,t,r,n){const s=yt(e);let a=sd(Be(e),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(pn)))),a}function cr(e){return e.replace(/left|right|bottom|top/g,t=>td[t])}function id(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ds(e){return typeof e!="number"?id(e):{top:e,right:e,bottom:e,left:e}}function lr(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Os(e,t,r){let{reference:n,floating:s}=e;const a=Ve(t),i=hn(t),c=mn(i),l=Be(t),u=a==="y",m=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,d=n[c]/2-s[c]/2;let v;switch(l){case"top":v={x:m,y:n.y-s.height};break;case"bottom":v={x:m,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:f};break;case"left":v={x:n.x-s.width,y:f};break;default:v={x:n.x,y:n.y}}switch(yt(t)){case"start":v[i]-=d*(r&&u?-1:1);break;case"end":v[i]+=d*(r&&u?-1:1);break}return v}const cd=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,c=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:f}=Os(u,n,l),d=n,v={},b=0;for(let p=0;p<c.length;p++){const{name:g,fn:x}=c[p],{x:y,y:w,data:C,reset:j}=await x({x:m,y:f,initialPlacement:n,placement:d,strategy:s,middlewareData:v,rects:u,platform:i,elements:{reference:e,floating:t}});m=y??m,f=w??f,v={...v,[g]:{...v[g],...C}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(d=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:m,y:f}=Os(u,d,l)),p=-1)}return{x:m,y:f,placement:d,strategy:s,middlewareData:v}};async function Pt(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:i,elements:c,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:d=!1,padding:v=0}=ze(t,e),b=Ds(v),g=c[d?f==="floating"?"reference":"floating":f],x=lr(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(g)))==null||r?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:l})),y=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),C=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},j=lr(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:w,strategy:l}):y);return{top:(x.top-j.top+b.top)/C.y,bottom:(j.bottom-x.bottom+b.bottom)/C.y,left:(x.left-j.left+b.left)/C.x,right:(j.right-x.right+b.right)/C.x}}const ld=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:i,elements:c,middlewareData:l}=t,{element:u,padding:m=0}=ze(e,t)||{};if(u==null)return{};const f=Ds(m),d={x:r,y:n},v=hn(s),b=mn(v),p=await i.getDimensions(u),g=v==="y",x=g?"top":"left",y=g?"bottom":"right",w=g?"clientHeight":"clientWidth",C=a.reference[b]+a.reference[v]-d[v]-a.floating[b],j=d[v]-a.reference[v],R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let T=R?R[w]:0;(!T||!await(i.isElement==null?void 0:i.isElement(R)))&&(T=c.floating[w]||a.floating[b]);const S=C/2-j/2,F=T/2-p[b]/2-1,P=Ke(f[x],F),N=Ke(f[y],F),A=P,O=T-p[b]-N,z=T/2-p[b]/2+S,H=dn(A,z,O),I=!l.arrow&&yt(s)!=null&&z!==H&&a.reference[b]/2-(z<A?P:N)-p[b]/2<0,G=I?z<A?z-A:z-O:0;return{[v]:d[v]+G,data:{[v]:H,centerOffset:z-H-G,...I&&{alignmentOffset:G}},reset:I}}}),ud=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:c,platform:l,elements:u}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:p=!0,...g}=ze(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const x=Be(s),y=Ve(c),w=Be(c)===c,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),j=d||(w||!p?[cr(c)]:od(c)),R=b!=="none";!d&&R&&j.push(...ad(c,p,b,C));const T=[c,...j],S=await Pt(t,g),F=[];let P=((n=a.flip)==null?void 0:n.overflows)||[];if(m&&F.push(S[x]),f){const H=nd(s,i,C);F.push(S[H[0]],S[H[1]])}if(P=[...P,{placement:s,overflows:F}],!F.every(H=>H<=0)){var N,A;const H=(((N=a.flip)==null?void 0:N.index)||0)+1,I=T[H];if(I){var O;const M=f==="alignment"?y!==Ve(I):!1,D=((O=P[0])==null?void 0:O.overflows[0])>0;if(!M||D)return{data:{index:H,overflows:P},reset:{placement:I}}}let G=(A=P.filter(M=>M.overflows[0]<=0).sort((M,D)=>M.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!G)switch(v){case"bestFit":{var z;const M=(z=P.filter(D=>{if(R){const E=Ve(D.placement);return E===y||E==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(E=>E>0).reduce((E,$)=>E+$,0)]).sort((D,E)=>D[1]-E[1])[0])==null?void 0:z[0];M&&(G=M);break}case"initialPlacement":G=c;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function Fs(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ls(e){return ed.some(t=>e[t]>=0)}const dd=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=ze(e,t);switch(n){case"referenceHidden":{const a=await Pt(t,{...s,elementContext:"reference"}),i=Fs(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ls(i)}}}case"escaped":{const a=await Pt(t,{...s,altBoundary:!0}),i=Fs(a,r.floating);return{data:{escapedOffsets:i,escaped:Ls(i)}}}default:return{}}}}};async function fd(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Be(r),c=yt(r),l=Ve(r)==="y",u=["left","top"].includes(i)?-1:1,m=a&&l?-1:1,f=ze(t,e);let{mainAxis:d,crossAxis:v,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof b=="number"&&(v=c==="end"?b*-1:b),l?{x:v*m,y:d*u}:{x:d*u,y:v*m}}const md=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:i,middlewareData:c}=t,l=await fd(t,e);return i===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}},hd=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:c={fn:g=>{let{x,y}=g;return{x,y}}},...l}=ze(e,t),u={x:r,y:n},m=await Pt(t,l),f=Ve(Be(s)),d=fn(f);let v=u[d],b=u[f];if(a){const g=d==="y"?"top":"left",x=d==="y"?"bottom":"right",y=v+m[g],w=v-m[x];v=dn(y,v,w)}if(i){const g=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=b+m[g],w=b-m[x];b=dn(y,b,w)}const p=c.fn({...t,[d]:v,[f]:b});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[d]:a,[f]:i}}}}}},pd=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=t,{offset:c=0,mainAxis:l=!0,crossAxis:u=!0}=ze(e,t),m={x:r,y:n},f=Ve(s),d=fn(f);let v=m[d],b=m[f];const p=ze(c,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=d==="y"?"height":"width",C=a.reference[d]-a.floating[w]+g.mainAxis,j=a.reference[d]+a.reference[w]-g.mainAxis;v<C?v=C:v>j&&(v=j)}if(u){var x,y;const w=d==="y"?"width":"height",C=["top","left"].includes(Be(s)),j=a.reference[f]-a.floating[w]+(C&&((x=i.offset)==null?void 0:x[f])||0)+(C?0:g.crossAxis),R=a.reference[f]+a.reference[w]+(C?0:((y=i.offset)==null?void 0:y[f])||0)-(C?g.crossAxis:0);b<j?b=j:b>R&&(b=R)}return{[d]:v,[f]:b}}}},gd=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:i,elements:c}=t,{apply:l=()=>{},...u}=ze(e,t),m=await Pt(t,u),f=Be(s),d=yt(s),v=Ve(s)==="y",{width:b,height:p}=a.floating;let g,x;f==="top"||f==="bottom"?(g=f,x=d===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(x=f,g=d==="end"?"top":"bottom");const y=p-m.top-m.bottom,w=b-m.left-m.right,C=Ke(p-m[g],y),j=Ke(b-m[x],w),R=!t.middlewareData.shift;let T=C,S=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(S=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=y),R&&!d){const P=be(m.left,0),N=be(m.right,0),A=be(m.top,0),O=be(m.bottom,0);v?S=b-2*(P!==0||N!==0?P+N:be(m.left,m.right)):T=p-2*(A!==0||O!==0?A+O:be(m.top,m.bottom))}await l({...t,availableWidth:S,availableHeight:T});const F=await i.getDimensions(c.floating);return b!==F.width||p!==F.height?{reset:{rects:!0}}:{}}}};function ur(){return typeof window<"u"}function bt(e){return zs(e)?(e.nodeName||"").toLowerCase():"#document"}function we(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Pe(e){var t;return(t=(zs(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zs(e){return ur()?e instanceof Node||e instanceof we(e).Node:!1}function ke(e){return ur()?e instanceof Element||e instanceof we(e).Element:!1}function Ie(e){return ur()?e instanceof HTMLElement||e instanceof we(e).HTMLElement:!1}function Bs(e){return!ur()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof we(e).ShadowRoot}function It(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Ee(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function vd(e){return["table","td","th"].includes(bt(e))}function dr(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function gn(e){const t=vn(),r=ke(e)?Ee(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function xd(e){let t=qe(e);for(;Ie(t)&&!wt(t);){if(gn(t))return t;if(dr(t))return null;t=qe(t)}return null}function vn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wt(e){return["html","body","#document"].includes(bt(e))}function Ee(e){return we(e).getComputedStyle(e)}function fr(e){return ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qe(e){if(bt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Bs(e)&&e.host||Pe(e);return Bs(t)?t.host:t}function Vs(e){const t=qe(e);return wt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ie(t)&&It(t)?t:Vs(t)}function Dt(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Vs(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),i=we(s);if(a){const c=xn(i);return t.concat(i,i.visualViewport||[],It(s)?s:[],c&&r?Dt(c):[])}return t.concat(s,Dt(s,[],r))}function xn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $s(e){const t=Ee(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Ie(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,c=ar(r)!==a||ar(n)!==i;return c&&(r=a,n=i),{width:r,height:n,$:c}}function yn(e){return ke(e)?e:e.contextElement}function Ct(e){const t=yn(e);if(!Ie(t))return _e(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=$s(t);let i=(a?ar(r.width):r.width)/n,c=(a?ar(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const yd=_e(0);function Hs(e){const t=we(e);return!vn()||!t.visualViewport?yd:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bd(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==we(e)?!1:t}function st(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=yn(e);let i=_e(1);t&&(n?ke(n)&&(i=Ct(n)):i=Ct(e));const c=bd(a,r,n)?Hs(a):_e(0);let l=(s.left+c.x)/i.x,u=(s.top+c.y)/i.y,m=s.width/i.x,f=s.height/i.y;if(a){const d=we(a),v=n&&ke(n)?we(n):n;let b=d,p=xn(b);for(;p&&n&&v!==b;){const g=Ct(p),x=p.getBoundingClientRect(),y=Ee(p),w=x.left+(p.clientLeft+parseFloat(y.paddingLeft))*g.x,C=x.top+(p.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,u*=g.y,m*=g.x,f*=g.y,l+=w,u+=C,b=we(p),p=xn(b)}}return lr({width:m,height:f,x:l,y:u})}function bn(e,t){const r=fr(e).scrollLeft;return t?t.left+r:st(Pe(e)).left+r}function Us(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:bn(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function wd(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",i=Pe(n),c=t?dr(t.floating):!1;if(n===i||c&&a)return r;let l={scrollLeft:0,scrollTop:0},u=_e(1);const m=_e(0),f=Ie(n);if((f||!f&&!a)&&((bt(n)!=="body"||It(i))&&(l=fr(n)),Ie(n))){const v=st(n);u=Ct(n),m.x=v.x+n.clientLeft,m.y=v.y+n.clientTop}const d=i&&!f&&!a?Us(i,l,!0):_e(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+m.x+d.x,y:r.y*u.y-l.scrollTop*u.y+m.y+d.y}}function Cd(e){return Array.from(e.getClientRects())}function Nd(e){const t=Pe(e),r=fr(e),n=e.ownerDocument.body,s=be(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=be(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+bn(e);const c=-r.scrollTop;return Ee(n).direction==="rtl"&&(i+=be(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:c}}function jd(e,t){const r=we(e),n=Pe(e),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,c=0,l=0;if(s){a=s.width,i=s.height;const u=vn();(!u||u&&t==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:a,height:i,x:c,y:l}}function kd(e,t){const r=st(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Ie(e)?Ct(e):_e(1),i=e.clientWidth*a.x,c=e.clientHeight*a.y,l=s*a.x,u=n*a.y;return{width:i,height:c,x:l,y:u}}function Gs(e,t,r){let n;if(t==="viewport")n=jd(e,r);else if(t==="document")n=Nd(Pe(e));else if(ke(t))n=kd(t,r);else{const s=Hs(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return lr(n)}function Ws(e,t){const r=qe(e);return r===t||!ke(r)||wt(r)?!1:Ee(r).position==="fixed"||Ws(r,t)}function Ed(e,t){const r=t.get(e);if(r)return r;let n=Dt(e,[],!1).filter(c=>ke(c)&&bt(c)!=="body"),s=null;const a=Ee(e).position==="fixed";let i=a?qe(e):e;for(;ke(i)&&!wt(i);){const c=Ee(i),l=gn(i);!l&&c.position==="fixed"&&(s=null),(a?!l&&!s:!l&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||It(i)&&!l&&Ws(e,i))?n=n.filter(m=>m!==i):s=c,i=qe(i)}return t.set(e,n),n}function Sd(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?dr(t)?[]:Ed(t,this._c):[].concat(r),n],c=i[0],l=i.reduce((u,m)=>{const f=Gs(t,m,s);return u.top=be(f.top,u.top),u.right=Ke(f.right,u.right),u.bottom=Ke(f.bottom,u.bottom),u.left=be(f.left,u.left),u},Gs(t,c,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Md(e){const{width:t,height:r}=$s(e);return{width:t,height:r}}function Td(e,t,r){const n=Ie(t),s=Pe(t),a=r==="fixed",i=st(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const l=_e(0);function u(){l.x=bn(s)}if(n||!n&&!a)if((bt(t)!=="body"||It(s))&&(c=fr(t)),n){const v=st(t,!0,a,t);l.x=v.x+t.clientLeft,l.y=v.y+t.clientTop}else s&&u();a&&!n&&s&&u();const m=s&&!n&&!a?Us(s,c):_e(0),f=i.left+c.scrollLeft-l.x-m.x,d=i.top+c.scrollTop-l.y-m.y;return{x:f,y:d,width:i.width,height:i.height}}function wn(e){return Ee(e).position==="static"}function Ks(e,t){if(!Ie(e)||Ee(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Pe(e)===r&&(r=r.ownerDocument.body),r}function qs(e,t){const r=we(e);if(dr(e))return r;if(!Ie(e)){let s=qe(e);for(;s&&!wt(s);){if(ke(s)&&!wn(s))return s;s=qe(s)}return r}let n=Ks(e,t);for(;n&&vd(n)&&wn(n);)n=Ks(n,t);return n&&wt(n)&&wn(n)&&!gn(n)?r:n||xd(e)||r}const Ad=async function(e){const t=this.getOffsetParent||qs,r=this.getDimensions,n=await r(e.floating);return{reference:Td(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Rd(e){return Ee(e).direction==="rtl"}const _d={convertOffsetParentRelativeRectToViewportRelativeRect:wd,getDocumentElement:Pe,getClippingRect:Sd,getOffsetParent:qs,getElementRects:Ad,getClientRects:Cd,getDimensions:Md,getScale:Ct,isElement:ke,isRTL:Rd};function Ys(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Pd(e,t){let r=null,n;const s=Pe(e);function a(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),a();const u=e.getBoundingClientRect(),{left:m,top:f,width:d,height:v}=u;if(c||t(),!d||!v)return;const b=ir(f),p=ir(s.clientWidth-(m+d)),g=ir(s.clientHeight-(f+v)),x=ir(m),w={rootMargin:-b+"px "+-p+"px "+-g+"px "+-x+"px",threshold:be(0,Ke(1,l))||1};let C=!0;function j(R){const T=R[0].intersectionRatio;if(T!==l){if(!C)return i();T?i(!1,T):n=setTimeout(()=>{i(!1,1e-7)},1e3)}T===1&&!Ys(u,e.getBoundingClientRect())&&i(),C=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return i(!0),a}function Id(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=yn(e),m=s||a?[...u?Dt(u):[],...Dt(t)]:[];m.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),a&&x.addEventListener("resize",r)});const f=u&&c?Pd(u,r):null;let d=-1,v=null;i&&(v=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=v)==null||w.observe(t)})),r()}),u&&!l&&v.observe(u),v.observe(t));let b,p=l?st(e):null;l&&g();function g(){const x=st(e);p&&!Ys(p,x)&&r(),p=x,b=requestAnimationFrame(g)}return r(),()=>{var x;m.forEach(y=>{s&&y.removeEventListener("scroll",r),a&&y.removeEventListener("resize",r)}),f==null||f(),(x=v)==null||x.disconnect(),v=null,l&&cancelAnimationFrame(b)}}const Dd=md,Od=hd,Fd=ud,Ld=gd,zd=dd,Xs=ld,Bd=pd,Vd=(e,t,r)=>{const n=new Map,s={platform:_d,...r},a={...s.platform,_c:n};return cd(e,t,{...s,platform:a})};var mr=typeof document<"u"?_.useLayoutEffect:_.useEffect;function hr(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!hr(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!hr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Zs(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Js(e,t){const r=Zs(e);return Math.round(t*r)/r}function Cn(e){const t=h.useRef(e);return mr(()=>{t.current=e}),t}function $d(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:c=!0,whileElementsMounted:l,open:u}=e,[m,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[d,v]=h.useState(n);hr(d,n)||v(n);const[b,p]=h.useState(null),[g,x]=h.useState(null),y=h.useCallback(M=>{M!==R.current&&(R.current=M,p(M))},[]),w=h.useCallback(M=>{M!==T.current&&(T.current=M,x(M))},[]),C=a||b,j=i||g,R=h.useRef(null),T=h.useRef(null),S=h.useRef(m),F=l!=null,P=Cn(l),N=Cn(s),A=Cn(u),O=h.useCallback(()=>{if(!R.current||!T.current)return;const M={placement:t,strategy:r,middleware:d};N.current&&(M.platform=N.current),Vd(R.current,T.current,M).then(D=>{const E={...D,isPositioned:A.current!==!1};z.current&&!hr(S.current,E)&&(S.current=E,Wt.flushSync(()=>{f(E)}))})},[d,t,r,N,A]);mr(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const z=h.useRef(!1);mr(()=>(z.current=!0,()=>{z.current=!1}),[]),mr(()=>{if(C&&(R.current=C),j&&(T.current=j),C&&j){if(P.current)return P.current(C,j,O);O()}},[C,j,O,P,F]);const H=h.useMemo(()=>({reference:R,floating:T,setReference:y,setFloating:w}),[y,w]),I=h.useMemo(()=>({reference:C,floating:j}),[C,j]),G=h.useMemo(()=>{const M={position:r,left:0,top:0};if(!I.floating)return M;const D=Js(I.floating,m.x),E=Js(I.floating,m.y);return c?{...M,transform:"translate("+D+"px, "+E+"px)",...Zs(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:E}},[r,c,I.floating,m.x,m.y]);return h.useMemo(()=>({...m,update:O,refs:H,elements:I,floatingStyles:G}),[m,O,H,I,G])}const Hd=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Xs({element:n.current,padding:s}).fn(r):{}:n?Xs({element:n,padding:s}).fn(r):{}}}},Ud=(e,t)=>({...Dd(e),options:[e,t]}),Gd=(e,t)=>({...Od(e),options:[e,t]}),Wd=(e,t)=>({...Bd(e),options:[e,t]}),Kd=(e,t)=>({...Fd(e),options:[e,t]}),qd=(e,t)=>({...Ld(e),options:[e,t]}),Yd=(e,t)=>({...zd(e),options:[e,t]}),Xd=(e,t)=>({...Hd(e),options:[e,t]});var Zd="Arrow",Qs=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return o.jsx(X.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Qs.displayName=Zd;var Jd=Qs,Nn="Popper",[ea,pr]=Fe(Nn),[Qd,ta]=ea(Nn),ra=e=>{const{__scopePopper:t,children:r}=e,[n,s]=h.useState(null);return o.jsx(Qd,{scope:t,anchor:n,onAnchorChange:s,children:r})};ra.displayName=Nn;var na="PopperAnchor",oa=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=ta(na,r),i=h.useRef(null),c=oe(t,i);return h.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:o.jsx(X.div,{...s,ref:c})});oa.displayName=na;var jn="PopperContent",[ef,tf]=ea(jn),sa=h.forwardRef((e,t)=>{var L,K,J,Q,re,se;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:v="optimized",onPlaced:b,...p}=e,g=ta(jn,r),[x,y]=h.useState(null),w=oe(t,Ce=>y(Ce)),[C,j]=h.useState(null),R=Qr(C),T=(R==null?void 0:R.width)??0,S=(R==null?void 0:R.height)??0,F=n+(a!=="center"?"-"+a:""),P=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},N=Array.isArray(u)?u:[u],A=N.length>0,O={padding:P,boundary:N.filter(nf),altBoundary:A},{refs:z,floatingStyles:H,placement:I,isPositioned:G,middlewareData:M}=$d({strategy:"fixed",placement:F,whileElementsMounted:(...Ce)=>Id(...Ce,{animationFrame:v==="always"}),elements:{reference:g.anchor},middleware:[Ud({mainAxis:s+S,alignmentAxis:i}),l&&Gd({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Wd():void 0,...O}),l&&Kd({...O}),qd({...O,apply:({elements:Ce,rects:Oe,availableWidth:Ht,availableHeight:Ut})=>{const{width:Gt,height:Wp}=Oe.reference,Ir=Ce.floating.style;Ir.setProperty("--radix-popper-available-width",`${Ht}px`),Ir.setProperty("--radix-popper-available-height",`${Ut}px`),Ir.setProperty("--radix-popper-anchor-width",`${Gt}px`),Ir.setProperty("--radix-popper-anchor-height",`${Wp}px`)}}),C&&Xd({element:C,padding:c}),of({arrowWidth:T,arrowHeight:S}),d&&Yd({strategy:"referenceHidden",...O})]}),[D,E]=ca(I),$=Ae(b);de(()=>{G&&($==null||$())},[G,$]);const q=(L=M.arrow)==null?void 0:L.x,Y=(K=M.arrow)==null?void 0:K.y,te=((J=M.arrow)==null?void 0:J.centerOffset)!==0,[ae,le]=h.useState();return de(()=>{x&&le(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:G?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(Q=M.transformOrigin)==null?void 0:Q.x,(re=M.transformOrigin)==null?void 0:re.y].join(" "),...((se=M.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(ef,{scope:r,placedSide:D,onArrowChange:j,arrowX:q,arrowY:Y,shouldHideArrow:te,children:o.jsx(X.div,{"data-side":D,"data-align":E,...p,ref:w,style:{...p.style,animation:G?void 0:"none"}})})})});sa.displayName=jn;var aa="PopperArrow",rf={top:"bottom",right:"left",bottom:"top",left:"right"},ia=h.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=tf(aa,n),i=rf[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(Jd,{...s,ref:r,style:{...s.style,display:"block"}})})});ia.displayName=aa;function nf(e){return e!==null}var of=e=>({name:"transformOrigin",options:e,fn(t){var g,x,y;const{placement:r,rects:n,middlewareData:s}=t,i=((g=s.arrow)==null?void 0:g.centerOffset)!==0,c=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[u,m]=ca(r),f={start:"0%",center:"50%",end:"100%"}[m],d=(((x=s.arrow)==null?void 0:x.x)??0)+c/2,v=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let b="",p="";return u==="bottom"?(b=i?f:`${d}px`,p=`${-l}px`):u==="top"?(b=i?f:`${d}px`,p=`${n.floating.height+l}px`):u==="right"?(b=`${-l}px`,p=i?f:`${v}px`):u==="left"&&(b=`${n.floating.width+l}px`,p=i?f:`${v}px`),{data:{x:b,y:p}}}});function ca(e){const[t,r="center"]=e.split("-");return[t,r]}var la=ra,ua=oa,da=sa,fa=ia,sf="Portal",kn=h.forwardRef((e,t)=>{var c;const{container:r,...n}=e,[s,a]=h.useState(!1);de(()=>a(!0),[]);const i=r||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?Zn.createPortal(o.jsx(X.div,{...n,ref:t}),i):null});kn.displayName=sf;var ma=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),af="VisuallyHidden",cf=h.forwardRef((e,t)=>o.jsx(X.span,{...e,ref:t,style:{...ma,...e.style}}));cf.displayName=af;var lf=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Nt=new WeakMap,gr=new WeakMap,vr={},En=0,ha=function(e){return e&&(e.host||ha(e.parentNode))},uf=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=ha(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},df=function(e,t,r,n){var s=uf(t,Array.isArray(e)?e:[e]);vr[r]||(vr[r]=new WeakMap);var a=vr[r],i=[],c=new Set,l=new Set(s),u=function(f){!f||c.has(f)||(c.add(f),u(f.parentNode))};s.forEach(u);var m=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(c.has(d))m(d);else try{var v=d.getAttribute(n),b=v!==null&&v!=="false",p=(Nt.get(d)||0)+1,g=(a.get(d)||0)+1;Nt.set(d,p),a.set(d,g),i.push(d),p===1&&b&&gr.set(d,!0),g===1&&d.setAttribute(r,"true"),b||d.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",d,x)}})};return m(t),c.clear(),En++,function(){i.forEach(function(f){var d=Nt.get(f)-1,v=a.get(f)-1;Nt.set(f,d),a.set(f,v),d||(gr.has(f)||f.removeAttribute(n),gr.delete(f)),v||f.removeAttribute(r)}),En--,En||(Nt=new WeakMap,Nt=new WeakMap,gr=new WeakMap,vr={})}},pa=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=lf(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),df(n,s,r,"aria-hidden")):function(){return null}},De=function(){return De=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},De.apply(this,arguments)};function ga(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function ff(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;var xr="right-scroll-bar-position",yr="width-before-scroll-bar",mf="with-scroll-bars-hidden",hf="--removed-body-scroll-bar-size";function Sn(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function pf(e,t){var r=_.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var gf=typeof window<"u"?h.useLayoutEffect:h.useEffect,va=new WeakMap;function vf(e,t){var r=pf(null,function(n){return e.forEach(function(s){return Sn(s,n)})});return gf(function(){var n=va.get(r);if(n){var s=new Set(n),a=new Set(e),i=r.current;s.forEach(function(c){a.has(c)||Sn(c,null)}),a.forEach(function(c){s.has(c)||Sn(c,i)})}va.set(r,e)},[e]),r}function xf(e){return e}function yf(e,t){t===void 0&&(t=xf);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(c){return c!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(c){return a(c)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var c=r;r=[],c.forEach(a),i=r}var l=function(){var m=i;i=[],m.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(m){i.push(m),u()},filter:function(m){return i=i.filter(m),r}}}};return s}function bf(e){e===void 0&&(e={});var t=yf(null);return t.options=De({async:!0,ssr:!1},e),t}var xa=function(e){var t=e.sideCar,r=ga(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,De({},r))};xa.isSideCarExport=!0;function wf(e,t){return e.useMedium(t),xa}var ya=bf(),Mn=function(){},br=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:Mn,onWheelCapture:Mn,onTouchMoveCapture:Mn}),s=n[0],a=n[1],i=e.forwardProps,c=e.children,l=e.className,u=e.removeScrollBar,m=e.enabled,f=e.shards,d=e.sideCar,v=e.noIsolation,b=e.inert,p=e.allowPinchZoom,g=e.as,x=g===void 0?"div":g,y=e.gapMode,w=ga(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=d,j=vf([r,t]),R=De(De({},w),s);return h.createElement(h.Fragment,null,m&&h.createElement(C,{sideCar:ya,removeScrollBar:u,shards:f,noIsolation:v,inert:b,setCallbacks:a,allowPinchZoom:!!p,lockRef:r,gapMode:y}),i?h.cloneElement(h.Children.only(c),De(De({},R),{ref:j})):h.createElement(x,De({},R,{className:l,ref:j}),c))});br.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},br.classNames={fullWidth:yr,zeroRight:xr};var Cf=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Nf(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Cf();return t&&e.setAttribute("nonce",t),e}function jf(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kf(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ef=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Nf())&&(jf(t,r),kf(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Sf=function(){var e=Ef();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ba=function(){var e=Sf(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Mf={left:0,top:0,right:0,gap:0},Tn=function(e){return parseInt(e||"",10)||0},Tf=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Tn(r),Tn(n),Tn(s)]},Af=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Mf;var t=Tf(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Rf=ba(),jt="data-scroll-locked",_f=function(e,t,r,n){var s=e.left,a=e.top,i=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(mf,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(jt,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xr,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(yr,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(xr," .").concat(xr,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yr," .").concat(yr,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(jt,`] {
    `).concat(hf,": ").concat(c,`px;
  }
`)},wa=function(){var e=parseInt(document.body.getAttribute(jt)||"0",10);return isFinite(e)?e:0},Pf=function(){h.useEffect(function(){return document.body.setAttribute(jt,(wa()+1).toString()),function(){var e=wa()-1;e<=0?document.body.removeAttribute(jt):document.body.setAttribute(jt,e.toString())}},[])},If=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Pf();var a=h.useMemo(function(){return Af(s)},[s]);return h.createElement(Rf,{styles:_f(a,!t,s,r?"":"!important")})},An=!1;if(typeof window<"u")try{var wr=Object.defineProperty({},"passive",{get:function(){return An=!0,!0}});window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{An=!1}var kt=An?{passive:!1}:!1,Df=function(e){return e.tagName==="TEXTAREA"},Ca=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Df(e)&&r[t]==="visible")},Of=function(e){return Ca(e,"overflowY")},Ff=function(e){return Ca(e,"overflowX")},Na=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=ja(e,n);if(s){var a=ka(e,n),i=a[1],c=a[2];if(i>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Lf=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},zf=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},ja=function(e,t){return e==="v"?Of(t):Ff(t)},ka=function(e,t){return e==="v"?Lf(t):zf(t)},Bf=function(e,t){return e==="h"&&t==="rtl"?-1:1},Vf=function(e,t,r,n,s){var a=Bf(e,window.getComputedStyle(t).direction),i=a*n,c=r.target,l=t.contains(c),u=!1,m=i>0,f=0,d=0;do{var v=ka(e,c),b=v[0],p=v[1],g=v[2],x=p-g-a*b;(b||x)&&ja(e,c)&&(f+=x,d+=b),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(m&&Math.abs(f)<1||!m&&Math.abs(d)<1)&&(u=!0),u},Cr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ea=function(e){return[e.deltaX,e.deltaY]},Sa=function(e){return e&&"current"in e?e.current:e},$f=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Hf=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Uf=0,Et=[];function Gf(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),s=h.useState(Uf++)[0],a=h.useState(ba)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=ff([e.lockRef.current],(e.shards||[]).map(Sa),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=h.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!i.current.allowPinchZoom;var x=Cr(p),y=r.current,w="deltaX"in p?p.deltaX:y[0]-x[0],C="deltaY"in p?p.deltaY:y[1]-x[1],j,R=p.target,T=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in p&&T==="h"&&R.type==="range")return!1;var S=Na(T,R);if(!S)return!0;if(S?j=T:(j=T==="v"?"h":"v",S=Na(T,R)),!S)return!1;if(!n.current&&"changedTouches"in p&&(w||C)&&(n.current=j),!j)return!0;var F=n.current||j;return Vf(F,g,p,F==="h"?w:C)},[]),l=h.useCallback(function(p){var g=p;if(!(!Et.length||Et[Et.length-1]!==a)){var x="deltaY"in g?Ea(g):Cr(g),y=t.current.filter(function(j){return j.name===g.type&&(j.target===g.target||g.target===j.shadowParent)&&$f(j.delta,x)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(i.current.shards||[]).map(Sa).filter(Boolean).filter(function(j){return j.contains(g.target)}),C=w.length>0?c(g,w[0]):!i.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),u=h.useCallback(function(p,g,x,y){var w={name:p,delta:g,target:x,should:y,shadowParent:Wf(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(C){return C!==w})},1)},[]),m=h.useCallback(function(p){r.current=Cr(p),n.current=void 0},[]),f=h.useCallback(function(p){u(p.type,Ea(p),p.target,c(p,e.lockRef.current))},[]),d=h.useCallback(function(p){u(p.type,Cr(p),p.target,c(p,e.lockRef.current))},[]);h.useEffect(function(){return Et.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,kt),document.addEventListener("touchmove",l,kt),document.addEventListener("touchstart",m,kt),function(){Et=Et.filter(function(p){return p!==a}),document.removeEventListener("wheel",l,kt),document.removeEventListener("touchmove",l,kt),document.removeEventListener("touchstart",m,kt)}},[]);var v=e.removeScrollBar,b=e.inert;return h.createElement(h.Fragment,null,b?h.createElement(a,{styles:Hf(s)}):null,v?h.createElement(If,{gapMode:e.gapMode}):null)}function Wf(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kf=wf(ya,Gf);var Rn=h.forwardRef(function(e,t){return h.createElement(br,De({},e,{ref:t,sideCar:Kf}))});Rn.classNames=br.classNames;var qf=[" ","Enter","ArrowUp","ArrowDown"],Yf=[" ","Enter"],at="Select",[Nr,jr,Xf]=Zt(at),[St,Zp]=Fe(at,[Xf,pr]),kr=pr(),[Zf,Ye]=St(at),[Jf,Qf]=St(at),Ma=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:i,defaultValue:c,onValueChange:l,dir:u,name:m,autoComplete:f,disabled:d,required:v,form:b}=e,p=kr(t),[g,x]=h.useState(null),[y,w]=h.useState(null),[C,j]=h.useState(!1),R=At(u),[T,S]=nt({prop:n,defaultProp:s??!1,onChange:a,caller:at}),[F,P]=nt({prop:i,defaultProp:c,onChange:l,caller:at}),N=h.useRef(null),A=g?b||!!g.closest("form"):!0,[O,z]=h.useState(new Set),H=Array.from(O).map(I=>I.props.value).join(";");return o.jsx(la,{...p,children:o.jsxs(Zf,{required:v,scope:t,trigger:g,onTriggerChange:x,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:j,contentId:rt(),value:F,onValueChange:P,open:T,onOpenChange:S,dir:R,triggerPointerDownPosRef:N,disabled:d,children:[o.jsx(Nr.Provider,{scope:t,children:o.jsx(Jf,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(I=>{z(G=>new Set(G).add(I))},[]),onNativeOptionRemove:h.useCallback(I=>{z(G=>{const M=new Set(G);return M.delete(I),M})},[]),children:r})}),A?o.jsxs(Ja,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:f,value:F,onChange:I=>P(I.target.value),disabled:d,form:b,children:[F===void 0?o.jsx("option",{value:""}):null,Array.from(O)]},H):null]})})};Ma.displayName=at;var Ta="SelectTrigger",Aa=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=kr(r),i=Ye(Ta,r),c=i.disabled||n,l=oe(t,i.onTriggerChange),u=jr(r),m=h.useRef("touch"),[f,d,v]=ei(p=>{const g=u().filter(w=>!w.disabled),x=g.find(w=>w.value===i.value),y=ti(g,p,x);y!==void 0&&i.onValueChange(y.value)}),b=p=>{c||(i.onOpenChange(!0),v()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return o.jsx(ua,{asChild:!0,...a,children:o.jsx(X.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Qa(i.value)?"":void 0,...s,ref:l,onClick:U(s.onClick,p=>{p.currentTarget.focus(),m.current!=="mouse"&&b(p)}),onPointerDown:U(s.onPointerDown,p=>{m.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(b(p),p.preventDefault())}),onKeyDown:U(s.onKeyDown,p=>{const g=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(g&&p.key===" ")&&qf.includes(p.key)&&(b(),p.preventDefault())})})})});Aa.displayName=Ta;var Ra="SelectValue",_a=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:i="",...c}=e,l=Ye(Ra,r),{onValueNodeHasChildrenChange:u}=l,m=a!==void 0,f=oe(t,l.onValueNodeChange);return de(()=>{u(m)},[u,m]),o.jsx(X.span,{...c,ref:f,style:{pointerEvents:"none"},children:Qa(l.value)?o.jsx(o.Fragment,{children:i}):a})});_a.displayName=Ra;var em="SelectIcon",Pa=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return o.jsx(X.span,{"aria-hidden":!0,...s,ref:t,children:n||"â¼"})});Pa.displayName=em;var tm="SelectPortal",Ia=e=>o.jsx(kn,{asChild:!0,...e});Ia.displayName=tm;var it="SelectContent",Da=h.forwardRef((e,t)=>{const r=Ye(it,e.__scopeSelect),[n,s]=h.useState();if(de(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?Wt.createPortal(o.jsx(Oa,{scope:e.__scopeSelect,children:o.jsx(Nr.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(Fa,{...e,ref:t})});Da.displayName=it;var Se=10,[Oa,Xe]=St(it),rm="SelectContentImpl",nm=mt("SelectContent.RemoveScroll"),Fa=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:d,collisionPadding:v,sticky:b,hideWhenDetached:p,avoidCollisions:g,...x}=e,y=Ye(it,r),[w,C]=h.useState(null),[j,R]=h.useState(null),T=oe(t,L=>C(L)),[S,F]=h.useState(null),[P,N]=h.useState(null),A=jr(r),[O,z]=h.useState(!1),H=h.useRef(!1);h.useEffect(()=>{if(w)return pa(w)},[w]),Ms();const I=h.useCallback(L=>{const[K,...J]=A().map(se=>se.ref.current),[Q]=J.slice(-1),re=document.activeElement;for(const se of L)if(se===re||(se==null||se.scrollIntoView({block:"nearest"}),se===K&&j&&(j.scrollTop=0),se===Q&&j&&(j.scrollTop=j.scrollHeight),se==null||se.focus(),document.activeElement!==re))return},[A,j]),G=h.useCallback(()=>I([S,w]),[I,S,w]);h.useEffect(()=>{O&&G()},[O,G]);const{onOpenChange:M,triggerPointerDownPosRef:D}=y;h.useEffect(()=>{if(w){let L={x:0,y:0};const K=Q=>{var re,se;L={x:Math.abs(Math.round(Q.pageX)-(((re=D.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((se=D.current)==null?void 0:se.y)??0))}},J=Q=>{L.x<=10&&L.y<=10?Q.preventDefault():w.contains(Q.target)||M(!1),document.removeEventListener("pointermove",K),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",J,{capture:!0})}}},[w,M,D]),h.useEffect(()=>{const L=()=>M(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[M]);const[E,$]=ei(L=>{const K=A().filter(re=>!re.disabled),J=K.find(re=>re.ref.current===document.activeElement),Q=ti(K,L,J);Q&&setTimeout(()=>Q.ref.current.focus())}),q=h.useCallback((L,K,J)=>{const Q=!H.current&&!J;(y.value!==void 0&&y.value===K||Q)&&(F(L),Q&&(H.current=!0))},[y.value]),Y=h.useCallback(()=>w==null?void 0:w.focus(),[w]),te=h.useCallback((L,K,J)=>{const Q=!H.current&&!J;(y.value!==void 0&&y.value===K||Q)&&N(L)},[y.value]),ae=n==="popper"?_n:La,le=ae===_n?{side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:d,collisionPadding:v,sticky:b,hideWhenDetached:p,avoidCollisions:g}:{};return o.jsx(Oa,{scope:r,content:w,viewport:j,onViewportChange:R,itemRefCallback:q,selectedItem:S,onItemLeave:Y,itemTextRefCallback:te,focusSelectedItem:G,selectedItemText:P,position:n,isPositioned:O,searchRef:E,children:o.jsx(Rn,{as:nm,allowPinchZoom:!0,children:o.jsx(un,{asChild:!0,trapped:y.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:U(s,L=>{var K;(K=y.trigger)==null||K.focus({preventScroll:!0}),L.preventDefault()}),children:o.jsx(sn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:o.jsx(ae,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:L=>L.preventDefault(),...x,...le,onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:U(x.onKeyDown,L=>{const K=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!K&&L.key.length===1&&$(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let Q=A().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(L.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const re=L.target,se=Q.indexOf(re);Q=Q.slice(se+1)}setTimeout(()=>I(Q)),L.preventDefault()}})})})})})})});Fa.displayName=rm;var om="SelectItemAlignedPosition",La=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=Ye(it,r),i=Xe(it,r),[c,l]=h.useState(null),[u,m]=h.useState(null),f=oe(t,T=>m(T)),d=jr(r),v=h.useRef(!1),b=h.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=i,w=h.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&u&&p&&g&&x){const T=a.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),F=a.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(a.dir!=="rtl"){const re=P.left-S.left,se=F.left-re,Ce=T.left-se,Oe=T.width+Ce,Ht=Math.max(Oe,S.width),Ut=window.innerWidth-Se,Gt=nr(se,[Se,Math.max(Se,Ut-Ht)]);c.style.minWidth=Oe+"px",c.style.left=Gt+"px"}else{const re=S.right-P.right,se=window.innerWidth-F.right-re,Ce=window.innerWidth-T.right-se,Oe=T.width+Ce,Ht=Math.max(Oe,S.width),Ut=window.innerWidth-Se,Gt=nr(se,[Se,Math.max(Se,Ut-Ht)]);c.style.minWidth=Oe+"px",c.style.right=Gt+"px"}const N=d(),A=window.innerHeight-Se*2,O=p.scrollHeight,z=window.getComputedStyle(u),H=parseInt(z.borderTopWidth,10),I=parseInt(z.paddingTop,10),G=parseInt(z.borderBottomWidth,10),M=parseInt(z.paddingBottom,10),D=H+I+O+M+G,E=Math.min(g.offsetHeight*5,D),$=window.getComputedStyle(p),q=parseInt($.paddingTop,10),Y=parseInt($.paddingBottom,10),te=T.top+T.height/2-Se,ae=A-te,le=g.offsetHeight/2,L=g.offsetTop+le,K=H+I+L,J=D-K;if(K<=te){const re=N.length>0&&g===N[N.length-1].ref.current;c.style.bottom="0px";const se=u.clientHeight-p.offsetTop-p.offsetHeight,Ce=Math.max(ae,le+(re?Y:0)+se+G),Oe=K+Ce;c.style.height=Oe+"px"}else{const re=N.length>0&&g===N[0].ref.current;c.style.top="0px";const Ce=Math.max(te,H+p.offsetTop+(re?q:0)+le)+J;c.style.height=Ce+"px",p.scrollTop=K-te+p.offsetTop}c.style.margin=`${Se}px 0`,c.style.minHeight=E+"px",c.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>v.current=!0)}},[d,a.trigger,a.valueNode,c,u,p,g,x,a.dir,n]);de(()=>w(),[w]);const[C,j]=h.useState();de(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const R=h.useCallback(T=>{T&&b.current===!0&&(w(),y==null||y(),b.current=!1)},[w,y]);return o.jsx(am,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:R,children:o.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:o.jsx(X.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});La.displayName=om;var sm="SelectPopperPosition",_n=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Se,...a}=e,i=kr(r);return o.jsx(da,{...i,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_n.displayName=sm;var[am,Pn]=St(it,{}),In="SelectViewport",za=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=Xe(In,r),i=Pn(In,r),c=oe(t,a.onViewportChange),l=h.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Nr.Slot,{scope:r,children:o.jsx(X.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:U(s.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=i;if(d!=null&&d.current&&f){const v=Math.abs(l.current-m.scrollTop);if(v>0){const b=window.innerHeight-Se*2,p=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),x=Math.max(p,g);if(x<b){const y=x+v,w=Math.min(b,y),C=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(m.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}l.current=m.scrollTop})})})]})});za.displayName=In;var Ba="SelectGroup",[im,cm]=St(Ba),lm=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=rt();return o.jsx(im,{scope:r,id:s,children:o.jsx(X.div,{role:"group","aria-labelledby":s,...n,ref:t})})});lm.displayName=Ba;var Va="SelectLabel",$a=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=cm(Va,r);return o.jsx(X.div,{id:s.id,...n,ref:t})});$a.displayName=Va;var Er="SelectItem",[um,Ha]=St(Er),Ua=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...i}=e,c=Ye(Er,r),l=Xe(Er,r),u=c.value===n,[m,f]=h.useState(a??""),[d,v]=h.useState(!1),b=oe(t,y=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,y,n,s)}),p=rt(),g=h.useRef("touch"),x=()=>{s||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(um,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:h.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:o.jsx(Nr.ItemSlot,{scope:r,value:n,disabled:s,textValue:m,children:o.jsx(X.div,{role:"option","aria-labelledby":p,"data-highlighted":d?"":void 0,"aria-selected":u&&d,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:b,onFocus:U(i.onFocus,()=>v(!0)),onBlur:U(i.onBlur,()=>v(!1)),onClick:U(i.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:U(i.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:U(i.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:U(i.onPointerMove,y=>{var w;g.current=y.pointerType,s?(w=l.onItemLeave)==null||w.call(l):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:U(i.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:U(i.onKeyDown,y=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(Yf.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});Ua.displayName=Er;var Ot="SelectItemText",Ga=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,i=Ye(Ot,r),c=Xe(Ot,r),l=Ha(Ot,r),u=Qf(Ot,r),[m,f]=h.useState(null),d=oe(t,x=>f(x),l.onItemTextChange,x=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,x,l.value,l.disabled)}),v=m==null?void 0:m.textContent,b=h.useMemo(()=>o.jsx("option",{value:l.value,disabled:l.disabled,children:v},l.value),[l.disabled,l.value,v]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return de(()=>(p(b),()=>g(b)),[p,g,b]),o.jsxs(o.Fragment,{children:[o.jsx(X.span,{id:l.textId,...a,ref:d}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Wt.createPortal(a.children,i.valueNode):null]})});Ga.displayName=Ot;var Wa="SelectItemIndicator",Ka=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Ha(Wa,r).isSelected?o.jsx(X.span,{"aria-hidden":!0,...n,ref:t}):null});Ka.displayName=Wa;var Dn="SelectScrollUpButton",qa=h.forwardRef((e,t)=>{const r=Xe(Dn,e.__scopeSelect),n=Pn(Dn,e.__scopeSelect),[s,a]=h.useState(!1),i=oe(t,n.onScrollButtonChange);return de(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollTop>0;a(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?o.jsx(Xa,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});qa.displayName=Dn;var On="SelectScrollDownButton",Ya=h.forwardRef((e,t)=>{const r=Xe(On,e.__scopeSelect),n=Pn(On,e.__scopeSelect),[s,a]=h.useState(!1),i=oe(t,n.onScrollButtonChange);return de(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,m=Math.ceil(l.scrollTop)<u;a(m)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?o.jsx(Xa,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});Ya.displayName=On;var Xa=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=Xe("SelectScrollButton",r),i=h.useRef(null),c=jr(r),l=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>l(),[l]),de(()=>{var m;const u=c().find(f=>f.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),o.jsx(X.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:U(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:U(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:U(s.onPointerLeave,()=>{l()})})}),dm="SelectSeparator",Za=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return o.jsx(X.div,{"aria-hidden":!0,...n,ref:t})});Za.displayName=dm;var Fn="SelectArrow",fm=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=kr(r),a=Ye(Fn,r),i=Xe(Fn,r);return a.open&&i.position==="popper"?o.jsx(fa,{...s,...n,ref:t}):null});fm.displayName=Fn;var mm="SelectBubbleInput",Ja=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=h.useRef(null),a=oe(n,s),i=Jr(t);return h.useEffect(()=>{const c=s.current;if(!c)return;const l=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&m){const f=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(f)}},[i,t]),o.jsx(X.select,{...r,style:{...ma,...r.style},ref:a,defaultValue:t})});Ja.displayName=mm;function Qa(e){return e===""||e===void 0}function ei(e){const t=Ae(e),r=h.useRef(""),n=h.useRef(0),s=h.useCallback(i=>{const c=r.current+i;t(c),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),a=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function ti(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=hm(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const l=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function hm(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var pm=Ma,ri=Aa,gm=_a,vm=Pa,xm=Ia,ni=Da,ym=za,oi=$a,si=Ua,bm=Ga,wm=Ka,ai=qa,ii=Ya,ci=Za;/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nm=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),li=e=>{const t=Nm(e);return t.charAt(0).toUpperCase()+t.slice(1)},ui=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),jm=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var km={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...c},l)=>_.createElement("svg",{ref:l,...km,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ui("lucide",s),...!a&&!jm(c)&&{"aria-hidden":"true"},...c},[...i.map(([u,m])=>_.createElement(u,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const r=_.forwardRef(({className:n,...s},a)=>_.createElement(Em,{ref:a,iconNode:t,className:ui(`lucide-${Cm(li(e))}`,`lucide-${e}`,n),...s}));return r.displayName=li(e),r};/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=me("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=me("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=me("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=me("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=me("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=me("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=me("cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=me("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=me("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=me("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=me("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=me("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=me("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=me("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=me("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ct=pm,lt=gm,Ze=h.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(ri,{ref:n,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,o.jsx(vm,{asChild:!0,children:o.jsx(Ln,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=ri.displayName;const fi=h.forwardRef(({className:e,...t},r)=>o.jsx(ai,{ref:r,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Mm,{className:"h-4 w-4"})}));fi.displayName=ai.displayName;const mi=h.forwardRef(({className:e,...t},r)=>o.jsx(ii,{ref:r,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Ln,{className:"h-4 w-4"})}));mi.displayName=ii.displayName;const Je=h.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>o.jsx(xm,{children:o.jsxs(ni,{ref:s,className:ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[o.jsx(fi,{}),o.jsx(ym,{className:ee("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(mi,{})]})}));Je.displayName=ni.displayName;const Fm=h.forwardRef(({className:e,...t},r)=>o.jsx(oi,{ref:r,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Fm.displayName=oi.displayName;const Qe=h.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(si,{ref:n,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(wm,{children:o.jsx(di,{className:"h-4 w-4"})})}),o.jsx(bm,{children:t})]}));Qe.displayName=si.displayName;const Lm=h.forwardRef(({className:e,...t},r)=>o.jsx(ci,{ref:r,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));Lm.displayName=ci.displayName;function zm({planetStats:e,setPlanetStats:t,selectedBiome:r}){var l,u,m,f;const n=et(e.mass,e.radius),s=so(e.temperature),a=ao(e.temperature,e.liquidType||s.type),i=(d,v)=>{t({...e,[d]:v,...d==="liquidEnabled"&&v===!0?{waterLevel:Math.max(e.waterLevel||0,.5)}:{}})},c=d=>gc(r,d);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"SURFACE CONFIGURATION"})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Surface Roughness"}),o.jsx("span",{className:"font-bold",children:((l=e.surfaceRoughness)==null?void 0:l.toFixed(2))||"0.00"})]}),o.jsx(Re,{value:[e.surfaceRoughness||0],min:c("surfaceRoughness")[0],max:c("surfaceRoughness")[1],step:.01,onValueChange:d=>i("surfaceRoughness",d[0]),className:"[&_[role=slider]]:bg-cyan-400"})]})})]}),n==="terrestrial"&&o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"TERRAIN COMPOSITION"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Soil Type"}),o.jsxs(ct,{value:e.soilType,onValueChange:d=>i("soilType",d),children:[o.jsx(Ze,{className:"bg-slate-800 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select soil type"})}),o.jsx(Je,{className:"bg-slate-800 border-slate-600 text-blue-100",children:["rocky","sandy","volcanic","organic","dusty","frozen","muddy"].map(d=>o.jsx(Qe,{value:d,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Soil Texture"}),o.jsxs(ct,{value:e.soilTexture,onValueChange:d=>i("soilTexture",d),children:[o.jsx(Ze,{className:"bg-slate-800 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select soil texture"})}),o.jsx(Je,{className:"bg-slate-800 border-slate-600 text-blue-100",children:["smooth","rough","cracked","layered","porous","grainy","crystalline"].map(d=>o.jsx(Qe,{value:d,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Mountain Height"}),o.jsx("span",{className:"font-bold",children:((u=e.mountainHeight)==null?void 0:u.toFixed(2))||"0.00"})]}),o.jsx(Re,{value:[e.mountainHeight||0],min:0,max:1,step:.01,onValueChange:d=>i("mountainHeight",d[0]),className:"[&_[role=slider]]:bg-cyan-400"})]})]})]}),n==="terrestrial"&&o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"HYDROSPHERE"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Water Level"}),o.jsx("span",{className:"font-bold",children:((m=e.waterLevel)==null?void 0:m.toFixed(2))||"0.00"})]}),o.jsx(Re,{value:[e.waterLevel||0],min:c("waterLevel")[0],max:c("waterLevel")[1],step:.01,onValueChange:d=>i("waterLevel",d[0]),className:"[&_[role=slider]]:bg-cyan-400"}),!a&&o.jsxs("div",{className:"flex items-center gap-2 text-amber-300 text-xs",children:[o.jsx(zn,{className:"h-4 w-4"}),o.jsxs("span",{children:["Temperature is not suitable for ",e.liquidType||"water"," to exist as a liquid"]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(W,{className:"text-cyan-200",children:"Enable Liquid"}),o.jsx(Ns,{checked:e.liquidEnabled!==!1,onCheckedChange:d=>i("liquidEnabled",d),className:"data-[state=checked]:bg-cyan-600"})]}),o.jsx("p",{className:"text-xs text-slate-400",children:"When enabled, liquid will cover at least half the surface"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Liquid Type"}),o.jsxs(ct,{value:e.liquidType,onValueChange:d=>i("liquidType",d),children:[o.jsx(Ze,{className:"bg-slate-800 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select liquid type"})}),o.jsx(Je,{className:"bg-slate-800 border-slate-600 text-blue-100",children:["water","methane","nitrogen","ammonia","ethane"].map(d=>o.jsx(Qe,{value:d,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]})]})]})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"ATMOSPHERE"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Atmosphere Strength"}),o.jsx("span",{className:"font-bold",children:((f=e.atmosphereStrength)==null?void 0:f.toFixed(2))||"0.00"})]}),o.jsx(Re,{value:[e.atmosphereStrength||0],min:c("atmosphereStrength")[0],max:c("atmosphereStrength")[1],step:.01,onValueChange:d=>i("atmosphereStrength",d[0]),className:"[&_[role=slider]]:bg-cyan-400"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(W,{className:"text-cyan-200",children:"Cloud Count"}),o.jsx("span",{className:"font-bold",children:e.cloudCount||0})]}),o.jsx(Re,{value:[e.cloudCount||0],min:c("cloudCount")[0],max:c("cloudCount")[1],step:1,onValueChange:d=>i("cloudCount",d[0]),className:"[&_[role=slider]]:bg-cyan-400"})]})]})]})]})}const ie=h.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ie.displayName="Input";const Bm=Zr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const i=n?nl:"button";return o.jsx(i,{className:ee(Bm({variant:t,size:r,className:e})),ref:a,...s})});ce.displayName="Button";function Vm({planetStats:e,setPlanetStats:t,selectedBiome:r,setSelectedBiome:n,customColors:s,setCustomColors:a}){const i=vc(),c=(l,u)=>{const m={...s,[l]:u};a(m),t({...e,customColors:m})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"BIOME SELECTION"})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Biome Type"}),o.jsxs(ct,{value:r,onValueChange:n,children:[o.jsx(Ze,{className:"bg-slate-800 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select biome"})}),o.jsx(Je,{className:"bg-slate-800 border-slate-600 text-blue-100",children:i.map(l=>o.jsx(Qe,{value:l,children:l},l))})]}),o.jsx("p",{className:"text-xs text-slate-400",children:"Selecting a biome will adjust parameters to fit within biome ranges"})]})})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"COLOR CUSTOMIZATION"})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(W,{className:"text-cyan-200",children:"Custom Colors"}),o.jsx(Im,{className:"h-4 w-4 text-cyan-300"})]}),o.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Customize terrain colors for each height level"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:["oceanFloor","beach","regular","mountain"].map(l=>o.jsxs(_.Fragment,{children:[o.jsx(W,{className:"text-xs text-cyan-200",children:l.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase())}),o.jsx(ie,{type:"color",value:s[l]||"#5D4037",onChange:u=>c(l,u.target.value),className:"h-8 p-1 bg-slate-800 border-slate-600"})]},l))}),o.jsx(ce,{variant:"outline",size:"sm",className:"mt-3 w-full border-slate-600 text-blue-100 hover:bg-cyan-900/20",onClick:()=>a({oceanFloor:"",beach:"",regular:"",mountain:""}),children:"Reset to Biome Default Colors"})]})})]})]})}const $m=Zr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Bn=h.forwardRef(({className:e,variant:t,...r},n)=>o.jsx("div",{ref:n,role:"alert",className:ee($m({variant:t}),e),...r}));Bn.displayName="Alert";const Hm=h.forwardRef(({className:e,...t},r)=>o.jsx("h5",{ref:r,className:ee("mb-1 font-medium leading-none tracking-tight",e),...t}));Hm.displayName="AlertTitle";const Vn=h.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:ee("text-sm [&_p]:leading-relaxed",e),...t}));Vn.displayName="AlertDescription";const Um=["mountain","crater","valley","basin","canyon","volcano","dune","glacier","trench","ocean_ridge","ice_patch","lava_flow"];function Gm(e,t,r,n,s,a,i,c,l){for(let m=0;m<t.count;m++){const f=t.getX(m),d=t.getY(m);t.getZ(m);const v=Math.sqrt(f*f+d*d),p=Math.max(0,1-v/(i*2))*c*2.5;let g=0,x=new k.Color(10586239);switch(a){case"crater":g=Wm(v,p,i),x=new k.Color(9268835);break;case"mountain":g=Km(v,p,i),x=new k.Color(10586239),g>.5&&x.lerp(new k.Color(16777215),(g-.5)*2);break;case"volcano":g=qm(v,p,i);const j=Math.max(0,Math.min(1,g/1.5));x=new k.Color(6111287).lerp(new k.Color(12531212),j);break;case"valley":case"canyon":g=Ym(d,p,i),x=new k.Color(7951688);break;case"basin":g=Xm(v,p,i),x=new k.Color(9268835);break;case"dune":g=Zm(v,f,p,i),x=new k.Color(14142664);break;case"glacier":g=Jm(v,f,d,p,i),x=new k.Color(14743546);break;case"ocean_ridge":g=Qm(d,f,p,i),x=new k.Color(166097);break;case"trench":g=eh(d,p,i),x=new k.Color(87963);break;case"ice_patch":g=th(v,f,d,p,i),x=new k.Color(15527921);break;case"lava_flow":g=rh(v,f,d,p,i),x=new k.Color(14172949);break;default:g=p*ne(f*5,d*5,0)*.8,x=new k.Color(10586239)}const y=(s.surfaceRoughness||.5)*l,w=8+y*15,C=y*.4;g+=ne(f*w,d*w,0)*C,t.setZ(m,g),r[m*3]=x.r,r[m*3+1]=x.g,r[m*3+2]=x.b}t.needsUpdate=!0,e.computeVertexNormals(),e.setAttribute("color",new k.BufferAttribute(r,3));const u=new k.MeshStandardMaterial({vertexColors:!0,roughness:.7,metalness:.1,flatShading:!1});if(a==="volcano"?(u.emissive.set("#ff2200"),u.emissiveIntensity=.2):a==="glacier"||a==="trench"||a==="ocean_ridge"?(u.roughness=.3,u.metalness=.2):a==="lava_flow"?(u.emissive.set("#ff3300"),u.emissiveIntensity=.3,u.roughness=.5):a==="ice_patch"&&(u.roughness=.2,u.metalness=.3,u.envMapIntensity=1.5),s.soilType)switch(s.soilType){case"volcanic":u.roughness=.9,a!=="volcano"&&a!=="lava_flow"&&(u.emissive.set("#ff4400"),u.emissiveIntensity=.1);break;case"sandy":u.roughness=Math.min(u.roughness+.1,1);break;case"frozen":u.roughness=Math.max(u.roughness-.2,.1),u.metalness=Math.min(u.metalness+.1,1);break}return{geometry:e,material:u}}function Wm(e,t,r){return e<r*.8?-t*1.2+ne(e*10,0,0)*t*.1:e<r*1.2?t*.8:0}function Km(e,t,r){return t*1.5*Math.exp(-e/(r*.6))+ne(e*15,e*15,0)*t*.3}function qm(e,t,r){return e<r*.2?-t*.8+ne(e*20,e*20,0)*t*.1:t*1.8*Math.exp(-e/(r*.4))+ne(e*12,e*12,0)*t*.2}function Ym(e,t,r){const n=Math.abs(e);return n<r*.3?-t*1.2+ne(e*25,e*5,0)*t*.15:n<r*.5?t*.4*(1-(n-r*.3)/(r*.2)):0}function Xm(e,t,r){return-t*.8*Math.exp(-e/(r*1.5))+ne(e*8,e*8,0)*t*.15}function Zm(e,t,r,n){return r*.8*Math.sin(e*8/n)+r*.3*Math.sin(t*12/n)}function Jm(e,t,r,n,s){const a=n*.8*(1-Math.pow(e/s,1.5)),i=ne(t*20,r*20,0);return i>.7?a-n*.4*(i-.7)*3:a}function Qm(e,t,r,n){const s=Math.abs(e);return r*.8*Math.exp(-s/(n*.2))+ne(t*15,e*5,0)*r*.2}function eh(e,t,r){const n=Math.abs(e);return n<r*.2?-t*1.5+ne(e*20,e*5,0)*t*.1:n<r*.4?-t*(1-(n-r*.2)/(r*.2)):0}function th(e,t,r,n,s){const a=n*.3*Math.exp(-e/(s*.8)),c=ne(t*30,r*30,0)>.7?n*.15:0;return a+c}function rh(e,t,r,n,s){const a=n*.4*Math.exp(-e/(s*.7)),i=ne(t*8,r*8,0),l=Math.sin(t*5+r*5+i*10)*.5+.5<.3?-n*.2:0;return a+l}const nh=["storm","vortex","band","spot","turbulent","cyclone","anticyclone","zonal_flow","jet_stream","cloud_layer","atmospheric_haze"];function oh(e,t,r,n,s,a,i,c,l){for(let m=0;m<t.count;m++){const f=t.getX(m),d=t.getY(m);t.getZ(m);const v=Math.sqrt(f*f+d*d),p=Math.max(0,1-v/(i*2))*c*2.5;let g=0,x=new k.Color(15037299);switch(a){case"storm":g=sh(v,f,d,p,i),x=new k.Color(15037299);break;case"vortex":g=ah(f,d,v,p,i),x=new k.Color(8508666);break;case"band":g=ih(d,p),x=new k.Color(16766287);break;case"spot":g=ch(f,d,v,p,i),x=new k.Color(16747109);break;case"turbulent":g=lh(f,d,p),x=new k.Color(9795021);break;case"cyclone":g=uh(f,d,v,p,i),x=new k.Color(5227511);break;case"anticyclone":g=dh(f,d,v,p,i),x=new k.Color(16773494);break;case"zonal_flow":g=fh(f,d,p),x=new k.Color(11457921);break;case"jet_stream":g=mh(f,d,p,i),x=new k.Color(6600182);break;case"cloud_layer":g=hh(f,d,v,p),x=new k.Color(15527921);break;case"atmospheric_haze":g=ph(f,d,v,p),x=new k.Color(11771355);break;default:g=p*ne(f*5,d*5,0)*.6,g+=p*.4*Math.sin(f*8+d*8),x=new k.Color(11583173)}g+=ne(f*15,d*15,0)*p*.2,t.setZ(m,g),r[m*3]=x.r,r[m*3+1]=x.g,r[m*3+2]=x.b}t.needsUpdate=!0,e.computeVertexNormals(),e.setAttribute("color",new k.BufferAttribute(r,3));const u=new k.MeshStandardMaterial({vertexColors:!0,roughness:.3,metalness:.1,flatShading:!1,transparent:!0,opacity:.9});return{geometry:e,material:u}}function sh(e,t,r,n,s){return n*Math.exp(-e/(s*.5))+n*.3*Math.sin(Math.atan2(r,t)*5+e*10)}function ah(e,t,r,n,s){const a=Math.atan2(t,e);return n*Math.sin(a*8+r*15)*Math.exp(-r/s)}function ih(e,t){return t*Math.sin(e*15)}function ch(e,t,r,n,s){const a=e/.7,i=Math.sqrt(a*a+t*t);return n*(1-Math.min(1,i/s))}function lh(e,t,r){return r*ne(e*10,t*10,0)+r*.5*ne(e*20,t*20,0)}function uh(e,t,r,n,s){const a=Math.atan2(t,e),i=r*10+a*3;return n*Math.sin(i)*Math.exp(-r/s)}function dh(e,t,r,n,s){const a=Math.atan2(t,e),i=r*10-a*3;return n*Math.sin(i)*Math.exp(-r/s)}function fh(e,t,r){return r*Math.sin(t*20)*.5+r*Math.sin(t*10+e*2)*.3}function mh(e,t,r,n){const s=n*.2,a=Math.sin(e*2)*.3,i=Math.abs(t-a);if(i<s){const c=1-i/s;return r*c*(.7+.3*Math.sin(e*15))}return 0}function hh(e,t,r,n){const s=n*.3*(.8+.2*Math.sin(e*3+t*3)),a=ne(e*12,t*12,0),i=a>.6?(a-.6)*n*.8:0;return s+i}function ph(e,t,r,n){const s=n*.2,a=ne(e*5,t*5,0)*n*.1,i=n*.1*Math.sin(e*3+t*2);return s+a+i}function hi(e="terrestrial"){return e==="gaseous"?nh:Um}function pi(e){return{mountain:"Mountain Range",crater:"Impact Crater",valley:"Valley",basin:"Basin",canyon:"Canyon",trench:"Oceanic Trench",dune:"Dune Field",volcano:"Volcano",glacier:"Glacier",ocean_ridge:"Ocean Ridge",ice_patch:"Ice Patch",lava_flow:"Lava Flow",storm:"Storm System",vortex:"Vortex",band:"Cloud Band",spot:"Persistent Spot",turbulent:"Turbulent Region",cyclone:"Cyclonic Storm",anticyclone:"Anticyclonic System",zonal_flow:"Zonal Flow Pattern",jet_stream:"Jet Stream",cloud_layer:"Cloud Layer",atmospheric_haze:"Atmospheric Haze"}[e]||e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}function gh(e,t,r){const n=new k.PlaneGeometry(3,3,128,128),s=e.influence_type||"mountain",a=e.influence_radius||.5,i=e.influence_strength||.5,c=e.influence_roughness||.5,l=n.getAttribute("position"),u=new Float32Array(l.count*3);return r||e.category==="gaseous"?oh(n,l,u,e,t,s,a,i):Gm(n,l,u,e,t,s,a,i,c)}function vh({point:e}){return e?o.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/90 text-green-400 p-2 text-xs border border-green-500/30 rounded-md max-w-[180px]",children:[o.jsx("div",{className:"font-bold border-b border-green-500/30 pb-1 mb-1",children:"SURFACE SCAN"}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1",children:[o.jsx("span",{className:"text-green-500/70",children:"POS:"}),o.jsxs("span",{children:[e.position.x.toFixed(1),",",e.position.y.toFixed(1),",",e.position.z.toFixed(1)]}),o.jsx("span",{className:"text-green-500/70",children:"HEIGHT:"}),o.jsx("span",{children:e.height.toFixed(2)})]})]}):null}function xh({structure:e,onClick:t,isSelected:r}){return o.jsx("mesh",{geometry:e.geometry,material:e.material,position:[e.position.x,e.position.y,e.position.z],rotation:[e.rotation.x,e.rotation.y,e.rotation.z],scale:[e.scale[0],e.scale[1],e.scale[2]],castShadow:!0,onClick:n=>{n.stopPropagation(),t()},children:o.jsx(pe.Html,{position:[0,e.scale[1]+.1,0],center:!0,children:o.jsx("div",{className:`bg-black/80 ${r?"text-yellow-400 border-yellow-500/50":"text-cyan-400 border-cyan-500/50"} px-1 py-0.5 text-[10px] rounded border whitespace-nowrap`,children:e.name})})})}function yh({structure:e,updateStructure:t,onClose:r}){return o.jsxs("div",{className:"absolute left-2 top-2 bg-black/90 text-green-400 p-3 text-xs border border-green-500/30 rounded-md w-64",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 border-b border-green-500/30 pb-1",children:[o.jsxs("div",{className:"font-bold",children:["EDIT STRUCTURE: ",e.name]}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:r,className:"h-5 w-5 p-0 text-green-400 hover:text-green-300 hover:bg-transparent",children:"Ã"})]}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsx("div",{className:"space-y-1 col-span-3",children:o.jsx(W,{className:"text-xs",children:"Position"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"X"}),o.jsx(ie,{type:"number",value:e.position.x,onChange:n=>t("position",{...e.position,x:Number.parseFloat(n.target.value)}),className:"h-7 text-xs bg-black border-green-500/30 text-green-400",step:"0.01"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Y"}),o.jsx(ie,{type:"number",value:e.position.y,onChange:n=>t("position",{...e.position,y:Number.parseFloat(n.target.value)}),className:"h-7 text-xs bg-black border-green-500/30 text-green-400",step:"0.01"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Z"}),o.jsx(ie,{type:"number",value:e.position.z,onChange:n=>t("position",{...e.position,z:Number.parseFloat(n.target.value)}),className:"h-7 text-xs bg-black border-green-500/30 text-green-400",step:"0.01"})]})]})})]})}function bh({landmark:e,planetStats:t,updateLandmark:r}){const n=_.useRef(null),s=t.mass>7||t.radius>2.5,[a,i]=_.useState(null),[c,l]=_.useState(null),{geometry:u,material:m}=_.useMemo(()=>gh(e,t,s),[e,t,s]),f=_.useMemo(()=>!e.structures||e.structures.length===0?[]:e.structures.map(y=>{const w=uo(y.type),C=fo(y),j={x:y.position.x*.5,y:y.position.y*.5+.1,z:y.position.z*.5},R={x:y.rotation.x*Math.PI,y:y.rotation.y*Math.PI,z:y.rotation.z*Math.PI},T=[y.scale.x*.2,y.scale.y*.2,y.scale.z*.2];return{id:y.id,name:y.name,geometry:w,material:C,position:j,rotation:R,scale:T,originalStructure:y}}),[e.structures]),d=y=>{y.stopPropagation();const w=y.point,C=w.clone().normalize();i({position:w,normalizedPosition:C,height:w.y}),l(null)},v=y=>{l(y),i(null)},b=()=>{const y=Xt("building"),w=[...e.structures||[],y];r("structures",w),l(y.id)},p=()=>{if(!c||!e.structures)return;const y=e.structures.filter(w=>w.id!==c);r("structures",y),l(null)},g=(y,w)=>{if(!c||!e.structures)return;const C=[...e.structures],j=C.findIndex(R=>R.id===c);j!==-1&&(y==="position"||y==="rotation"||y==="scale"?C[j]={...C[j],[y]:typeof C[j][y]=="object"&&C[j][y]!==null&&typeof C[j][y]=="object"&&C[j][y]!==null?typeof C[j][y]=="object"&&C[j][y]!==null:w}:C[j]={...C[j],[y]:w},r("structures",C))},x=_.useMemo(()=>!c||!e.structures?null:e.structures.find(y=>y.id===c)||null,[c,e.structures]);return o.jsxs("div",{className:"relative w-full h-full",children:[o.jsxs(Me.Canvas,{camera:{position:[0,1.8,2.2],fov:45},children:[o.jsx("ambientLight",{intensity:.5}),o.jsx("pointLight",{position:[2,3,4],intensity:1.2}),o.jsx("directionalLight",{position:[-2,2,1],intensity:.8,castShadow:!0}),o.jsx("mesh",{ref:n,rotation:[-Math.PI/4,0,0],geometry:u,material:m,receiveShadow:!0,castShadow:!0,onClick:d}),f.map(y=>o.jsx(xh,{structure:y,onClick:()=>v(y.id),isSelected:y.id===c},y.id)),o.jsx(pe.OrbitControls,{enableZoom:!0,enablePan:!0,enableRotate:!0}),o.jsx("gridHelper",{args:[6,10,"#444444","#222222"],position:[0,-.01,0]})]}),o.jsx(vh,{point:a}),o.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[o.jsxs(ce,{size:"sm",variant:"outline",className:"h-7 px-2 bg-black/70 border-green-500/30 text-green-400 hover:bg-green-900/20",onClick:b,children:[o.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Add Structure"]}),c&&o.jsxs(ce,{size:"sm",variant:"outline",className:"h-7 px-2 bg-black/70 border-red-500/30 text-red-400 hover:bg-red-900/20",onClick:p,children:[o.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Remove"]})]}),x&&o.jsx(yh,{structure:x,updateStructure:g,onClose:()=>l(null)})]})}function wh(){const e=Math.random()*Math.PI*2,t=Math.random()*Math.PI,r=Math.sin(t)*Math.cos(e),n=Math.sin(t)*Math.sin(e),s=Math.cos(t);return{x:Number.parseFloat(r.toFixed(2)),y:Number.parseFloat(n.toFixed(2)),z:Number.parseFloat(s.toFixed(2))}}function Ch({planetStats:e,setPlanetStats:t}){var T,S,F,P;const r=et(e.mass,e.radius),n=r==="gaseous",[s,a]=_.useState(r),[i,c]=_.useState({classification_id:"",type:"",visual_effect:"",image_link:"",coordinates:{x:0,y:0,z:0},influence_radius:.5,influence_strength:.7,influence_type:n?"storm":"mountain",category:n?"gaseous":"terrestrial",events:[],structures:[]}),[l,u]=_.useState({id:"",type:"",description:"",duration:5,intensity:.5}),[m,f]=_.useState(Xt("building")),[d,v]=_.useState(-1),[b,p]=_.useState(!1),g=_.useMemo(()=>!e.landmarks||!Array.isArray(e.landmarks)?(console.warn("planetStats.landmarks is not an array:",e.landmarks),[]):e.landmarks.map(N=>{const A=n?N.category==="gaseous":N.category==="terrestrial";return{...N,isActive:A}}),[e.landmarks,n]);_.useEffect(()=>{if(s!==r&&(a(r),c(N=>({...N,influence_type:n?"storm":"mountain",category:n?"gaseous":"terrestrial"})),d>=0&&e.landmarks&&Array.isArray(e.landmarks))){const N=e.landmarks[d];N&&((n?(N.category||"terrestrial")==="gaseous":(N.category||"terrestrial")==="terrestrial")||(v(-1),p(!0)))}},[r,s,d,e.landmarks,n]);const x=()=>{if(!i.classification_id||!i.type)return;const N={...i,category:n?"gaseous":"terrestrial"},O=[...Array.isArray(e.landmarks)?e.landmarks:[],N];t({...e,landmarks:O}),c({classification_id:"",type:"",visual_effect:"",image_link:"",coordinates:{x:0,y:0,z:0},influence_radius:.5,influence_strength:.7,influence_type:n?"storm":"mountain",category:n?"gaseous":"terrestrial",events:[],structures:[]})},y=N=>{if(!e.landmarks||!Array.isArray(e.landmarks))return;const A=g[N],O=e.landmarks.findIndex(H=>H.classification_id===A.classification_id);if(O===-1)return;const z=[...e.landmarks];z.splice(O,1),t({...e,landmarks:z}),d===N?v(-1):d>N&&v(d-1)},w=(N,A)=>{c(N==="coordinates"?{...i,coordinates:{...i.coordinates,...A}}:{...i,[N]:A})},C=(N,A)=>{if(!e.landmarks||!Array.isArray(e.landmarks)||d===-1)return;const O=g[d],z=e.landmarks.findIndex(I=>I.classification_id===O.classification_id);if(z===-1)return;const H=[...e.landmarks];N==="coordinates"?H[z]={...H[z],coordinates:{...H[z].coordinates,...A}}:H[z]={...H[z],[N]:A},t({...e,landmarks:H})},j=()=>{if(d===-1||!l.type||!l.description||!e.landmarks||!Array.isArray(e.landmarks))return;const N=g[d],A=e.landmarks.findIndex(G=>G.classification_id===N.classification_id);if(A===-1)return;const O=[...e.landmarks],z=O[A],H=`EV-${Math.floor(Math.random()*900+100)}`,I={...l,id:H};O[A]={...z,events:[...z.events||[],I]},t({...e,landmarks:O}),u({id:"",type:"",description:"",duration:5,intensity:.5})},R=N=>{if(!e.landmarks||!Array.isArray(e.landmarks)||d===-1)return;const A=g[d],O=e.landmarks.findIndex(G=>G.classification_id===A.classification_id);if(O===-1)return;const z=[...e.landmarks],H=z[O];if(!H.events||!Array.isArray(H.events))return;const I=[...H.events];I.splice(N,1),z[O]={...H,events:I},t({...e,landmarks:z})};return o.jsxs("div",{className:"space-y-6",children:[b&&o.jsxs(Bn,{variant:"default",className:"bg-amber-900/20 border-amber-500/50 text-amber-300",children:[o.jsx(zn,{className:"h-4 w-4"}),o.jsxs(Vn,{children:["Some landmarks are hidden because they don't match the current planet type (",n?"gaseous":"terrestrial",").",o.jsx(ce,{variant:"link",className:"p-0 h-auto text-amber-300 hover:text-amber-200",onClick:()=>p(!1),children:"Dismiss"})]})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsxs(xe,{className:"text-lg tracking-wide",children:["LANDMARK DATABASE (",n?"GASEOUS":"TERRESTRIAL"," PLANET)"]})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Current Landmarks"}),g.length===0?o.jsx("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded-md",children:o.jsx("p",{className:"text-slate-400",children:"No landmarks registered"})}):o.jsx("div",{className:"space-y-3",children:g.map((N,A)=>o.jsxs("div",{className:`border ${d===A?"border-cyan-400":"border-slate-600"} rounded-md p-3 space-y-2 ${N.isActive?"":"opacity-50"}`,onClick:()=>v(A),children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-cyan-200",children:N.classification_id}),!N.isActive&&o.jsx("span",{className:"text-xs bg-amber-900/50 text-amber-300 px-1.5 py-0.5 rounded",children:N.category==="gaseous"?"GASEOUS":"TERRESTRIAL"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),v(A)},className:"h-6 w-6 p-0 text-blue-100 hover:text-cyan-200 hover:bg-transparent",children:o.jsx(Pm,{className:"h-4 w-4"})}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),y(A)},className:"h-6 w-6 p-0 text-blue-100 hover:text-red-400 hover:bg-transparent",children:o.jsx(Mr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[o.jsx("span",{className:"text-slate-400",children:"Type:"}),o.jsx("span",{children:N.type}),o.jsx("span",{className:"text-slate-400",children:"Visual Effect:"}),o.jsx("span",{children:N.visual_effect||"None"}),o.jsx("span",{className:"text-slate-400",children:"Coordinates:"}),o.jsxs("span",{children:["X: ",N.coordinates.x.toFixed(2),", Y: ",N.coordinates.y.toFixed(2),", Z:"," ",N.coordinates.z.toFixed(2)]}),o.jsx("span",{className:"text-slate-400",children:"Events:"}),o.jsx("span",{children:N.events&&Array.isArray(N.events)?N.events.length:0}),N.structures&&Array.isArray(N.structures)&&N.structures.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-400",children:"Structures:"}),o.jsx("span",{className:"text-cyan-300",children:N.structures.length})]})]})]},N.classification_id))})]})})]}),d!==-1&&g[d]&&o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsxs(xe,{className:"text-lg tracking-wide flex items-center justify-between",children:[o.jsxs("span",{children:["LANDMARK DETAILS: ",g[d].classification_id]}),!g[d].isActive&&o.jsxs("span",{className:"text-xs bg-amber-900/50 text-amber-300 px-2 py-1 rounded",children:["INACTIVE (",(T=g[d].category)==null?void 0:T.toUpperCase(),")"]})]})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs(Zo,{defaultValue:"info",children:[o.jsxs(Xr,{className:"bg-slate-800 border border-slate-600",children:[o.jsx(Ue,{value:"info",className:"data-[state=active]:bg-cyan-900/30 data-[state=active]:text-cyan-100",children:"INFO"}),o.jsx(Ue,{value:"events",className:"data-[state=active]:bg-cyan-900/30 data-[state=active]:text-cyan-100",children:"EVENTS"}),o.jsx(Ue,{value:"terrain",className:"data-[state=active]:bg-cyan-900/30 data-[state=active]:text-cyan-100",children:"TERRAIN"})]}),o.jsx(Ge,{value:"info",className:"pt-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(W,{className:"text-cyan-200",children:"Type"}),o.jsx("div",{className:"mt-1 p-2 bg-slate-700/50 border border-slate-600 rounded",children:g[d].type})]}),o.jsxs("div",{children:[o.jsx(W,{className:"text-cyan-200",children:"Visual Effect"}),o.jsx("div",{className:"mt-1 p-2 bg-slate-700/50 border border-slate-600 rounded",children:g[d].visual_effect||"None"})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Coordinates"}),o.jsxs("div",{className:"mt-1 p-2 bg-slate-700/50 border border-slate-600 rounded",children:["X: ",g[d].coordinates.x.toFixed(2),", Y:"," ",g[d].coordinates.y.toFixed(2),", Z:"," ",g[d].coordinates.z.toFixed(2)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Category"}),o.jsx("div",{className:"mt-1 p-2 bg-slate-700/50 border border-slate-600 rounded capitalize",children:g[d].category||(n?"gaseous":"terrestrial")})]}),o.jsxs("div",{className:"col-span-2 mt-4",children:[o.jsx(W,{className:"text-cyan-200 mb-2 block",children:"Structures"}),!g[d].structures||!Array.isArray(g[d].structures)||g[d].structures.length===0?o.jsx("div",{className:"p-4 bg-slate-700/50 border border-slate-600 rounded text-center text-slate-400",children:"No structures added to this landmark"}):o.jsx("div",{className:"space-y-2",children:(S=g[d].structures)==null?void 0:S.map(N=>o.jsx("div",{className:"p-2 bg-slate-700/50 border border-slate-600 rounded",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-cyan-200",children:N.name}),o.jsx("span",{className:"text-xs bg-cyan-900/50 text-cyan-200 px-1.5 py-0.5 rounded",children:zr(N.type)})]}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>{var O;if(!g[d].structures)return;const A=((O=g[d].structures)==null?void 0:O.filter(z=>z.id!==N.id))||[];C("structures",A)},className:"h-6 w-6 p-0 text-blue-100 hover:text-red-400 hover:bg-transparent",children:o.jsx(Mr,{className:"h-4 w-4"})})]})},N.id))}),o.jsxs("div",{className:"mt-4 p-3 border border-slate-600 rounded-md",children:[o.jsx(W,{className:"text-cyan-200 mb-2 block",children:"Add New Structure"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(W,{className:"text-xs",children:"Name"}),o.jsx(ie,{value:m.name,onChange:N=>f({...m,name:N.target.value}),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:"Structure Name"})]}),o.jsxs("div",{children:[o.jsx(W,{className:"text-xs",children:"Type"}),o.jsxs(ct,{value:m.type,onValueChange:N=>f(Xt(N)),children:[o.jsx(Ze,{className:"bg-slate-700 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select type"})}),o.jsx(Je,{className:"bg-slate-700 border-slate-600 text-blue-100",children:Zc.map(N=>o.jsx(Qe,{value:N,children:zr(N)},N))})]})]})]}),o.jsxs(ce,{onClick:()=>{if(!m.name)return;const A=[...g[d].structures&&Array.isArray(g[d].structures)?g[d].structures:[],m];C("structures",A),f(Xt("building"))},className:"w-full mt-3 bg-cyan-700 hover:bg-cyan-600 text-white",children:[o.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Structure"]})]})]})]})}),o.jsx(Ge,{value:"events",className:"pt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Event List"}),!g[d].events||!Array.isArray(g[d].events)||((F=g[d].events)==null?void 0:F.length)===0?o.jsx("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded-md",children:o.jsx("p",{className:"text-slate-400",children:"No events registered for this landmark"})}):o.jsx("div",{className:"space-y-2",children:(P=g[d].events)==null?void 0:P.map((N,A)=>o.jsxs("div",{className:"border border-slate-600 rounded-md p-2 text-xs",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"font-bold",children:[N.id,": ",N.type]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-blue-100 hover:text-cyan-200 hover:bg-transparent",children:o.jsx(Dm,{className:"h-3 w-3"})}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>R(A),className:"h-5 w-5 p-0 text-blue-100 hover:text-red-400 hover:bg-transparent",children:o.jsx(Mr,{className:"h-3 w-3"})})]})]}),o.jsx("div",{className:"mt-1",children:N.description}),N.duration&&o.jsxs("div",{className:"mt-1 text-slate-400",children:["Duration: ",N.duration,"s"]}),N.intensity&&o.jsxs("div",{className:"text-slate-400",children:["Intensity: ",N.intensity.toFixed(1)]})]},N.id))})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-600",children:[o.jsx(W,{className:"text-cyan-200",children:"Add New Event"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Type"}),o.jsx(ie,{value:l.type,onChange:N=>u({...l,type:N.target.value}),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:"Lightning Strike"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Duration (s)"}),o.jsx(ie,{type:"number",value:l.duration,onChange:N=>u({...l,duration:Number.parseFloat(N.target.value)}),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.5"})]}),o.jsxs("div",{className:"col-span-2 space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Description"}),o.jsx(ie,{value:l.description,onChange:N=>u({...l,description:N.target.value}),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:"Brief description of the event"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Intensity (0-1)"}),o.jsx(ie,{type:"number",value:l.intensity,onChange:N=>u({...l,intensity:Number.parseFloat(N.target.value)}),className:"bg-slate-700 border-slate-600 text-blue-100",min:"0",max:"1",step:"0.1"})]})]}),o.jsxs(ce,{onClick:j,className:"w-full mt-2 bg-cyan-700 hover:bg-cyan-600 text-white",children:[o.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Event"]})]})]})}),o.jsx(Ge,{value:"terrain",className:"pt-4",children:o.jsxs("div",{className:"space-y-6",children:[!g[d].isActive&&o.jsxs(Bn,{variant:"default",className:"bg-amber-900/20 border-amber-500/50 text-amber-300",children:[o.jsx(zn,{className:"h-4 w-4"}),o.jsxs(Vn,{children:["This landmark is inactive because it's a ",g[d].category," landmark on a ",n?"gaseous":"terrestrial"," planet. The terrain preview shows how it would appear on a ",g[d].category," planet."]})]}),o.jsx("div",{className:"w-full h-64 bg-black rounded-md overflow-hidden",children:o.jsx(bh,{landmark:g[d],planetStats:e,updateLandmark:C})}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Influence Type"}),o.jsxs(ct,{value:g[d].influence_type||(n?"storm":"mountain"),onValueChange:N=>C("influence_type",N),children:[o.jsx(Ze,{className:"bg-slate-700 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select type"})}),o.jsx(Je,{className:"bg-slate-700 border-slate-600 text-blue-100",children:hi(g[d].category).map(N=>o.jsx(Qe,{value:N,children:pi(N)},N))})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Influence Radius"}),o.jsx(ie,{type:"number",value:g[d].influence_radius||.5,onChange:N=>C("influence_radius",Number.parseFloat(N.target.value)),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]}),o.jsxs("div",{className:"col-span-2 space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Influence Strength"}),o.jsx(Re,{defaultValue:[Number(g[d].influence_strength||.7)*100],max:100,step:1,onValueChange:N=>C("influence_strength",N[0]/100),className:"text-blue-100"}),o.jsx("div",{className:"text-xs text-slate-400",children:(g[d].influence_strength||.7).toFixed(2)})]})]})})]})})]})})]}),o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsxs(xe,{className:"text-lg tracking-wide",children:["ADD NEW ",n?"GASEOUS":"TERRESTRIAL"," LANDMARK"]})}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Classification ID"}),o.jsx(ie,{value:i.classification_id,onChange:N=>w("classification_id",N.target.value),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:"LM-001"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Type"}),o.jsx(ie,{value:i.type,onChange:N=>w("type",N.target.value),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:n?"Storm System":"Mountain Range"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Visual Effect"}),o.jsx(ie,{value:i.visual_effect,onChange:N=>w("visual_effect",N.target.value),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:n?"Lightning":"Glowing"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Image Link"}),o.jsx(ie,{value:i.image_link,onChange:N=>w("image_link",N.target.value),className:"bg-slate-700 border-slate-600 text-blue-100",placeholder:"https://example.com/image.jpg"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(W,{className:"text-cyan-200",children:"Coordinates"}),o.jsx(ce,{variant:"outline",size:"sm",onClick:()=>w("coordinates",wh()),className:"h-6 text-xs border-slate-600 text-blue-100 hover:bg-cyan-900/20",children:"Random"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"X"}),o.jsx(ie,{type:"number",value:i.coordinates.x,onChange:N=>w("coordinates",{x:Number.parseFloat(N.target.value)}),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Y"}),o.jsx(ie,{type:"number",value:i.coordinates.y,onChange:N=>w("coordinates",{y:Number.parseFloat(N.target.value)}),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(W,{className:"text-xs",children:"Z"}),o.jsx(ie,{type:"number",value:i.coordinates.z,onChange:N=>w("coordinates",{z:Number.parseFloat(N.target.value)}),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Influence Radius"}),o.jsx(ie,{type:"number",value:i.influence_radius||.5,onChange:N=>w("influence_radius",Number.parseFloat(N.target.value)),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Influence Strength"}),o.jsx(ie,{type:"number",value:i.influence_strength||.7,onChange:N=>w("influence_strength",Number.parseFloat(N.target.value)),className:"bg-slate-700 border-slate-600 text-blue-100",step:"0.1"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"text-cyan-200",children:"Influence Type"}),o.jsxs(ct,{value:i.influence_type||(n?"storm":"mountain"),onValueChange:N=>w("influence_type",N),children:[o.jsx(Ze,{className:"bg-slate-700 border-slate-600 text-blue-100",children:o.jsx(lt,{placeholder:"Select type"})}),o.jsx(Je,{className:"bg-slate-700 border-slate-600 text-blue-100",children:hi().map(N=>o.jsx(Qe,{value:N,children:pi(N)},N))})]})]}),o.jsxs(ce,{onClick:x,className:"w-full mt-2 bg-cyan-700 hover:bg-cyan-600 text-white",children:[o.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add ",n?"Gaseous":"Terrestrial"," Landmark"]})]})})]})]})}const gi=h.forwardRef(({className:e,...t},r)=>o.jsx("textarea",{className:ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));gi.displayName="Textarea";function Nh({planetStats:e,setPlanetStats:t,classificationId:r,author:n,setSelectedBiome:s,setCustomColors:a}){const[i,c]=_.useState(""),l=()=>{const m={classificationId:r,author:n,type:e.type||"Unknown",biome:e.biome||"Unknown",exportDate:new Date().toISOString()};let f=`// Planet Configuration Export
`;f+=`// Classification: ${m.classificationId}
`,f+=`// Author: ${m.author}
`,f+=`// Export Date: ${m.exportDate}

`,Object.entries(e).forEach(([d,v])=>{if(v!=null)if(d==="customColors"&&v&&Object.keys(v).length>0)f+=`${d}: ${JSON.stringify(v)}
`;else if(d==="landmarks"&&Array.isArray(v)&&v.length>0){const b=JSON.parse(JSON.stringify(v)),p=JSON.stringify(b,null,2).split(`
`).map((g,x)=>x===0?g:"  "+g).join(`
`);f+=`${d}: ${p}
`}else typeof v=="number"?f+=`${d}: ${v.toFixed(2)}
`:typeof v=="boolean"?f+=`${d}: ${v?"true":"false"}
`:typeof v=="object"&&d!=="customColors"&&d!=="landmarks"?f+=`${d}: ${JSON.stringify(v)}
`:typeof v!="object"&&(f+=`${d}: ${v}
`)}),c(f)},u=()=>{try{const m=i.split(`
`).filter(v=>!v.trim().startsWith("//")&&v.trim()!==""),f={};m.forEach(v=>{if(!v.trim())return;const b=v.indexOf(":");if(b===-1)return;const p=v.substring(0,b).trim(),g=v.substring(b+1).trim();let x;if(g==="true"||g==="false")x=g==="true";else if(g.startsWith("[")||g.startsWith("{"))try{x=JSON.parse(g)}catch{x=g}else isNaN(Number(g))?x=g:x=Number(g);f[p]=x});const d=Fr(f);t(d),d.biome&&s(d.biome),d.customColors&&a(d.customColors)}catch(m){console.error("Error importing planet configuration:",m)}};return o.jsx("div",{className:"space-y-6",children:o.jsxs(ge,{className:"bg-slate-800/70 border-slate-700/60 text-blue-100",children:[o.jsx(ve,{className:"pb-2",children:o.jsx(xe,{className:"text-lg tracking-wide",children:"EXPORT"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(W,{className:"text-cyan-200",children:"Planet Configuration"}),o.jsx(gi,{value:i,onChange:m=>c(m.target.value),className:"h-64 font-mono text-xs bg-slate-800 border-slate-600 text-blue-100",placeholder:"Export or paste planet configuration here..."})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"flex-1 border-slate-600 text-blue-100 hover:bg-cyan-900/20",onClick:l,children:[o.jsx(_m,{className:"h-4 w-4 mr-2"}),"Export"]}),o.jsxs(ce,{variant:"outline",size:"sm",className:"flex-1 border-slate-600 text-blue-100 hover:bg-cyan-900/20",onClick:u,children:[o.jsx(Om,{className:"h-4 w-4 mr-2"}),"Import"]}),o.jsx(ce,{variant:"outline",size:"sm",className:"border-slate-600 text-blue-100 hover:bg-cyan-900/20",onClick:()=>navigator.clipboard.writeText(i),children:o.jsx(Rm,{className:"h-4 w-4"})})]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"You can import partial configurations (e.g., just mass and radius). Missing values will be filled with defaults."})]})]})})}function jh({planetStats:e,setPlanetStats:t,classificationId:r="UNCLASSIFIED",author:n="UNKNOWN"}){var l,u,m,f;const[s,a]=_.useState(e.biome||"Rocky Highlands"),[i,c]=_.useState({oceanFloor:((l=e.customColors)==null?void 0:l.oceanFloor)||"",beach:((u=e.customColors)==null?void 0:u.beach)||"",regular:((m=e.customColors)==null?void 0:m.regular)||"",mountain:((f=e.customColors)==null?void 0:f.mountain)||""});return o.jsxs("div",{className:"absolute top-0 left-0 h-full w-96 bg-slate-800/90 text-blue-100 p-6 overflow-y-auto font-mono border-r border-slate-600/60",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6 tracking-wider border-b border-slate-600/60 pb-2",children:"PLANET SETTINGS"}),o.jsx("div",{className:"mb-6 p-3 bg-slate-700/60 border border-slate-600/60 rounded-md hidden",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsx("div",{className:"text-slate-400",children:"CLASSIFICATION:"}),o.jsx("div",{children:r}),o.jsx("div",{className:"text-slate-400",children:"AUTHOR:"}),o.jsx("div",{children:n})]})}),o.jsxs(Zo,{defaultValue:"physical",className:"space-y-6",children:[o.jsxs(Xr,{className:"grid w-full grid-cols-4 mb-6 bg-slate-700 border border-slate-600",children:[o.jsx(Ue,{value:"physical",className:"data-[state=active]:bg-cyan-800/40 data-[state=active]:text-cyan-50",children:"PHYSICAL"}),o.jsx(Ue,{value:"surface",className:"data-[state=active]:bg-cyan-800/40 data-[state=active]:text-cyan-50",children:"SURFACE"}),o.jsx(Ue,{value:"biome",className:"data-[state=active]:bg-cyan-800/40 data-[state=active]:text-cyan-50",children:"BIOME"}),o.jsx(Ue,{value:"landmarks",className:"data-[state=active]:bg-cyan-800/40 data-[state=active]:text-cyan-50",children:"LANDMARKS"})]}),o.jsxs(Ge,{value:"physical",children:[o.jsx(Pu,{planetStats:e,setPlanetStats:t}),o.jsx("div",{className:"mt-6",children:o.jsx(Nh,{planetStats:e,setPlanetStats:t,classificationId:r,author:n,setSelectedBiome:a,setCustomColors:c})})]}),o.jsx(Ge,{value:"surface",children:o.jsx(zm,{planetStats:e,setPlanetStats:t,selectedBiome:s})}),o.jsx(Ge,{value:"biome",children:o.jsx(Vm,{planetStats:e,setPlanetStats:t,selectedBiome:s,setSelectedBiome:a,customColors:i,setCustomColors:c})}),o.jsx(Ge,{value:"landmarks",children:o.jsx(Ch,{planetStats:e,setPlanetStats:t})})]})]})}var $n=["Enter"," "],kh=["ArrowDown","PageUp","Home"],vi=["ArrowUp","PageDown","End"],Eh=[...kh,...vi],Sh={ltr:[...$n,"ArrowRight"],rtl:[...$n,"ArrowLeft"]},Mh={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ft="Menu",[Lt,Th,Ah]=Zt(Ft),[ut,xi]=Fe(Ft,[Ah,pr,Jt]),Tr=pr(),yi=Jt(),[Rh,dt]=ut(Ft),[_h,zt]=ut(Ft),bi=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:a,modal:i=!0}=e,c=Tr(t),[l,u]=h.useState(null),m=h.useRef(!1),f=Ae(a),d=At(s);return h.useEffect(()=>{const v=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),o.jsx(la,{...c,children:o.jsx(Rh,{scope:t,open:r,onOpenChange:f,content:l,onContentChange:u,children:o.jsx(_h,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:d,modal:i,children:n})})})};bi.displayName=Ft;var Ph="MenuAnchor",Hn=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Tr(r);return o.jsx(ua,{...s,...n,ref:t})});Hn.displayName=Ph;var Un="MenuPortal",[Ih,wi]=ut(Un,{forceMount:void 0}),Ci=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,a=dt(Un,t);return o.jsx(Ih,{scope:t,forceMount:r,children:o.jsx(ht,{present:r||a.open,children:o.jsx(kn,{asChild:!0,container:s,children:n})})})};Ci.displayName=Un;var Ne="MenuContent",[Dh,Gn]=ut(Ne),Ni=h.forwardRef((e,t)=>{const r=wi(Ne,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=dt(Ne,e.__scopeMenu),i=zt(Ne,e.__scopeMenu);return o.jsx(Lt.Provider,{scope:e.__scopeMenu,children:o.jsx(ht,{present:n||a.open,children:o.jsx(Lt.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(Oh,{...s,ref:t}):o.jsx(Fh,{...s,ref:t})})})})}),Oh=h.forwardRef((e,t)=>{const r=dt(Ne,e.__scopeMenu),n=h.useRef(null),s=oe(t,n);return h.useEffect(()=>{const a=n.current;if(a)return pa(a)},[]),o.jsx(Wn,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:U(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Fh=h.forwardRef((e,t)=>{const r=dt(Ne,e.__scopeMenu);return o.jsx(Wn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Lh=mt("MenuContent.ScrollLock"),Wn=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:d,onDismiss:v,disableOutsideScroll:b,...p}=e,g=dt(Ne,r),x=zt(Ne,r),y=Tr(r),w=yi(r),C=Th(r),[j,R]=h.useState(null),T=h.useRef(null),S=oe(t,T,g.onContentChange),F=h.useRef(0),P=h.useRef(""),N=h.useRef(0),A=h.useRef(null),O=h.useRef("right"),z=h.useRef(0),H=b?Rn:h.Fragment,I=b?{as:Lh,allowPinchZoom:!0}:void 0,G=D=>{var L,K;const E=P.current+D,$=C().filter(J=>!J.disabled),q=document.activeElement,Y=(L=$.find(J=>J.ref.current===q))==null?void 0:L.textValue,te=$.map(J=>J.textValue),ae=Xh(te,E,Y),le=(K=$.find(J=>J.textValue===ae))==null?void 0:K.ref.current;(function J(Q){P.current=Q,window.clearTimeout(F.current),Q!==""&&(F.current=window.setTimeout(()=>J(""),1e3))})(E),le&&setTimeout(()=>le.focus())};h.useEffect(()=>()=>window.clearTimeout(F.current),[]),Ms();const M=h.useCallback(D=>{var $,q;return O.current===(($=A.current)==null?void 0:$.side)&&Jh(D,(q=A.current)==null?void 0:q.area)},[]);return o.jsx(Dh,{scope:r,searchRef:P,onItemEnter:h.useCallback(D=>{M(D)&&D.preventDefault()},[M]),onItemLeave:h.useCallback(D=>{var E;M(D)||((E=T.current)==null||E.focus(),R(null))},[M]),onTriggerLeave:h.useCallback(D=>{M(D)&&D.preventDefault()},[M]),pointerGraceTimerRef:N,onPointerGraceIntentChange:h.useCallback(D=>{A.current=D},[]),children:o.jsx(H,{...I,children:o.jsx(un,{asChild:!0,trapped:s,onMountAutoFocus:U(a,D=>{var E;D.preventDefault(),(E=T.current)==null||E.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(sn,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:d,onDismiss:v,children:o.jsx(bo,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:R,onEntryFocus:U(l,D=>{x.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(da,{role:"menu","aria-orientation":"vertical","data-state":Bi(g.open),"data-radix-menu-content":"",dir:x.dir,...y,...p,ref:S,style:{outline:"none",...p.style},onKeyDown:U(p.onKeyDown,D=>{const $=D.target.closest("[data-radix-menu-content]")===D.currentTarget,q=D.ctrlKey||D.altKey||D.metaKey,Y=D.key.length===1;$&&(D.key==="Tab"&&D.preventDefault(),!q&&Y&&G(D.key));const te=T.current;if(D.target!==te||!Eh.includes(D.key))return;D.preventDefault();const le=C().filter(L=>!L.disabled).map(L=>L.ref.current);vi.includes(D.key)&&le.reverse(),qh(le)}),onBlur:U(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(F.current),P.current="")}),onPointerMove:U(e.onPointerMove,Vt(D=>{const E=D.target,$=z.current!==D.clientX;if(D.currentTarget.contains(E)&&$){const q=D.clientX>z.current?"right":"left";O.current=q,z.current=D.clientX}}))})})})})})})});Ni.displayName=Ne;var zh="MenuGroup",Kn=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(X.div,{role:"group",...n,ref:t})});Kn.displayName=zh;var Bh="MenuLabel",ji=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(X.div,{...n,ref:t})});ji.displayName=Bh;var Ar="MenuItem",ki="menu.itemSelect",Rr=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,a=h.useRef(null),i=zt(Ar,e.__scopeMenu),c=Gn(Ar,e.__scopeMenu),l=oe(t,a),u=h.useRef(!1),m=()=>{const f=a.current;if(!r&&f){const d=new CustomEvent(ki,{bubbles:!0,cancelable:!0});f.addEventListener(ki,v=>n==null?void 0:n(v),{once:!0}),ho(f,d),d.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(Ei,{...s,ref:l,disabled:r,onClick:U(e.onClick,m),onPointerDown:f=>{var d;(d=e.onPointerDown)==null||d.call(e,f),u.current=!0},onPointerUp:U(e.onPointerUp,f=>{var d;u.current||(d=f.currentTarget)==null||d.click()}),onKeyDown:U(e.onKeyDown,f=>{const d=c.searchRef.current!=="";r||d&&f.key===" "||$n.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Rr.displayName=Ar;var Ei=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=e,i=Gn(Ar,r),c=yi(r),l=h.useRef(null),u=oe(t,l),[m,f]=h.useState(!1),[d,v]=h.useState("");return h.useEffect(()=>{const b=l.current;b&&v((b.textContent??"").trim())},[a.children]),o.jsx(Lt.ItemSlot,{scope:r,disabled:n,textValue:s??d,children:o.jsx(wo,{asChild:!0,...c,focusable:!n,children:o.jsx(X.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:U(e.onPointerMove,Vt(b=>{n?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:U(e.onPointerLeave,Vt(b=>i.onItemLeave(b))),onFocus:U(e.onFocus,()=>f(!0)),onBlur:U(e.onBlur,()=>f(!1))})})})}),Vh="MenuCheckboxItem",Si=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return o.jsx(_i,{scope:e.__scopeMenu,checked:r,children:o.jsx(Rr,{role:"menuitemcheckbox","aria-checked":_r(r)?"mixed":r,...s,ref:t,"data-state":Yn(r),onSelect:U(s.onSelect,()=>n==null?void 0:n(_r(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Si.displayName=Vh;var Mi="MenuRadioGroup",[$h,Hh]=ut(Mi,{value:void 0,onValueChange:()=>{}}),Ti=h.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,a=Ae(n);return o.jsx($h,{scope:e.__scopeMenu,value:r,onValueChange:a,children:o.jsx(Kn,{...s,ref:t})})});Ti.displayName=Mi;var Ai="MenuRadioItem",Ri=h.forwardRef((e,t)=>{const{value:r,...n}=e,s=Hh(Ai,e.__scopeMenu),a=r===s.value;return o.jsx(_i,{scope:e.__scopeMenu,checked:a,children:o.jsx(Rr,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":Yn(a),onSelect:U(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});Ri.displayName=Ai;var qn="MenuItemIndicator",[_i,Uh]=ut(qn,{checked:!1}),Pi=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,a=Uh(qn,r);return o.jsx(ht,{present:n||_r(a.checked)||a.checked===!0,children:o.jsx(X.span,{...s,ref:t,"data-state":Yn(a.checked)})})});Pi.displayName=qn;var Gh="MenuSeparator",Ii=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(X.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Ii.displayName=Gh;var Wh="MenuArrow",Di=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Tr(r);return o.jsx(fa,{...s,...n,ref:t})});Di.displayName=Wh;var Kh="MenuSub",[m0,Oi]=ut(Kh),Bt="MenuSubTrigger",Fi=h.forwardRef((e,t)=>{const r=dt(Bt,e.__scopeMenu),n=zt(Bt,e.__scopeMenu),s=Oi(Bt,e.__scopeMenu),a=Gn(Bt,e.__scopeMenu),i=h.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=a,u={__scopeMenu:e.__scopeMenu},m=h.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return h.useEffect(()=>m,[m]),h.useEffect(()=>{const f=c.current;return()=>{window.clearTimeout(f),l(null)}},[c,l]),o.jsx(Hn,{asChild:!0,...u,children:o.jsx(Ei,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Bi(r.open),...e,ref:Br(t,s.onTriggerChange),onClick:f=>{var d;(d=e.onClick)==null||d.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:U(e.onPointerMove,Vt(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:U(e.onPointerLeave,Vt(f=>{var v,b;m();const d=(v=r.content)==null?void 0:v.getBoundingClientRect();if(d){const p=(b=r.content)==null?void 0:b.dataset.side,g=p==="right",x=g?-5:5,y=d[g?"left":"right"],w=d[g?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:y,y:d.top},{x:w,y:d.top},{x:w,y:d.bottom},{x:y,y:d.bottom}],side:p}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:U(e.onKeyDown,f=>{var v;const d=a.searchRef.current!=="";e.disabled||d&&f.key===" "||Sh[n.dir].includes(f.key)&&(r.onOpenChange(!0),(v=r.content)==null||v.focus(),f.preventDefault())})})})});Fi.displayName=Bt;var Li="MenuSubContent",zi=h.forwardRef((e,t)=>{const r=wi(Ne,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=dt(Ne,e.__scopeMenu),i=zt(Ne,e.__scopeMenu),c=Oi(Li,e.__scopeMenu),l=h.useRef(null),u=oe(t,l);return o.jsx(Lt.Provider,{scope:e.__scopeMenu,children:o.jsx(ht,{present:n||a.open,children:o.jsx(Lt.Slot,{scope:e.__scopeMenu,children:o.jsx(Wn,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:U(e.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:U(e.onEscapeKeyDown,m=>{i.onClose(),m.preventDefault()}),onKeyDown:U(e.onKeyDown,m=>{var v;const f=m.currentTarget.contains(m.target),d=Mh[i.dir].includes(m.key);f&&d&&(a.onOpenChange(!1),(v=c.trigger)==null||v.focus(),m.preventDefault())})})})})})});zi.displayName=Li;function Bi(e){return e?"open":"closed"}function _r(e){return e==="indeterminate"}function Yn(e){return _r(e)?"indeterminate":e?"checked":"unchecked"}function qh(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Yh(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Xh(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=Yh(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const l=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function Zh(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const c=t[a],l=t[i],u=c.x,m=c.y,f=l.x,d=l.y;m>n!=d>n&&r<(f-u)*(n-m)/(d-m)+u&&(s=!s)}return s}function Jh(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Zh(r,t)}function Vt(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Qh=bi,ep=Hn,tp=Ci,rp=Ni,np=Kn,op=ji,sp=Rr,ap=Si,ip=Ti,cp=Ri,lp=Pi,up=Ii,dp=Di,fp=Fi,mp=zi,Pr="DropdownMenu",[hp,h0]=Fe(Pr,[xi]),he=xi(),[pp,Vi]=hp(Pr),$i=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,l=he(t),u=h.useRef(null),[m,f]=nt({prop:s,defaultProp:a??!1,onChange:i,caller:Pr});return o.jsx(pp,{scope:t,triggerId:rt(),triggerRef:u,contentId:rt(),open:m,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(d=>!d),[f]),modal:c,children:o.jsx(Qh,{...l,open:m,onOpenChange:f,dir:n,modal:c,children:r})})};$i.displayName=Pr;var Hi="DropdownMenuTrigger",Ui=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,a=Vi(Hi,r),i=he(r);return o.jsx(ep,{asChild:!0,...i,children:o.jsx(X.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Br(t,a.triggerRef),onPointerDown:U(e.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:U(e.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Ui.displayName=Hi;var gp="DropdownMenuPortal",Gi=e=>{const{__scopeDropdownMenu:t,...r}=e,n=he(t);return o.jsx(tp,{...n,...r})};Gi.displayName=gp;var Wi="DropdownMenuContent",Ki=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Vi(Wi,r),a=he(r),i=h.useRef(!1);return o.jsx(rp,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:t,onCloseAutoFocus:U(e.onCloseAutoFocus,c=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:U(e.onInteractOutside,c=>{const l=c.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,m=l.button===2||u;(!s.modal||m)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ki.displayName=Wi;var vp="DropdownMenuGroup",xp=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(np,{...s,...n,ref:t})});xp.displayName=vp;var yp="DropdownMenuLabel",qi=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(op,{...s,...n,ref:t})});qi.displayName=yp;var bp="DropdownMenuItem",Yi=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(sp,{...s,...n,ref:t})});Yi.displayName=bp;var wp="DropdownMenuCheckboxItem",Xi=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(ap,{...s,...n,ref:t})});Xi.displayName=wp;var Cp="DropdownMenuRadioGroup",Np=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(ip,{...s,...n,ref:t})});Np.displayName=Cp;var jp="DropdownMenuRadioItem",Zi=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(cp,{...s,...n,ref:t})});Zi.displayName=jp;var kp="DropdownMenuItemIndicator",Ji=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(lp,{...s,...n,ref:t})});Ji.displayName=kp;var Ep="DropdownMenuSeparator",Qi=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(up,{...s,...n,ref:t})});Qi.displayName=Ep;var Sp="DropdownMenuArrow",Mp=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(dp,{...s,...n,ref:t})});Mp.displayName=Sp;var Tp="DropdownMenuSubTrigger",ec=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(fp,{...s,...n,ref:t})});ec.displayName=Tp;var Ap="DropdownMenuSubContent",tc=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=he(r);return o.jsx(mp,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tc.displayName=Ap;var Rp=$i,_p=Ui,Pp=Gi,rc=Ki,nc=qi,oc=Yi,sc=Xi,ac=Zi,ic=Ji,cc=Qi,lc=ec,uc=tc;const Ip=Rp,Dp=_p,Op=h.forwardRef(({className:e,inset:t,children:r,...n},s)=>o.jsxs(lc,{ref:s,className:ee("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,o.jsx(Sm,{className:"ml-auto"})]}));Op.displayName=lc.displayName;const Fp=h.forwardRef(({className:e,...t},r)=>o.jsx(uc,{ref:r,className:ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Fp.displayName=uc.displayName;const dc=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(Pp,{children:o.jsx(rc,{ref:n,sideOffset:t,className:ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));dc.displayName=rc.displayName;const $t=h.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(oc,{ref:n,className:ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));$t.displayName=oc.displayName;const Lp=h.forwardRef(({className:e,children:t,checked:r,...n},s)=>o.jsxs(sc,{ref:s,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ic,{children:o.jsx(di,{className:"h-4 w-4"})})}),t]}));Lp.displayName=sc.displayName;const zp=h.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(ac,{ref:n,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ic,{children:o.jsx(Tm,{className:"h-2 w-2 fill-current"})})}),t]}));zp.displayName=ac.displayName;const Bp=h.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(nc,{ref:n,className:ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Bp.displayName=nc.displayName;const Vp=h.forwardRef(({className:e,...t},r)=>o.jsx(cc,{ref:r,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));Vp.displayName=cc.displayName;var Xn,fc;function $p(){if(fc)return Xn;fc=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,s=(x,y)=>{for(var w in y)e(x,w,{get:y[w],enumerable:!0})},a=(x,y,w,C)=>{if(y&&typeof y=="object"||typeof y=="function")for(let j of r(y))!n.call(x,j)&&j!==w&&e(x,j,{get:()=>y[j],enumerable:!(C=t(y,j))||C.enumerable});return x},i=x=>a(e({},"__esModule",{value:!0}),x),c=(x,y,w)=>new Promise((C,j)=>{var R=F=>{try{S(w.next(F))}catch(P){j(P)}},T=F=>{try{S(w.throw(F))}catch(P){j(P)}},S=F=>F.done?C(F.value):Promise.resolve(F.value).then(R,T);S((w=w.apply(x,y)).next())}),l={};s(l,{SessionContextProvider:()=>d,useSession:()=>p,useSessionContext:()=>v,useSupabaseClient:()=>b,useUser:()=>g}),Xn=i(l);var u=_,m=to(),f=(0,u.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),d=({supabaseClient:x,initialSession:y=null,children:w})=>{const[C,j]=(0,u.useState)(y),[R,T]=(0,u.useState)(!y),[S,F]=(0,u.useState)();(0,u.useEffect)(()=>{!C&&y&&j(y)},[C,y]),(0,u.useEffect)(()=>{let N=!0;function A(){return c(this,null,function*(){const{data:{session:O},error:z}=yield x.auth.getSession();if(N){if(z){F(z),T(!1);return}j(O),T(!1)}})}return A(),()=>{N=!1}},[]),(0,u.useEffect)(()=>{const{data:{subscription:N}}=x.auth.onAuthStateChange((A,O)=>{O&&(A==="SIGNED_IN"||A==="TOKEN_REFRESHED"||A==="USER_UPDATED")&&j(O),A==="SIGNED_OUT"&&j(null)});return()=>{N.unsubscribe()}},[]);const P=(0,u.useMemo)(()=>R?{isLoading:!0,session:null,error:null,supabaseClient:x}:S?{isLoading:!1,session:null,error:S,supabaseClient:x}:{isLoading:!1,session:C,error:null,supabaseClient:x},[R,C,S]);return(0,m.jsx)(f.Provider,{value:P,children:w})},v=()=>{const x=(0,u.useContext)(f);if(x===void 0)throw new Error("useSessionContext must be used within a SessionContextProvider.");return x};function b(){const x=(0,u.useContext)(f);if(x===void 0)throw new Error("useSupabaseClient must be used within a SessionContextProvider.");return x.supabaseClient}var p=()=>{const x=(0,u.useContext)(f);if(x===void 0)throw new Error("useSession must be used within a SessionContextProvider.");return x.session},g=()=>{var x,y;const w=(0,u.useContext)(f);if(w===void 0)throw new Error("useUser must be used within a SessionContextProvider.");return(y=(x=w.session)==null?void 0:x.user)!=null?y:null};return Xn}var Hp=$p();function Up({planetStats:e}){const t=_.useRef(null),r=_.useRef(null),n=_.useMemo(()=>{console.log("Creating new atmosphere shader material");let a=new k.Color(8900331);e.mass>7||e.radius>2.5?e.temperature<200?a=new k.Color(4620980):e.temperature>350?a=new k.Color(16752762):a=new k.Color(11393254):(e.temperature<200?a=new k.Color(11584734):e.temperature>350&&(a=new k.Color(16758465)),e.precipitationCompound==="co2"?a=new k.Color(13882323):e.precipitationCompound==="methane"&&(a=new k.Color(10145074)));const i=e.atmosphereStrength!==void 0?e.atmosphereStrength:.8,c=new k.ShaderMaterial({uniforms:{time:{value:0},color:{value:a},strength:{value:i}},vertexShader:ro,fragmentShader:no,transparent:!0,side:k.BackSide,blending:k.AdditiveBlending,depthWrite:!1});return r.current=c,c},[]);_.useEffect(()=>{if(!r.current)return;console.log("Updating atmosphere shader uniforms");let a=new k.Color(8900331);e.mass>7||e.radius>2.5?e.temperature<200?a=new k.Color(4620980):e.temperature>350?a=new k.Color(16752762):a=new k.Color(11393254):(e.temperature<200?a=new k.Color(11584734):e.temperature>350&&(a=new k.Color(16758465)),e.precipitationCompound==="co2"?a=new k.Color(13882323):e.precipitationCompound==="methane"&&(a=new k.Color(10145074)));const i=e.atmosphereStrength!==void 0?e.atmosphereStrength:.8;r.current.uniforms.color.value=a,r.current.uniforms.strength.value=i},[e]),Me.useFrame(a=>{r.current&&(r.current.uniforms.time.value=a.clock.elapsedTime)});const s=_.useMemo(()=>e.mass>7||e.radius>2.5?e.radius*1.15:e.radius*1.08,[e.mass,e.radius]);return o.jsx(pe.Sphere,{ref:t,args:[1,64,64],scale:s,children:o.jsx("primitive",{object:n,attach:"material"})})}function Gp({classificationId:e="UNCLASSIFIED",author:t="UNKNOWN",type:r,biome:n,planetConfiguration:s,classificationConfig:a,content:i}){const c=Hp.useSupabaseClient(),[l,u]=_.useState(!1),[m,f]=_.useState("detailed"),[d,v]=_.useState(()=>{const p=s?Fr(s):{...Or,...n?{biome:n}:{},...r?{type:r}:{}};return(!p.landmarks||p.landmarks.length===0)&&(p.landmarks=io()),p});_.useEffect(()=>{if(!s&&!n&&!r)return;const p=s?Fr(s):{...Or,...n?{biome:n}:{},...r?{type:r}:{}};(!p.landmarks||!Array.isArray(p.landmarks)||p.landmarks.length===0)&&(p.landmarks=io()),v(p)},[s,n,r]),_.useEffect(()=>{(async()=>{var x;if(!c)return;const g=Number.parseInt(e);if(!isNaN(g))try{const{data:y,error:w}=await c.from("classifications").select("classificationConfiguration").eq("id",g).single();if(w||!((x=y==null?void 0:y.classificationConfiguration)!=null&&x.exportedValue))return;const{exportedValue:C}=y.classificationConfiguration;v(j=>({...j,...C.mass&&{mass:C.mass},...C.radius&&{radius:C.radius}}))}catch(y){console.error("Error fetching exported values:",y)}})()},[e,c]),_.useEffect(()=>{v(p=>({...p,density:Sc(p.mass,p.radius)}))},[d.mass,d.radius]);const b=()=>{switch(m){case"detailed":return"Detailed View";case"stylized":return"Stylized View";case"simple":return"Simple View";case"standard":return"Standard Render";default:return"Detailed View"}};return _.useEffect(()=>{console.log("Current planet stats:",d),console.log("Current render mode:",m)},[d,m]),o.jsxs("div",{className:"w-full h-screen relative overflow-hidden",children:[o.jsxs(Me.Canvas,{camera:{position:[0,0,10],fov:45},children:[o.jsx("color",{attach:"background",args:["#020209"]}),o.jsx("ambientLight",{intensity:.4}),o.jsx("pointLight",{position:[10,10,10],intensity:2}),o.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#b0c4de"}),o.jsx("directionalLight",{position:[5,5,5],intensity:1.5,castShadow:!0}),o.jsx(pe.Environment,{preset:"sunset"}),m==="detailed"&&o.jsx(Ec,{planetStats:d}),m==="stylized"&&o.jsxs(o.Fragment,{children:[o.jsx(Ic,{planetStats:d}),o.jsx(Up,{planetStats:d}),d.cloudCount&&d.cloudCount>0&&o.jsx(Dc,{planetStats:d})]}),m==="simple"&&o.jsx(Rc,{planetStats:d}),m==="standard"&&o.jsx(tl,{planetStats:d}),o.jsx(pe.Stars,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),o.jsx(pe.OrbitControls,{enableZoom:!0,enablePan:!0,enableRotate:!0}),o.jsxs("mesh",{position:[0,0,-15],children:[o.jsx("sphereGeometry",{args:[5,32,32]}),o.jsx("meshBasicMaterial",{color:"#4060ff",transparent:!0,opacity:.03})]})]},m),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsxs(Ip,{children:[o.jsx(Dp,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm",className:"bg-black/50 hover:bg-black/70 text-white",children:[b(),o.jsx(Ln,{className:"ml-2 h-4 w-4"})]})}),o.jsxs(dc,{className:"bg-black/80 border-slate-700 text-white",children:[o.jsx($t,{className:m==="detailed"?"bg-cyan-900/40":"hover:bg-slate-700/50",onClick:()=>f("detailed"),children:"Detailed View"}),o.jsx($t,{className:m==="stylized"?"bg-cyan-900/40":"hover:bg-slate-700/50",onClick:()=>f("stylized"),children:"Stylized View"}),o.jsx($t,{className:m==="simple"?"bg-cyan-900/40":"hover:bg-slate-700/50",onClick:()=>f("simple"),children:"Simple View"}),o.jsx($t,{className:m==="standard"?"bg-cyan-900/40":"hover:bg-slate-700/50",onClick:()=>f("standard"),children:"Standard Render"})]})]}),o.jsx(ce,{variant:"outline",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white",onClick:()=>u(!l),children:o.jsx(Am,{className:"h-4 w-4"})})]}),l&&o.jsx(jh,{planetStats:d,setPlanetStats:v,classificationId:e,author:t})]})}je.PlanetGenerator=Gp,Object.defineProperty(je,Symbol.toStringTag,{value:"Module"})});
